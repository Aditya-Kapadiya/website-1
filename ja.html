<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="MessagePack,msgpack,JSON,alternative,better json,faster json,serializer">
  <link href='favicon.ico' rel='icon' type='image/x-icon'>

  <link rel="alternate" hreflang="en" href="index.html">
  <link rel="alternate" hreflang="ja" href="ja.html">


  <title>MessagePack: JSONをもっと速く、小さく。</title>

  <!--[if lt IE 9]><script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js" ></script><![endif]-->
  <link media="all" rel="stylesheet" href="css/yuibase.css">
  <link media="all" rel="stylesheet" href="js/prettify/prettify.css">
  <link media="all" rel="stylesheet" href="css/all.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Titillium+Web:400,200">
  <script src="js/all.js"></script>
  <script src="js/prettify/prettify.js"></script>
  <script src="js/prettify/run_prettify.js"></script>
  <script src="js/jquery-2.1.4.min.js"></script>
  <script src="js/jquery.leanModal.min.js" ></script>
  <script src="js/msgpack.js" ></script>

  <style>
  .i18n { font-family: sans-serif; }
.i18n_nav { font-family: sans-serif; font-size: 170%; }
.i18n_head { font-family: sans-serif; }
.i18n_next { font-family:'Avenir Next', 'Titillium Web', 'Myriad Web Pro', 'Helvetica', sans-serif; }
  </style>

  <script type="text/javascript">
  // select initially-selected quick start randomly
  $(function(){
    var index = Math.floor(Math.random()*(document.getElementsByClassName('qs').length-1));
    changeQuickStart(document.getElementsByClassName('qs')[index].id,document.getElementsByClassName('qs-a')[index])}
  );

  $(function() {
    $('pre > code').addClass('prettyprint');
    prettyPrint();
  });

  $(function() {
    $('a[rel*=leanModal]').leanModal({
      top: 100,
      overlay : 0.5,
      closeButton: ".modal_close"
    });
    $(document).keydown(function(e) {
      if (e.keyCode == 27) {
        $('#lean_overlay').fadeOut(200);
        $('#json-to-msgpack').css({'display':'none'});
      }
    });
  });
  </script>

  <script type="text/javascript">
  $(function() {
    $("#json-text").keyup(function(event) {
      var text = $("#json-text").val();
      var obj;
      try {
         obj = JSON.parse(text);
      } catch (e) {
         return;
      }
      var msg = msgpack.pack(obj);
      var hex = jQuery.map(msg, function(e,i) {
        return ("0" + e.toString(16)).slice(-2);
      }).join(" ");
      $("#msgpack-text").text(hex);
      var textLength = encodeURIComponent(text).replace(/%../g,"%").length;
      $("#json-bytes").text(textLength.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-bytes").text(msg.length.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-percent").text(Math.round(msg.length / textLength * 100).toString() + " %");
    }).keyup();
    $("#msgpack-text").keyup(function(event) {
      var hex = $("#msgpack-text").val().replace(/ +/g,'');
      var msgbytes = [];
      for(var i=0; i< hex.length-1; i+=2){
        msgbytes.push(parseInt(hex.substr(i, 2), 16));
      }
      var msg = String.fromCharCode.apply(String, msgbytes);
      var obj=msgpack.unpack(msg);
      var text=JSON.stringify(obj);
      $("#json-text").text(text);
      var textLength = encodeURIComponent(text).replace(/%../g,"%").length;
      $("#json-bytes").text(textLength.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-bytes").text(msg.length.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,') + " bytes");
      $("#msgpack-percent").text(Math.round(msg.length / textLength * 100).toString() + " %");
    });
  });
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-17125377-1', 'auto', {'allowLinker': true});
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  </script>
</head>
<body>
  <header>
    <div>
      <h1><a href="/">MessagePack</a></h1>
      <nav id="topnav">
        <ul>
          <li><a rel="leanModal" href="#json-to-msgpack" class="i18n_nav">Try!</a></li>
          <li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md" class="i18n_nav">フォーマット仕様</a></li>
          <li><a href="http://twitter.com/search/MessagePack%20OR%20msgpack" class="i18n_nav">#msgpack</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section id="introduction">
      <div id="description">
        <h2 class="i18n">もっと速く、小さく。</h2>
        <p class="i18n">MessagePackは、効率の良いバイナリ形式のオブジェクト･シリアライズ フォーマットです。JSONの置き換えとして使うことができ、様々なプログラミング言語をまたいでデータを交換することが可能です。しかも、JSONよりも速くてコンパクトです。例えば、小さな整数値はたった1バイト、短い文字列は文字列自体の長さ＋1バイトでシリアライズできます。</p>
      </div>

      <div id="next">
        <h3 class="i18n_head i18n_next">Next:</h3>
        <p class="i18n">MessagePackは <a href="#languages">50を超えるプログラミング環境</a> で使えるようになりました。</p>
      </div>
    </section>

    <!--
    <section id="usecases">
      <div id="testimonials">
        <div class="tmset">
          <div class="tm">
            <a class="tmlogo" href="http://redis.io/"><img src="images/redis.png" alt="Redis" width="150" height="50" /></a>
            <p class="tmtext">Redis scripting has support for MessagePack because it is a fast and compact serialization format with a simple to implement specification. I liked it so much that I implemented a MessagePack C extension for Lua just to include it into Redis.</p>
            <p class="tmauthor">Salvatore Sanfilippo, creator of Redis</p>
          </div>

          <div class="tm">
            <a class="tmlogo" href="http://fluentd.org/" style="height:131px;margin-top:-66px;"><img src="images/fluentd.png" alt="Fluentd" width="240" height="122" /></a>
            <p class="tmtext">Fluentd uses MessagePack for all internal data representation. It's crazy fast because of zero-copy optimization of msgpack-ruby. Now MessagePack is an essential component of Fluentd to achieve high performance and flexibility at the same time.</p>
            <p class="tmauthor">Sadayuki Furuhashi, creator of Fluentd</p>
          </div>
        </div>

        <div class="tmset">
          <div class="tm">
            <a class="tmlogo" href="http://www.treasuredata.com/"><img src="images/treasuredata.png" alt="Treasure Data" width="300" height="61" /></a>
            <p class="tmtext">Treasure Data built a multi-tenant database optimized for analytical queries using MessagePack. The schemaless database is growing by billions of records every month. We also use MessagePack as a glue between components. Actually we just wanted a fast replacement of JSON, and MessagePack is simply useful.</p>
            <p class="tmauthor">Kazuki Ohta, CTO</p>
          </div>

          <div class="tm">
            <a class="tmlogo" href="http://pinterest.com/"><img src="images/pinterest.png" alt="Pinterest" width="197" height="50" /></a>
            <p class="tmtext">MessagePack has been simply invaluable to us. We use MessagePack + Memcache to cache many of our feeds on Pinterest. These feeds are compressed and very quick to unpack thanks to MessagePack while Memcache gives us fast atomic pushes.</p>
            <p class="tmauthor">Marty Weiner, Software Engineer</p>

            <p class="tmcontribute">Also use MessagePack? <a href="https://github.com/msgpack/website">Waiting for your testimonial!</a></p>
          </div>
        </div>
      </div>

      <div id="twitter">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/search?q=msgpack+OR+MessagePack+lang%3Aen" data-widget-id="343624208380735490" width="350" height="500">Tweets about "msgpack OR MessagePack"</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      </div>
    </section>
    -->

    <section id="usage">
      <div id="languages">
        <h3 class="i18n_head">動作環境</h3>

        <ul class="qslist">
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-java',this)">Java <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-d',this)">D <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-python',this)">Python <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-erlang',this)">Erlang <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-ruby',this)">Ruby <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-scala',this)">Scala <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-haskell',this)">Haskell <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mneumann-MessagePack',this)">Ruby/C++ <span class="qs-sub">mneumann</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-aaulia-msgpack-haxe',this)">Haxe <span class="qs-sub">aaulia</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-cli',this)">C# <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-c',this)">C/C++ <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-ocaml',this)">OCaml <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-smalltalk',this)">Smalltalk <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-loteixeira-as3-msgpack',this)">ActionScript3 <span class="qs-sub">loteixeira</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack-msgpack-php',this)">PHP <span class="qs-sub">msgpack</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-fperrad-lua-MessagePack',this)">Lua <span class="qs-sub">fperrad</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mneumann-rust-msgpack',this)">Rust <span class="qs-sub">mneumann</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mururu-msgpack-elixir',this)">Elixir <span class="qs-sub">mururu</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ktakashi-r6rs-msgpack',this)">Scheme <span class="qs-sub">ktakashi</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-Lichtso-netLink',this)">C++11 <span class="qs-sub">Lichtso</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ugorji-go',this)">Go <span class="qs-sub">ugorji</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-suzukaze-mruby-msgpack',this)">mruby <span class="qs-sub">suzukaze</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-lexmag-msgpax',this)">Elixir <span class="qs-sub">lexmag</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jingweno-msgpack_rails',this)">Rails <span class="qs-sub">jingweno</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-vsergeev-u-msgpack-python',this)">Python <span class="qs-sub">vsergeev</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-kmsquire-MsgPack-jl',this)">Julia <span class="qs-sub">kmsquire</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tkob-mlmsgpack',this)">SML <span class="qs-sub">tkob</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-camgunz-cmp',this)">C <span class="qs-sub">camgunz</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-danellis-dart-msgpack',this)">Dart <span class="qs-sub">danellis</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-reeze-msgpack-hhvm',this)">HHVM <span class="qs-sub">reeze</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-Gab-km-msgpack-fsharp',this)">F# <span class="qs-sub">Gab-km</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-komamitsu-jackson-dataformat-msgpack',this)">Jackson-dataformat <span class="qs-sub">komamitsu</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-briandw-SwiftPack',this)">Swift <span class="qs-sub">briandw</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-gabriel-MPMessagePack',this)">Objective-C <span class="qs-sub">gabriel</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-mcollina-msgpack5',this)">Node <span class="qs-sub">mcollina</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-rodrigosetti-messagepack',this)">Haskell <span class="qs-sub">rodrigosetti</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ymofen-msgpack-delphi',this)">Pascal <span class="qs-sub">ymofen</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-chinawsb-qmsgpack-delphi',this)">Delphi <span class="qs-sub">chinawsb</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-romixlab-qmsgpack',this)">Qt <span class="qs-sub">romixlab</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-tinylib-msgp',this)">Go <span class="qs-sub">tinylib</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jakm-msgpack-cli',this)">Shell <span class="qs-sub">jakm</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ymofen-SimpleMsgPack-Net',this)">C# <span class="qs-sub">ymofen</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ymofen-thealchemist',this)">Elixir <span class="qs-sub">ymofen</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-msgpack4z-msgpack4z-core',this)">Scala <span class="qs-sub">msgpack4z</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jakm-txmsgpackrpc',this)">Python/Twisted <span class="qs-sub">jakm</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jonghough-msgpack-j',this)">J <span class="qs-sub">jonghough</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-a2-MessagePack-swift',this)">Swift <span class="qs-sub">a2</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-akiradeveloper-msgpack-nim',this)">Nim <span class="qs-sub">akiradeveloper</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ludocode-mpack',this)">C <span class="qs-sub">ludocode</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-3Hren-msgpack-rust',this)">Rust <span class="qs-sub">3Hren</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-jangko-msgpack4nim',this)">Nim <span class="qs-sub">jangko</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-benoist-msgpack-crystal',this)">Crystal <span class="qs-sub">benoist</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-kawanet-msgpack-lite',this)">JavaScript <span class="qs-sub">kawanet</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-ludocode-msgpack-tools',this)">UNIX Shell <span class="qs-sub">ludocode</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-rybakit-msgpack-php',this)">PHP <span class="qs-sub">rybakit</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-michael-yuji-YSMessagePack',this)">Swift <span class="qs-sub">michael-yuji</span></a></li>
          
          <li><a class="qs-a" onclick="changeQuickStart('qs-caesay-MPack',this)">C# <span class="qs-sub">caesay</span></a></li>
          
        </ul>
      </div>

      <div id="api">
        <h3 class="i18n_head">使い方</h3>
        <h4 id="language">&nbsp;</h4>
        <div id="quickstart" class="qsholder"></div>
        <p id="quickstart-guide"><a href="https://github.com/msgpack/website/blob/master/README.md#how-to-list-up-your-project-on-msgpackorg">List your implementation here!</a></p>

        
        <div id="qs-msgpack-msgpack-java" class="qs"><h4><a href="https://github.com/msgpack/msgpack-java" target="_blank">msgpack/msgpack-java <span class="qs-url">https://github.com/msgpack/msgpack-java</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-java" class="anchor" href="#messagepack-for-java" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Java</h5>

<p>QuickStart for msgpack-java is available <a href="https://github.com/msgpack/msgpack-java/wiki/QuickStart">here</a>.</p>

<h6>
<a id="user-content-how-to-install" class="anchor" href="#how-to-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to install</h6>

<p>You can install msgpack via maven:</p>

<pre><code>&lt;dependencies&gt;
  ...
  &lt;dependency&gt;
    &lt;groupId&gt;org.msgpack&lt;/groupId&gt;
    &lt;artifactId&gt;msgpack&lt;/artifactId&gt;
    &lt;version&gt;${msgpack.version}&lt;/version&gt;
  &lt;/dependency&gt;
  ...
&lt;/dependencies&gt;
</code></pre>

<h6>
<a id="user-content-simple-serializationdeserializationduck-typing-using-value" class="anchor" href="#simple-serializationdeserializationduck-typing-using-value" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple Serialization/Deserialization/Duck Typing using Value</h6>

<pre><code>// Create serialize objects.
List&lt;String&gt; src = new ArrayList&lt;String&gt;();
src.add("msgpack");
src.add("kumofs");
src.add("viver");

MessagePack msgpack = new MessagePack();
// Serialize
byte[] raw = msgpack.write(src);

// Deserialize directly using a template
List&lt;String&gt; dst1 = msgpack.read(raw, Templates.tList(Templates.TString));
System.out.println(dst1.get(0));
System.out.println(dst1.get(1));
System.out.println(dst1.get(2));

// Or, Deserialze to Value then convert type.
Value dynamic = msgpack.read(raw);
List&lt;String&gt; dst2 = new Converter(dynamic)
    .read(Templates.tList(Templates.TString));
System.out.println(dst2.get(0));
System.out.println(dst2.get(1));
System.out.println(dst2.get(2));
</code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-d" class="qs"><h4><a href="https://github.com/msgpack/msgpack-d" target="_blank">msgpack/msgpack-d <span class="qs-url">https://github.com/msgpack/msgpack-d</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><p><a href="https://travis-ci.org/msgpack/msgpack-d"><img src="https://camo.githubusercontent.com/b0b60bcdcaa2322f4c9d394e042ddcb2863dd37b/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d642e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-d.png" style="max-width:100%;"></a></p>

<h5>
<a id="user-content-messagepack-for-d" class="anchor" href="#messagepack-for-d" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for D</h5>

<p>MessagePack is a binary-based JSON-like serialization library.</p>

<p>MessagePack for D is a pure D implementation of MessagePack.</p>

<h5>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h5>

<ul>
<li>Small size and High performance</li>
<li>Zero copy serialization / deserialization</li>
<li>Stream deserializer / Direct-conversion deserializer</li>
<li>Supports D features (Ranges, Tuples, real type)</li>
</ul>

<p>Note: The <code>real</code> type is only supported in D.
Don't use the <code>real</code> type when communicating with other programming languages.
Note that <code>Unpacker</code> will raise an exception if a loss of precision occurs.</p>

<h6>
<a id="user-content-current-limitations" class="anchor" href="#current-limitations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Current Limitations</h6>

<ul>
<li>No circular references support</li>
<li>if you use the LDC compiler you need at least version 0.15.2 beta2</li>
</ul>

<h5>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h5>

<p>msgpack-d is implemented as a single module. Either copy <code>src/msgpack.d</code> to your project
or use dub to add it as a dependency:</p>

<div class="highlight highlight-source-shell"><pre>% dub install msgpack-d</pre></div>

<h5>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h5>

<p>Example code can be found in the <code>example</code> directory.</p>

<p>The documentation can be found <a href="http://msgpack.github.io/msgpack-d/">here</a></p>

<h6>
<a id="user-content-pack--unpack" class="anchor" href="#pack--unpack" aria-hidden="true"><span class="octicon octicon-link"></span></a>pack / unpack</h6>

<p>msgpack-d is very simple to use. Use <code>pack</code> for serialization, and <code>unpack</code> for deserialization:</p>

<div class="highlight highlight-source-d"><pre><span class="pl-k">import</span> <span class="pl-c1">std.file</span>;
<span class="pl-k">import</span> msgpack;

<span class="pl-k">struct</span> <span class="pl-en">S</span> { <span class="pl-k">int</span> x; <span class="pl-k">float</span> y; <span class="pl-c1">string</span> z; }

<span class="pl-k">void</span> <span class="pl-en">main</span>()
{
    S input = S(<span class="pl-c1">10</span>, <span class="pl-c1">25.5</span>, <span class="pl-s"><span class="pl-pds">"</span>message<span class="pl-pds">"</span></span>);

    <span class="pl-c">// serialize data</span>
    <span class="pl-k">ubyte</span>[] inData = pack(input);

    <span class="pl-c">// write data to a file</span>
    write(<span class="pl-s"><span class="pl-pds">"</span>file.dat<span class="pl-pds">"</span></span>, inData);

    <span class="pl-c">// read data from a file</span>
    <span class="pl-k">ubyte</span>[] outData = <span class="pl-k">cast</span>(<span class="pl-k">ubyte</span>[])read(<span class="pl-s"><span class="pl-pds">"</span>file.dat<span class="pl-pds">"</span></span>);

    <span class="pl-c">// unserialize the data</span>
    S target = outData.unpack<span class="pl-k">!</span>S();

    <span class="pl-c">// verify data is the same</span>
    <span class="pl-k">assert</span>(target.x <span class="pl-k">==</span> input.x);
    <span class="pl-k">assert</span>(target.y <span class="pl-k">==</span> input.y);
    <span class="pl-k">assert</span>(target.z <span class="pl-k">==</span> input.z);
}</pre></div>

<h7>
<a id="user-content-feature-skip-serializationdeserialization-of-a-specific-field" class="anchor" href="#feature-skip-serializationdeserialization-of-a-specific-field" aria-hidden="true"><span class="octicon octicon-link"></span></a>Feature: Skip serialization/deserialization of a specific field.</h7>

<p>Use the <code>@nonPacked</code> attribute:</p>

<div class="highlight highlight-source-d"><pre><span class="pl-k">struct</span> <span class="pl-en">User</span>
{
    <span class="pl-c1">string</span> name;
    @nonPacked <span class="pl-k">int</span> level;  <span class="pl-c">// pack / unpack will ignore the 'level' field</span>
}</pre></div>

<h7>
<a id="user-content-feature-use-your-own-serializationdeserialization-routines-for-custom-class-and-struct-types" class="anchor" href="#feature-use-your-own-serializationdeserialization-routines-for-custom-class-and-struct-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Feature: Use your own serialization/deserialization routines for custom class and struct types.</h7>

<p>msgpack-d provides the functions <code>registerPackHandler</code> / <code>registerUnpackHandler</code> to allow you
to use custom routines during the serialization or deserialization of user-defined class and struct types.
This feature is especially useful when serializing a derived class object when that object is statically
typed as a base class object.</p>

<p>For example:</p>

<div class="highlight highlight-source-d"><pre><span class="pl-k">class</span> <span class="pl-en">Document</span> { }
<span class="pl-k">class</span> <span class="pl-en">XmlDocument</span> : <span class="pl-e">Document</span>
{
    <span class="pl-en">this</span>() { }
    <span class="pl-en">this</span>(<span class="pl-c1">string</span> name) { <span class="pl-v">this</span>.name = name; }
    <span class="pl-c1">string</span> name;
}

<span class="pl-k">void</span> <span class="pl-en">xmlPackHandler</span>(<span class="pl-k">ref</span> Packer p, <span class="pl-k">ref</span> XmlDocument xml)
{
    p.pack(xml.name);
}

<span class="pl-k">void</span> <span class="pl-en">xmlUnpackHandler</span>(<span class="pl-k">ref</span> Unpacker u, <span class="pl-k">ref</span> XmlDocument xml)
{
    u.unpack(xml.name);
}

<span class="pl-k">void</span> <span class="pl-en">main</span>()
{
    <span class="pl-c">/// Register the 'xmlPackHandler' and 'xmlUnpackHandler' routines for</span>
    <span class="pl-c">/// XmlDocument object instances.</span>
    registerPackHandler<span class="pl-k">!</span>(XmlDocument, xmlPackHandler);
    registerUnpackHandler<span class="pl-k">!</span>(XmlDocument, xmlUnpackHandler);

    <span class="pl-c">/// Now we can serialize/deserialize XmlDocument object instances via a</span>
    <span class="pl-c">/// base class reference.</span>
    <span class="pl-c1">Document</span> doc = <span class="pl-k">new</span> XmlDocument(<span class="pl-s"><span class="pl-pds">"</span>test.xml<span class="pl-pds">"</span></span>);
    <span class="pl-k">auto</span> data = pack(doc);
    XmlDocument xml = unpack<span class="pl-k">!</span>XmlDocument(data);
    <span class="pl-k">assert</span>(xml.name <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>test.xml<span class="pl-pds">"</span></span>);  <span class="pl-c">// xml.name is "test.xml"</span>
}</pre></div>

<h6>
<a id="user-content-the-packerimpl--unpacker--streamingunpacker-types" class="anchor" href="#the-packerimpl--unpacker--streamingunpacker-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>The PackerImpl / Unpacker / StreamingUnpacker types</h6>

<p>These types are used by the <code>pack</code> and <code>unpack</code> functions.</p>

<p>See the documentation of <a href="http://msgpack.github.io/msgpack-d/#PackerImpl">PackerImpl</a>, <a href="http://msgpack.github.io/msgpack-d/#Unpacker">Unpacker</a> and <a href="http://msgpack.github.io/msgpack-d/#StreamingUnpacker">StreamingUnpacker</a> for more details.</p>

<h5>
<a id="user-content-links" class="anchor" href="#links" aria-hidden="true"><span class="octicon octicon-link"></span></a>Links</h5>

<ul>
<li>
<p><a href="http://msgpack.org/">The MessagePack Project</a></p>

<p>The official MessagePack protocol website.</p>
</li>
<li>
<p><a href="https://github.com/msgpack/msgpack-d/issues">msgpack-d's issue tracker</a></p>

<p>Use this issue tracker to review and file bugs in msgpack-d.</p>
</li>
<li>
<p><a href="http://github.com/msgpack/">MessagePack's Github</a></p>

<p>Other language bindings and implementations of the msgpack protocol can be found here.</p>
</li>
</ul>

<h5>
<a id="user-content-copyright" class="anchor" href="#copyright" aria-hidden="true"><span class="octicon octicon-link"></span></a>Copyright</h5>

<pre><code>Copyright (c) 2010- Masahiro Nakagawa
</code></pre>

<h5>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h5>

<p>Distributed under the <a href="http://www.boost.org/users/license.html">Boost Software License, Version 1.0</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-python" class="qs"><h4><a href="https://github.com/msgpack/msgpack-python" target="_blank">msgpack/msgpack-python <span class="qs-url">https://github.com/msgpack/msgpack-python</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-python" class="anchor" href="#messagepack-for-python" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Python</h5>
<table frame="void" rules="none">


<tbody valign="top">
<tr>
<th>Author:</th>
<td>INADA Naoki</td>
</tr>
<tr>
<th>Version:</th>
<td>0.4.6</td>
</tr>
<tr>
<th>Date:</th>
<td>2015-03-13</td>
</tr>
</tbody>
</table>
<a href="https://travis-ci.org/#!/msgpack/msgpack-python"><img alt="https://secure.travis-ci.org/msgpack/msgpack-python.png" src="https://camo.githubusercontent.com/ac7548dfc8653b0cb85e8e70fede71b1fb12536b/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d707974686f6e2e706e67" data-canonical-src="https://secure.travis-ci.org/msgpack/msgpack-python.png" style="max-width:100%;"></a>
<a name="user-content-what-s-this"></a>
<h6>
<a id="user-content-whats-this" class="anchor" href="#whats-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>What's this</h6>
<p><a href="http://msgpack.org/">MessagePack</a> is a fast, compact binary serialization format, suitable for
similar data to JSON. This package provides CPython bindings for reading and
writing MessagePack data.</p>
<a name="user-content-install"></a>
<h6>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h6>
<pre>$ pip install msgpack-python
</pre>
<a name="user-content-pypy"></a>
<h7>
<a id="user-content-pypy" class="anchor" href="#pypy" aria-hidden="true"><span class="octicon octicon-link"></span></a>PyPy</h7>
<p>msgpack-python provides pure python implementation.  PyPy can use this.</p>
<a name="user-content-windows"></a>
<h7>
<a id="user-content-windows" class="anchor" href="#windows" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows</h7>
<p>When you can't use binary distribution, you need to install Visual Studio
or Windows SDK on Windows.
Without extension, using pure python implementation on CPython runs slowly.</p>
<p>For Python 2.7, <a href="https://www.microsoft.com/en-us/download/details.aspx?id=44266">Microsoft Visual C++ Compiler for Python 2.7</a>
is recommended solution.</p>
<p>For Python 3.5, <a href="https://www.visualstudio.com/en-us/products/vs-2015-product-editions.aspx">Microsoft Visual Studio 2015</a>
Community Edition or Express Edition can be used to build extension module.</p>
<a name="user-content-how-to-use"></a>
<h6>
<a id="user-content-how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use</h6>
<a name="user-content-one-shot-pack-unpack"></a>
<h7>
<a id="user-content-one-shot-pack--unpack" class="anchor" href="#one-shot-pack--unpack" aria-hidden="true"><span class="octicon octicon-link"></span></a>One-shot pack &amp; unpack</h7>
<p>Use <code>packb</code> for packing and <code>unpackb</code> for unpacking.
msgpack provides <code>dumps</code> and <code>loads</code> as alias for compatibility with
<code>json</code> and <code>pickle</code>.</p>
<p><code>pack</code> and <code>dump</code> packs to file-like object.
<code>unpack</code> and <code>load</code> unpacks from file-like object.</p>
<pre lang="pycon">&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; msgpack.packb([1, 2, 3])
'\x93\x01\x02\x03'
&gt;&gt;&gt; msgpack.unpackb(_)
[1, 2, 3]
</pre>
<p><code>unpack</code> unpacks msgpack's array to Python's list, but can unpack to tuple:</p>
<pre lang="pycon">&gt;&gt;&gt; msgpack.unpackb(b'\x93\x01\x02\x03', use_list=False)
(1, 2, 3)
</pre>
<p>You should always pass the <code>use_list</code> keyword argument. See performance issues relating to <a href="#use-list-option">use_list option</a> below.</p>
<p>Read the docstring for other options.</p>
<a name="user-content-streaming-unpacking"></a>
<h7>
<a id="user-content-streaming-unpacking" class="anchor" href="#streaming-unpacking" aria-hidden="true"><span class="octicon octicon-link"></span></a>Streaming unpacking</h7>
<p><code>Unpacker</code> is a "streaming unpacker". It unpacks multiple objects from one
stream (or from bytes provided through its <code>feed</code> method).</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> msgpack
<span class="pl-k">from</span> io <span class="pl-k">import</span> BytesIO

buf <span class="pl-k">=</span> BytesIO()
<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">100</span>):
   buf.write(msgpack.packb(<span class="pl-c1">range</span>(i)))

buf.seek(<span class="pl-c1">0</span>)

unpacker <span class="pl-k">=</span> msgpack.Unpacker(buf)
<span class="pl-k">for</span> unpacked <span class="pl-k">in</span> unpacker:
    <span class="pl-k">print</span> unpacked</pre></div>
<a name="user-content-packing-unpacking-of-custom-data-type"></a>
<h7>
<a id="user-content-packingunpacking-of-custom-data-type" class="anchor" href="#packingunpacking-of-custom-data-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Packing/unpacking of custom data type</h7>
<p>It is also possible to pack/unpack custom data types. Here is an example for
<code>datetime.datetime</code>.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> datetime

<span class="pl-k">import</span> msgpack

useful_dict <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
    <span class="pl-s"><span class="pl-pds">"</span>created<span class="pl-pds">"</span></span>: datetime.datetime.now(),
}

<span class="pl-k">def</span> <span class="pl-en">decode_datetime</span>(<span class="pl-smi">obj</span>):
    <span class="pl-k">if</span> b<span class="pl-s"><span class="pl-pds">'</span>__datetime__<span class="pl-pds">'</span></span> <span class="pl-k">in</span> obj:
        obj <span class="pl-k">=</span> datetime.datetime.strptime(obj[<span class="pl-s"><span class="pl-pds">"</span>as_str<span class="pl-pds">"</span></span>], <span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">%Y%m%d</span>T<span class="pl-c1">%H</span>:<span class="pl-c1">%M</span>:<span class="pl-c1">%S</span>.<span class="pl-c1">%f</span><span class="pl-pds">"</span></span>)
    <span class="pl-k">return</span> obj

<span class="pl-k">def</span> <span class="pl-en">encode_datetime</span>(<span class="pl-smi">obj</span>):
    <span class="pl-k">if</span> <span class="pl-c1">isinstance</span>(obj, datetime.datetime):
        <span class="pl-k">return</span> {<span class="pl-s"><span class="pl-pds">'</span>__datetime__<span class="pl-pds">'</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-pds">'</span>as_str<span class="pl-pds">'</span></span>: obj.strftime(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">%Y%m%d</span>T<span class="pl-c1">%H</span>:<span class="pl-c1">%M</span>:<span class="pl-c1">%S</span>.<span class="pl-c1">%f</span><span class="pl-pds">"</span></span>)}
    <span class="pl-k">return</span> obj


packed_dict <span class="pl-k">=</span> msgpack.packb(useful_dict, <span class="pl-smi">default</span><span class="pl-k">=</span>encode_datetime)
this_dict_again <span class="pl-k">=</span> msgpack.unpackb(packed_dict, <span class="pl-smi">object_hook</span><span class="pl-k">=</span>decode_datetime)</pre></div>
<p><code>Unpacker</code>'s <code>object_hook</code> callback receives a dict; the
<code>object_pairs_hook</code> callback may instead be used to receive a list of
key-value pairs.</p>
<a name="user-content-extended-types"></a>
<h7>
<a id="user-content-extended-types" class="anchor" href="#extended-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extended types</h7>
<p>It is also possible to pack/unpack custom data types using the <strong>ext</strong> type.</p>
<pre lang="pycon">&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; import array
&gt;&gt;&gt; def default(obj):
...     if isinstance(obj, array.array) and obj.typecode == 'd':
...         return msgpack.ExtType(42, obj.tostring())
...     raise TypeError("Unknown type: %r" % (obj,))
...
&gt;&gt;&gt; def ext_hook(code, data):
...     if code == 42:
...         a = array.array('d')
...         a.fromstring(data)
...         return a
...     return ExtType(code, data)
...
&gt;&gt;&gt; data = array.array('d', [1.2, 3.4])
&gt;&gt;&gt; packed = msgpack.packb(data, default=default)
&gt;&gt;&gt; unpacked = msgpack.unpackb(packed, ext_hook=ext_hook)
&gt;&gt;&gt; data == unpacked
True
</pre>
<a name="user-content-advanced-unpacking-control"></a>
<h7>
<a id="user-content-advanced-unpacking-control" class="anchor" href="#advanced-unpacking-control" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced unpacking control</h7>
<p>As an alternative to iteration, <code>Unpacker</code> objects provide <code>unpack</code>,
<code>skip</code>, <code>read_array_header</code> and <code>read_map_header</code> methods. The former two
read an entire message from the stream, respectively deserialising and returning
the result, or ignoring it. The latter two methods return the number of elements
in the upcoming container, so that each element in an array, or key-value pair
in a map, can be unpacked or skipped individually.</p>
<p>Each of these methods may optionally write the packed data it reads to a
callback function:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> io <span class="pl-k">import</span> BytesIO

<span class="pl-k">def</span> <span class="pl-en">distribute</span>(<span class="pl-smi">unpacker</span>, <span class="pl-smi">get_worker</span>):
    nelems <span class="pl-k">=</span> unpacker.read_map_header()
    <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(nelems):
        <span class="pl-c"># Select a worker for the given key</span>
        key <span class="pl-k">=</span> unpacker.unpack()
        worker <span class="pl-k">=</span> get_worker(key)

        <span class="pl-c"># Send the value as a packed message to worker</span>
        bytestream <span class="pl-k">=</span> BytesIO()
        unpacker.skip(bytestream.write)
        worker.send(bytestream.getvalue())</pre></div>
<a name="user-content-notes"></a>
<h6>
<a id="user-content-notes" class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes</h6>
<a name="user-content-string-and-binary-type"></a>
<h7>
<a id="user-content-string-and-binary-type" class="anchor" href="#string-and-binary-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>string and binary type</h7>
<p>In old days, msgpack doesn't distinguish string and binary types like Python 1.
The type for represent string and binary types is named <strong>raw</strong>.</p>
<p>msgpack can distinguish string and binary type for now.  But it is not like Python 2.
Python 2 added unicode string.  But msgpack renamed <strong>raw</strong> to <strong>str</strong> and added <strong>bin</strong> type.
It is because keep compatibility with data created by old libs. <strong>raw</strong> was used for text more than binary.</p>
<p>Currently, while msgpack-python supports new <strong>bin</strong> type, default setting doesn't use it and
decodes <strong>raw</strong> as bytes instead of unicode (str in Python 3).</p>
<p>You can change this by using use_bin_type=True option in Packer and encoding="utf-8" option in Unpacker.</p>
<pre lang="pycon">&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; packed = msgpack.packb([b'spam', u'egg'], use_bin_type=True)
&gt;&gt;&gt; msgpack.unpackb(packed, encoding='utf-8')
['spam', u'egg']
</pre>
<a name="user-content-ext-type"></a>
<h7>
<a id="user-content-ext-type" class="anchor" href="#ext-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>ext type</h7>
<p>To use <strong>ext</strong> type, pass <code>msgpack.ExtType</code> object to packer.</p>
<pre lang="pycon">&gt;&gt;&gt; import msgpack
&gt;&gt;&gt; packed = msgpack.packb(msgpack.ExtType(42, b'xyzzy'))
&gt;&gt;&gt; msgpack.unpackb(packed)
ExtType(code=42, data='xyzzy')
</pre>
<p>You can use it with <code>default</code> and <code>ext_hook</code>. See below.</p>
<a name="user-content-note-for-msgpack-python-0-2-x-users"></a>
<h7>
<a id="user-content-note-for-msgpack-python-02x-users" class="anchor" href="#note-for-msgpack-python-02x-users" aria-hidden="true"><span class="octicon octicon-link"></span></a>Note for msgpack-python 0.2.x users</h7>
<p>The msgpack-python 0.3 have some incompatible changes.</p>
<p>The default value of <code>use_list</code> keyword argument is <code>True</code> from 0.3.
You should pass the argument explicitly for backward compatibility.</p>
<p>Unpacker.unpack() and some unpack methods now raises OutOfData
instead of StopIteration.
StopIteration is used for iterator protocol only.</p>
<a name="user-content-note-about-performance"></a>
<h6>
<a id="user-content-note-about-performance" class="anchor" href="#note-about-performance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Note about performance</h6>
<a name="user-content-gc"></a>
<h7>
<a id="user-content-gc" class="anchor" href="#gc" aria-hidden="true"><span class="octicon octicon-link"></span></a>GC</h7>
<p>CPython's GC starts when growing allocated object.
This means unpacking may cause useless GC.
You can use <code>gc.disable()</code> when unpacking large message.</p>
<a name="user-content-use-list-option"></a>
<h7>
<a id="user-content-use_list-option" class="anchor" href="#use_list-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>use_list option</h7>
<p>List is the default sequence type of Python.
But tuple is lighter than list.
You can use <code>use_list=False</code> while unpacking when performance is important.</p>
<p>Python's dict can't use list as key and MessagePack allows array for key of mapping.
<code>use_list=False</code> allows unpacking such message.
Another way to unpacking such object is using <code>object_pairs_hook</code>.</p>
<a name="user-content-development"></a>
<h6>
<a id="user-content-development" class="anchor" href="#development" aria-hidden="true"><span class="octicon octicon-link"></span></a>Development</h6>
<h6 id="user-content-test">
<a id="user-content-test" class="anchor" href="#test" aria-hidden="true"><span class="octicon octicon-link"></span></a>Test</h6>
<p>MessagePack uses pytest for testing.
Run test with following command:</p>
<blockquote>
$ py.test</blockquote>

</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-erlang" class="qs"><h4><a href="https://github.com/msgpack/msgpack-erlang" target="_blank">msgpack/msgpack-erlang <span class="qs-url">https://github.com/msgpack/msgpack-erlang</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-erlang" class="anchor" href="#messagepack-erlang" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack Erlang</h5>

<p><a href="https://camo.githubusercontent.com/9358d19573c928c5d79db88cd634c79abd46ff2c/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d65726c616e672e706e67" target="_blank"><img src="https://camo.githubusercontent.com/9358d19573c928c5d79db88cd634c79abd46ff2c/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d65726c616e672e706e67" alt="Travis" data-canonical-src="https://secure.travis-ci.org/msgpack/msgpack-erlang.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/439f5da74417a319e6daddaaa3455f9e9f03bced/68747470733a2f2f64726f6e652e696f2f6769746875622e636f6d2f6d73677061636b2f6d73677061636b2d65726c616e672f7374617475732e706e67" target="_blank"><img src="https://camo.githubusercontent.com/439f5da74417a319e6daddaaa3455f9e9f03bced/68747470733a2f2f64726f6e652e696f2f6769746875622e636f6d2f6d73677061636b2f6d73677061636b2d65726c616e672f7374617475732e706e67" alt="Drone.io" data-canonical-src="https://drone.io/github.com/msgpack/msgpack-erlang/status.png" style="max-width:100%;"></a></p>

<h6>
<a id="user-content-prequisites-for-runtime" class="anchor" href="#prequisites-for-runtime" aria-hidden="true"><span class="octicon octicon-link"></span></a>prequisites for runtime</h6>

<p><a href="http://erlang.org/">Erlang/OTP</a>, &gt;= 17.0
Also based on <a href="https://github.com/msgpack/msgpack/blob/232a0d14c6057000cc4a478f0dfbb5942ac54e9e/spec.md">the new msgpack spec 232a0d</a>.</p>

<h6>
<a id="user-content-edit-rebarconfig-to-use-in-your-application" class="anchor" href="#edit-rebarconfig-to-use-in-your-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>edit rebar.config to use in your application</h6>

<div class="highlight highlight-source-erlang"><pre>{<span class="pl-c1">deps</span>, [
  {<span class="pl-c1">msgpack</span>, <span class="pl-s"><span class="pl-pds">"</span>.*<span class="pl-pds">"</span></span>,
    {<span class="pl-c1">git</span>, <span class="pl-s"><span class="pl-pds">"</span>git://github.com/msgpack/msgpack-erlang.git<span class="pl-pds">"</span></span>, {<span class="pl-c1">branch</span>, <span class="pl-s"><span class="pl-pds">"</span>master<span class="pl-pds">"</span></span>}}}
]}.</pre></div>

<h6>
<a id="user-content-simple-deserialization" class="anchor" href="#simple-deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple deserialization</h6>

<div class="highlight highlight-source-erlang"><pre><span class="pl-smi">Ham</span> <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(<span class="pl-smi">Spam</span>),
{<span class="pl-c1">ok</span>, <span class="pl-smi">Spam</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack</span>(<span class="pl-smi">Ham</span>).</pre></div>

<h6>
<a id="user-content-stream-deserialization" class="anchor" href="#stream-deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stream deserialization</h6>

<div class="highlight highlight-source-erlang"><pre>{<span class="pl-smi">Term0</span>, <span class="pl-smi">Rest0</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack_stream</span>(<span class="pl-smi">Binary</span>),
{<span class="pl-smi">Term1</span>, <span class="pl-smi">Rest1</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack_stream</span>(<span class="pl-smi">Rest0</span>),
...</pre></div>

<h6>
<a id="user-content-string-type" class="anchor" href="#string-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>String type</h6>

<p>Now this supports string type!</p>

<div class="highlight highlight-source-erlang"><pre><span class="pl-smi">Opt</span> <span class="pl-k">=</span> [{<span class="pl-c1">enable_str</span>, <span class="pl-c1">true</span>}]
{<span class="pl-c1">ok</span>, <span class="pl-s"><span class="pl-pds">"</span>埼玉<span class="pl-pds">"</span></span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack</span>(<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(<span class="pl-s"><span class="pl-pds">"</span>埼玉<span class="pl-pds">"</span></span>, <span class="pl-smi">Opt</span>), <span class="pl-smi">Opt</span>).
 <span class="pl-k">=&gt;</span> {<span class="pl-c1">ok</span>,[<span class="pl-c1">22524</span>,<span class="pl-c1">29577</span>]}</pre></div>

<p>There are several options for <code>msgpack:pack/2</code> and <code>msgpack:unpack/2</code> .
See <code>msgpack:options()</code> in <code>msgpack.hrl</code>.</p>

<h6>
<a id="user-content-map-style" class="anchor" href="#map-style" aria-hidden="true"><span class="octicon octicon-link"></span></a>Map Style</h6>

<p>Since Erlang/OTP 17.0</p>

<div class="highlight highlight-source-erlang"><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(#{ &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt; <span class="pl-k">=&gt;</span> &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt; }, [{<span class="pl-c1">format</span>, <span class="pl-c1">map</span>}]).</pre></div>

<p>Or use old jiffy/jsx style</p>

<div class="highlight highlight-source-erlang"><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>({[{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}]}, [{<span class="pl-c1">format</span>, <span class="pl-c1">jiffy</span>}]),
<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>([{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}], [{<span class="pl-c1">format</span>, <span class="pl-c1">jsx</span>}]).</pre></div>

<h6>
<a id="user-content-ext-type" class="anchor" href="#ext-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ext type</h6>

<p>Now msgpack-erlang supports ext type. Now you can serialize everything
with your original (de)serializer. That will enable us to handle
erlang- native types like <code>pid()</code>, <code>ref()</code> contained in <code>tuple()</code>. See
<code>test/msgpack_ext_example_tests.erl</code> for example code.</p>

<div class="highlight highlight-source-erlang"><pre><span class="pl-smi">Packer</span> <span class="pl-k">=</span> <span class="pl-k">fun</span>({<span class="pl-c1">ref</span>, <span class="pl-smi">Ref</span>}, <span class="pl-smi">Opt</span>) <span class="pl-k">when</span> <span class="pl-en">is_reference</span>(<span class="pl-smi">Ref</span>) -&gt; {<span class="pl-c1">ok</span>, {<span class="pl-c1">12</span>, <span class="pl-en">term_to_binary</span>(<span class="pl-smi">Ref</span>)}} <span class="pl-k">end</span>,
<span class="pl-smi">Unpacker</span> <span class="pl-k">=</span> <span class="pl-k">fun</span>(<span class="pl-c1">12</span>, <span class="pl-smi">Bin</span>) -&gt; {<span class="pl-c1">ok</span>, {<span class="pl-c1">ref</span>, <span class="pl-en">binary_to_term</span>(<span class="pl-smi">Bin</span>)}} <span class="pl-k">end</span>,
<span class="pl-smi">Ref</span> <span class="pl-k">=</span> <span class="pl-en">make_ref</span>(),
<span class="pl-smi">Opt</span> <span class="pl-k">=</span> [{<span class="pl-c1">ext</span>,{<span class="pl-smi">Packer</span>,<span class="pl-smi">Unpacker</span>}}],
{<span class="pl-c1">ok</span>, {<span class="pl-c1">ref</span>, <span class="pl-smi">Ref</span>}} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack</span>(<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>({<span class="pl-c1">ref</span>, <span class="pl-smi">Ref</span>}, <span class="pl-smi">Opt</span>), <span class="pl-smi">Opt</span>).</pre></div>

<p>This is still experimental feature, so I'm waiting for your feedback.</p>

<h6>
<a id="user-content-compatibility-mode" class="anchor" href="#compatibility-mode" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compatibility mode</h6>

<p>To use as same with <a href="https://github.com/msgpack/msgpack/blob/master/spec-old.md">old spec</a>:</p>

<div class="highlight highlight-source-erlang"><pre><span class="pl-smi">OldHam</span> <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(<span class="pl-smi">Spam</span>, [{<span class="pl-c1">enable_str</span>,<span class="pl-c1">false</span>}]),
{<span class="pl-c1">ok</span>, <span class="pl-smi">Spam</span>} <span class="pl-k">=</span> <span class="pl-en">msgpack</span>:<span class="pl-en">unpack</span>(<span class="pl-smi">OldHam</span>, [{<span class="pl-c1">enable_str</span>,<span class="pl-c1">false</span>}]).</pre></div>

<p>Since 0.2.3 now it's <strong>false by default</strong>.</p>

<h6>
<a id="user-content-further-tests" class="anchor" href="#further-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further tests</h6>

<p>See <a href="http://github.com/kuenishi/msgpack-erlang-tests">msgpack-erlang-tests</a> for further tests</p>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>Apache License 2.0</p>

<h5>
<a id="user-content-release-notes" class="anchor" href="#release-notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Release Notes</h5>

<h6>
<a id="user-content-040" class="anchor" href="#040" aria-hidden="true"><span class="octicon octicon-link"></span></a>0.4.0</h6>

<ul>
<li>Deprecate <code>nil</code>
</li>
<li>Moved to rebar3</li>
<li>Promote default map unpacker as default format when OTP is &gt;= 17</li>
<li>Added QuickCheck tests</li>
<li>Since this version OTP older than R16B03-1 are no more supported</li>
</ul>

<h6>
<a id="user-content-035--034" class="anchor" href="#035--034" aria-hidden="true"><span class="octicon octicon-link"></span></a>0.3.5 / 0.3.4</h6>

<ul>
<li>0.3 series will be the last versions that supports R16B or older
versions of OTP.</li>
<li>OTP 18.0 support</li>
<li>Promote default map unpacker as default format when OTP is &gt;= 18</li>
</ul>

<h6>
<a id="user-content-033" class="anchor" href="#033" aria-hidden="true"><span class="octicon octicon-link"></span></a>0.3.3</h6>

<ul>
<li>Add OTP 17 series to Travis-CI tests</li>
<li>Fix wrong numbering for ext types</li>
<li>Allow packing maps even when {format,map} is not set</li>
<li>Fix Dialyzer invalid contract warning</li>
<li>Proper use of null for jiffy-style encoding/decoding</li>
</ul>

<h6>
<a id="user-content-032" class="anchor" href="#032" aria-hidden="true"><span class="octicon octicon-link"></span></a>0.3.2</h6>

<ul>
<li>set back default style as jiffy</li>
<li>fix bugs around nil/null handling</li>
</ul>

<h6>
<a id="user-content-030" class="anchor" href="#030" aria-hidden="true"><span class="octicon octicon-link"></span></a>0.3.0</h6>

<ul>
<li>supports map new in 17.0</li>
<li>jiffy-style maps will be deprecated in near future</li>
<li>set default style as map</li>
</ul>

<h6>
<a id="user-content-028" class="anchor" href="#028" aria-hidden="true"><span class="octicon octicon-link"></span></a>0.2.8</h6>

<p>0.2 series works with OTP 17.0, R16, R15, and with MessagePack's new
and old format. But does not support <code>map</code> type introduced in
OTP 17.0.</p>

<p>It also supports JSX-compatible mode.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-ruby" class="qs"><h4><a href="https://github.com/msgpack/msgpack-ruby" target="_blank">msgpack/msgpack-ruby <span class="qs-url">https://github.com/msgpack/msgpack-ruby</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-ruby" class="anchor" href="#messagepack-for-ruby" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Ruby</h5>

<pre><code>require 'msgpack'
msg = [1,2,3].to_msgpack  #=&gt; "\x93\x01\x02\x03"
MessagePack.unpack(msg)   #=&gt; [1,2,3]
</code></pre>

<h6>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h6>

<pre><code>gem install msgpack
</code></pre>

<h6>
<a id="user-content-use-cases" class="anchor" href="#use-cases" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use cases</h6>

<ul>
<li>Create REST API returing MessagePack using Rails + <a href="https://github.com/nesquena/rabl">RABL</a>
</li>
<li>Store objects efficiently in memcached or Redis</li>
<li>Upload data in efficient format from mobile devices. See also MessagePack for <a href="https://github.com/msgpack/msgpack-objectivec">Objective-C</a> and <a href="https://github.com/msgpack/msgpack-java">Java</a>
</li>
</ul>

<h6>
<a id="user-content-links" class="anchor" href="#links" aria-hidden="true"><span class="octicon octicon-link"></span></a>Links</h6>

<ul>
<li><a href="https://github.com/msgpack/msgpack-ruby">Github</a></li>
<li><a href="http://ruby.msgpack.org/">API document</a></li>
</ul>

<h6>
<a id="user-content-streaming-api" class="anchor" href="#streaming-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Streaming API</h6>

<pre><code># serialize a 2-element array [e1, e2]
pk = MessagePack::Packer.new(io)
pk.write_array_header(2).write(e1).write(e2).flush
</code></pre>

<pre><code># deserialize objects from an IO
u = MessagePack::Unpacker.new(io)
u.each { |obj| ... }
</code></pre>

<pre><code># event-driven deserialization
def on_read(data)
  @u ||= MessagePack::Unpacker.new
  @u.feed_each(data) { |obj| ... }
end
</code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-scala" class="qs"><h4><a href="https://github.com/msgpack/msgpack-scala" target="_blank">msgpack/msgpack-scala <span class="qs-url">https://github.com/msgpack/msgpack-scala</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-scala" class="anchor" href="#messagepack-for-scala" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Scala</h5>

<p><a href="https://travis-ci.org/msgpack/msgpack-scala"><img src="https://camo.githubusercontent.com/e0d1591ccd9b26e78281681c4d0272ceba6abb93/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d7363616c612e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-scala.svg?branch=master" style="max-width:100%;"></a></p>

<p>An implementation of <a href="http://msgpack.org/">MessagePack</a> for Scala.</p>

<h6>
<a id="user-content-requirement" class="anchor" href="#requirement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirement</h6>

<ul>
<li>sbt 0.13.5 or later</li>
</ul>

<h6>
<a id="user-content-sbt" class="anchor" href="#sbt" aria-hidden="true"><span class="octicon octicon-link"></span></a>SBT</h6>

<p>Add dependency.</p>

<pre><code>libraryDependencies += "org.msgpack" %% "msgpack-scala" % "0.6.11"
</code></pre>

<h6>
<a id="user-content-for-developer" class="anchor" href="#for-developer" aria-hidden="true"><span class="octicon octicon-link"></span></a>For developer</h6>

<h7>
<a id="user-content-make-intellij-project" class="anchor" href="#make-intellij-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Make intellij project</h7>

<h7>
<a id="user-content--intellij-idea-13" class="anchor" href="#-intellij-idea-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>&gt;= IntelliJ IDEA 13</h7>

<p>You can import sbt file.</p>

<h7>
<a id="user-content--intellij-idea-13-1" class="anchor" href="#-intellij-idea-13-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>&lt; IntelliJ IDEA 13</h7>

<p>Please type the following command.Then intellij project will be generated.</p>

<pre><code>$ sbt gen-idea
</code></pre>

<h5>
<a id="user-content-quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Start</h5>

<h6>
<a id="user-content-serializedeserialize-class" class="anchor" href="#serializedeserialize-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>Serialize/Deserialize class</h6>

<div class="highlight highlight-source-scala"><pre><span class="pl-k">import</span> <span class="pl-v">org.msgpack.annotation.</span><span class="pl-v">Message</span>
<span class="pl-k">import</span> <span class="pl-v">org.msgpack.</span><span class="pl-v">ScalaMessagePack</span>

<span class="pl-k">@</span><span class="pl-en">Message</span> <span class="pl-c">// Don't forget to add Message annotation.</span>
<span class="pl-k">class</span> <span class="pl-en">YourClass</span>{
  <span class="pl-k">var</span> <span class="pl-en">name</span> <span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
  <span class="pl-k">var</span> <span class="pl-en">age</span> <span class="pl-k">:</span> <span class="pl-k">Int</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>
}

<span class="pl-k">val</span> <span class="pl-en">obj</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">YourClass</span>()
obj.name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hoge<span class="pl-pds">"</span></span>
obj.age <span class="pl-k">=</span> <span class="pl-c1">22</span>
<span class="pl-k">val</span> <span class="pl-en">serialized</span> <span class="pl-k">:</span> <span class="pl-en">Array</span>[<span class="pl-k">Byte</span>] <span class="pl-k">=</span> <span class="pl-en">ScalaMessagePack</span>.write(obj)

<span class="pl-k">val</span> <span class="pl-en">deserialized</span> <span class="pl-k">:</span> <span class="pl-en">YourClass</span> <span class="pl-k">=</span> <span class="pl-en">ScalaMessagePack</span>.read[<span class="pl-en">YourClass</span>](serialized)
</pre></div>

<ul>
<li>Sorry, case classes are not supported now.</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-haskell" class="qs"><h4><a href="https://github.com/msgpack/msgpack-haskell" target="_blank">msgpack/msgpack-haskell <span class="qs-url">https://github.com/msgpack/msgpack-haskell</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-haskell" class="anchor" href="#messagepack-for-haskell" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Haskell</h5>

<p>This is an implementation of msgpack for Haskell.</p>

<p>It containes:</p>

<ul>
<li>Serializer/Deserializer</li>
<li>RPC</li>
</ul>

<h5>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h5>

<p>Execute following instructions:</p>

<div class="highlight highlight-source-shell"><pre>$ cabal update
$ cabal install msgpack
$ cabal install msgpack-rpc</pre></div>

<h5>
<a id="user-content-document" class="anchor" href="#document" aria-hidden="true"><span class="octicon octicon-link"></span></a>Document</h5>

<p>There are Haddoc documents on Hackage Database.</p>

<ul>
<li><a href="http://hackage.haskell.org/package/msgpack">http://hackage.haskell.org/package/msgpack</a></li>
<li><a href="http://hackage.haskell.org/package/msgpack-rpc">http://hackage.haskell.org/package/msgpack-rpc</a></li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-mneumann-MessagePack" class="qs"><h4><a href="https://github.com/mneumann/MessagePack" target="_blank">mneumann/MessagePack <span class="qs-url">https://github.com/mneumann/MessagePack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack" class="anchor" href="#messagepack" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack</h5>

<p>An alternative msgpack.org implementation for Ruby and C++</p>
</article>
  </div>
        </div>
        
        <div id="qs-aaulia-msgpack-haxe" class="qs"><h4><a href="https://github.com/aaulia/msgpack-haxe" target="_blank">aaulia/msgpack-haxe <span class="qs-url">https://github.com/aaulia/msgpack-haxe</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><p><a href="/aaulia/msgpack-haxe/blob/master/license.txt"><img src="https://camo.githubusercontent.com/d0e25b09a82bc4bfde9f1e048a092752eebbb4f3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e7376673f7374796c653d666c6174" alt="MIT License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg?style=flat" style="max-width:100%;"></a> <a href="http://lib.haxe.org/p/msgpack-haxe"><img src="https://camo.githubusercontent.com/04bda7820d398e2be12848541ef70c8dc83556ed/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6161756c69612f6d73677061636b2d686178652e7376673f7374796c653d666c6174266c6162656c3d686178656c6962" alt="Haxelib Version" data-canonical-src="https://img.shields.io/github/release/aaulia/msgpack-haxe.svg?style=flat&amp;label=haxelib" style="max-width:100%;"></a></p>

<h5>
<a id="user-content-msgpack-haxe" class="anchor" href="#msgpack-haxe" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-haxe</h5>

<p>MessagePack (<a href="http://msgpack.org">http://msgpack.org</a>) serialization library for Haxe</p>

<h6>
<a id="user-content-how-to-install" class="anchor" href="#how-to-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to install:</h6>

<p>Simply use <code>haxelib git</code> to use this github repo or <code>haxelib install msgpack-haxe</code> to use the one in the haxelib repository.</p>

<h6>
<a id="user-content-supported-type" class="anchor" href="#supported-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported Type:</h6>

<ul>
<li>Null</li>
<li>Bool</li>
<li>Int</li>
<li>Float</li>
<li>Object</li>
<li>Bytes</li>
<li>String</li>
<li>Array</li>
<li>IntMap/StringMap</li>
</ul>

<h6>
<a id="user-content-example-code" class="anchor" href="#example-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example code:</h6>

<div class="highlight highlight-source-haxe-2"><pre><span class="pl-k">package</span>;
<span class="pl-k">import</span> <span class="pl-c1">org.msgpack.</span><span class="pl-c1">MsgPack</span>;

<span class="pl-k">class</span> <span class="pl-en">Example</span> {
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">function</span> <span class="pl-en">main</span>() {
        <span class="pl-k">var</span> i <span class="pl-k">=</span> { a: <span class="pl-c1">1</span>, b: <span class="pl-c1">2</span>, c: <span class="pl-s"><span class="pl-pds">"</span>Hello World!<span class="pl-pds">"</span></span> };
        <span class="pl-k">var</span> m <span class="pl-k">=</span> <span class="pl-c1">MsgPack.</span>encode(i);
        <span class="pl-k">var</span> o <span class="pl-k">=</span> <span class="pl-c1">MsgPack.</span>decode(m);

        <span class="pl-k">trace</span>(i);
        <span class="pl-k">trace</span>(m.toHex());
        <span class="pl-k">trace</span>(o);
    }
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-cli" class="qs"><h4><a href="https://github.com/msgpack/msgpack-cli" target="_blank">msgpack/msgpack-cli <span class="qs-url">https://github.com/msgpack/msgpack-cli</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-cli" class="anchor" href="#messagepack-for-cli" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for CLI</h5>

<h6>
<a id="user-content-what-is-it" class="anchor" href="#what-is-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is it?</h6>

<p>This is MessagePack serialization/deserialization for CLI (Common Language Infrastructure) implementations such as .NET Framework, Silverlight, Mono (including Moonlight.)
This library can be used from ALL CLS compliant languages such as C#, F#, Visual Basic, Iron Pyhton, Iron Ruby, PowerShell, C++/CLI or so.</p>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<p>You can serialize/deserialize objects as following:
1. Create serializer via <code>MessagePackSerializer.Create</code> generic method. This method creates dependent types serializers as well.
1. Invoke serializer as following:
** <code>Pack</code> method with destination <code>Stream</code> and target object for serialization.
** <code>Unpack</code> method with source <code>Stream</code>.</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-c">// Creates serializer.</span>
<span class="pl-k">var</span> serializer = SerializationContext.Default.GetSerializer&lt;T&gt;();
<span class="pl-c">// Pack obj to stream.</span>
serializer.Pack(stream, obj);
<span class="pl-c">// Unpack from stream.</span>
<span class="pl-k">var</span> unpackedObject = serializer.Unpack(stream);</pre></div>

<div class="highlight highlight-source-vbnet"><pre><span class="pl-c">' Creates serializer.</span>
<span class="pl-k">Dim</span> serializer <span class="pl-k">=</span> SerializationContext<span class="pl-k">.</span><span class="pl-k">Default</span><span class="pl-k">.</span>GetSerializer(<span class="pl-k">Of </span>T)()
<span class="pl-c">' Pack obj to stream.</span>
serializer<span class="pl-k">.</span>Pack(stream, obj)
<span class="pl-c">' Unpack from stream.</span>
<span class="pl-k">Dim</span> unpackedObject <span class="pl-k">=</span> serializer<span class="pl-k">.</span>Unpack(stream)</pre></div>

<h6>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h6>

<ul>
<li>Fast and interoperable binary format serialization with simple API.</li>
<li>Generating pre-compiled assembly for rapid start up.</li>
<li>Flexible MessagePackObject which represents MessagePack type system naturally.</li>
</ul>

<h6>
<a id="user-content-documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h6>

<p>See <a href="https://github.com/msgpack/msgpack-cli/wiki">wiki</a></p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<ul>
<li>Binary files distributed via the NuGet package <a href="http://www.nuget.org/packages/MsgPack.Cli/">MsgPack.Cli</a>.</li>
<li>You can extract binary (DLL) file as following:

<ol>
<li>Download *.zip file from <a href="https://github.com/msgpack/msgpack-cli/releases/">GitHub Release page</a>.</li>
<li>Extract it.</li>
<li>Under the <code>bin</code> directory, binaries are there!

<ul>
<li>For mono, you can use <code>net45</code> or <code>net35</code> drops as you run with.</li>
<li>For Unity, <code>unity3d</code> drop is suitable.</li>
</ul>
</li>
</ol>
</li>
</ul>

<h6>
<a id="user-content-how-to-build" class="anchor" href="#how-to-build" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to build</h6>

<h7>
<a id="user-content-for-net-framework" class="anchor" href="#for-net-framework" aria-hidden="true"><span class="octicon octicon-link"></span></a>For .NET Framework</h7>

<ol>
<li>Install recent Windows SDK (at least, .NET Framework 4 Client Profile and MSBuild is needed.) <br>
Or install Visual Studio or Visual Studio Express.

<ol>
<li>If you want to build unit test assemblies, install NuGet and then restore NUnit packages.</li>
</ol>
</li>
<li>
<p>Run:</p>

<p>msbuild MsgPack.sln</p>

<p>Or (for .NET 3.5 drops and Unity 3D drops):</p>

<p>msbuild MsgPack.compats.sln</p>

<p>Or (for Windows Runtime/Phone drops and Silverlight 5 drops):</p>

<p>msbuild MsgPack.Windows.sln</p>

<p>Or (for Xamarin drops, you must have Xamarin Business or upper license and Mac machine on the LAN to build on Windows):</p>

<p>msbuild MsgPack.Xamarin.sln</p>
</li>
</ol>

<p>Or open one of above solution files in your IDE and run build command in it.</p>

<h7>
<a id="user-content-for-mono" class="anchor" href="#for-mono" aria-hidden="true"><span class="octicon octicon-link"></span></a>For Mono</h7>

<p>Open MsgPack.mono.sln with MonoDevelop and then click <strong>Build</strong> menu item.
(Of cource, you can build via xbuild.)</p>

<h7>
<a id="user-content-own-unity-3d-build" class="anchor" href="#own-unity-3d-build" aria-hidden="true"><span class="octicon octicon-link"></span></a>Own Unity 3D Build</h7>

<p>First of all, there are binary drops on github release page, you should use it to save your time. 
Because we will not guarantee source code organization compatibilities, we might add/remove non-public types or members, which should break source code build.
If you want to import sources, you must include just only described on MsgPack.Unity3D.csproj.
If you want to use ".NET 2.0 Subset" settings, you must use just only described on MsgPack.Unity3D.CorLibOnly.csproj file, and define <code>CORLIB_ONLY</code> compiler constants.</p>

<h6>
<a id="user-content-see-also" class="anchor" href="#see-also" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h6>

<ul>
<li> GitHub Page           : <a href="http://cli.msgpack.org/">http://cli.msgpack.org/</a>
</li>
<li> Wiki (documentation)  : <a href="https://github.com/msgpack/msgpack-cli/wiki">https://github.com/msgpack/msgpack-cli/wiki</a>
</li>
<li> API Reference         : <a href="http://cli.msgpack.org/doc/top.html">http://cli.msgpack.org/doc/top.html</a>
</li>
<li> Issue tracker         : <a href="https://github.com/msgpack/msgpack-cli/issues">https://github.com/msgpack/msgpack-cli/issues</a>
</li>
<li> MSBuild reference     : <a href="http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx">http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx</a>
</li>
<li> Mono xbuild reference : <a href="http://www.mono-project.com/Microsoft.Build">http://www.mono-project.com/Microsoft.Build</a>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-c" class="qs"><h4><a href="https://github.com/msgpack/msgpack-c" target="_blank">msgpack/msgpack-c <span class="qs-url">https://github.com/msgpack/msgpack-c</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-for-cc" class="anchor" href="#msgpack-for-cc" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>msgpack</code> for C/C++</h5>

<p>Version 1.3.0 <a href="https://travis-ci.org/msgpack/msgpack-c"><img src="https://camo.githubusercontent.com/3165c63f585cb4407878cac19434ff79dfd6f3bc/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d632e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-c.svg?branch=master" style="max-width:100%;"></a> <a href="https://ci.appveyor.com/project/redboltz/msgpack-c/branch/master"><img src="https://camo.githubusercontent.com/b9c03b99428de22ee2a2c1845ba060563e700a05/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f386b73746367743739716a3132336d772f6272616e63682f6d61737465723f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/8kstcgt79qj123mw/branch/master?svg=true" style="max-width:100%;"></a></p>

<p>It's like JSON but small and fast.</p>

<h6>
<a id="user-content-overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h6>

<p><a href="http://msgpack.org/">MessagePack</a> is an efficient binary serialization
format, which lets you exchange data among multiple languages like JSON,
except that it's faster and smaller. Small integers are encoded into a
single byte while typical short strings require only one extra byte in
addition to the strings themselves.</p>

<h6>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h6>

<p>In C:</p>

<div class="highlight highlight-source-c"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>msgpack.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>stdio.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">void</span>)
{
    <span class="pl-c">/* msgpack::sbuffer is a simple buffer implementation. */</span>
    msgpack_sbuffer sbuf;
    <span class="pl-c1">msgpack_sbuffer_init</span>(&amp;sbuf);

    <span class="pl-c">/* serialize values into the buffer using msgpack_sbuffer_write callback function. */</span>
    msgpack_packer pk;
    <span class="pl-c1">msgpack_packer_init</span>(&amp;pk, &amp;sbuf, msgpack_sbuffer_write);

    <span class="pl-c1">msgpack_pack_array</span>(&amp;pk, <span class="pl-c1">3</span>);
    <span class="pl-c1">msgpack_pack_int</span>(&amp;pk, <span class="pl-c1">1</span>);
    <span class="pl-c1">msgpack_pack_true</span>(&amp;pk);
    <span class="pl-c1">msgpack_pack_str</span>(&amp;pk, <span class="pl-c1">7</span>);
    <span class="pl-c1">msgpack_pack_str_body</span>(&amp;pk, <span class="pl-s"><span class="pl-pds">"</span>example<span class="pl-pds">"</span></span>, <span class="pl-c1">7</span>);

    <span class="pl-c">/* deserialize the buffer into msgpack_object instance. */</span>
    <span class="pl-c">/* deserialized object is valid during the msgpack_zone instance alive. */</span>
    msgpack_zone mempool;
    <span class="pl-c1">msgpack_zone_init</span>(&amp;mempool, <span class="pl-c1">2048</span>);

    msgpack_object deserialized;
    <span class="pl-c1">msgpack_unpack</span>(sbuf.<span class="pl-smi">data</span>, sbuf.<span class="pl-smi">size</span>, <span class="pl-c1">NULL</span>, &amp;mempool, &amp;deserialized);

    <span class="pl-c">/* print the deserialized object. */</span>
    <span class="pl-c1">msgpack_object_print</span>(stdout, deserialized);
    <span class="pl-c1">puts</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>);

    <span class="pl-c1">msgpack_zone_destroy</span>(&amp;mempool);
    <span class="pl-c1">msgpack_sbuffer_destroy</span>(&amp;sbuf);

    <span class="pl-k">return</span> <span class="pl-c1">0</span>;
}</pre></div>

<p>See <a href="/msgpack/msgpack-c/blob/master/QUICKSTART-C.md"><code>QUICKSTART-C.md</code></a> for more details.</p>

<p>In C++:</p>

<div class="highlight highlight-source-c++"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>msgpack.hpp<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>string<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>iostream<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>sstream<span class="pl-pds">&gt;</span></span>

<span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">void</span>)
{
    msgpack::type::tuple&lt;<span class="pl-k">int</span>, <span class="pl-k">bool</span>, std::string&gt; <span class="pl-c1">src</span>(<span class="pl-c1">1</span>, <span class="pl-c1">true</span>, <span class="pl-s"><span class="pl-pds">"</span>example<span class="pl-pds">"</span></span>);

    <span class="pl-c">// serialize the object into the buffer.</span>
    <span class="pl-c">// any classes that implements write(const char*,size_t) can be a buffer.</span>
    std::stringstream buffer;
    <span class="pl-c1">msgpack::pack</span>(buffer, src);

    <span class="pl-c">// send the buffer ...</span>
    buffer.<span class="pl-c1">seekg</span>(<span class="pl-c1">0</span>);

    <span class="pl-c">// deserialize the buffer into msgpack::object instance.</span>
    std::string <span class="pl-smi">str</span>(buffer.<span class="pl-c1">str</span>());

    msgpack::unpacked result;

    <span class="pl-c1">msgpack::unpack</span>(result, str.<span class="pl-c1">data</span>(), str.<span class="pl-c1">size</span>());

    <span class="pl-c">// deserialized object is valid during the msgpack::unpacked instance alive.</span>
    msgpack::object deserialized = result.<span class="pl-c1">get</span>();

    <span class="pl-c">// msgpack::object supports ostream.</span>
    std::cout &lt;&lt; deserialized &lt;&lt; std::endl;

    <span class="pl-c">// convert msgpack::object instance into the original type.</span>
    <span class="pl-c">// if the type is mismatched, it throws msgpack::type_error exception.</span>
    msgpack::type::tuple&lt;<span class="pl-k">int</span>, <span class="pl-k">bool</span>, std::string&gt; dst;
    deserialized.<span class="pl-c1">convert</span>(&amp;dst);

    <span class="pl-k">return</span> <span class="pl-c1">0</span>;
}</pre></div>

<p>See <a href="/msgpack/msgpack-c/blob/master/QUICKSTART-CPP.md"><code>QUICKSTART-CPP.md</code></a> for more details.</p>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<h7>
<a id="user-content-c-header-only-library" class="anchor" href="#c-header-only-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>C++ Header Only Library</h7>

<p>When you use msgpack on C++03 and C++11, you can just add
msgpack-c/include to your include path:</p>

<pre><code>g++ -I msgpack-c/include your_source_file.cpp
</code></pre>

<p>If you want to use C version of msgpack, you need to build it. You can
also install the C and C++ versions of msgpack.</p>

<h7>
<a id="user-content-building-and-installing" class="anchor" href="#building-and-installing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building and Installing</h7>

<h8>
<a id="user-content-install-from-git-repository" class="anchor" href="#install-from-git-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install from git repository</h8>

<h5>
<a id="user-content-using-autotools" class="anchor" href="#using-autotools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using autotools</h5>

<p>You will need:</p>

<ul>
<li>
<code>gcc &gt;= 4.1.0</code> or <code>clang &gt;= 3.3.0</code>
</li>
<li><code>autoconf &gt;= 2.60</code></li>
<li><code>automake &gt;= 1.10</code></li>
<li><code>libtool &gt;= 2.2.4</code></li>
</ul>

<p>The build steps below are for C and C++03. If compiling for C++11,
add <code>-std=c++11</code> to the environmental variable <code>CXXFLAGS</code> with
<code>export CXXFLAGS="$CXXFLAGS -std=c++11"</code> prior to following the
directions below.</p>

<div class="highlight highlight-source-shell"><pre>$ git clone https://github.com/msgpack/msgpack-c
$ <span class="pl-c1">cd</span> msgpack-c
$ ./bootstrap
$ ./configure
$ make</pre></div>

<p>You can install the resulting library like this:</p>

<div class="highlight highlight-source-shell"><pre>$ sudo make install</pre></div>

<h5>
<a id="user-content-using-cmake" class="anchor" href="#using-cmake" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using cmake</h5>

<h6>
<a id="user-content-using-the-terminal-cli" class="anchor" href="#using-the-terminal-cli" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the Terminal (CLI)</h6>

<p>You will need:</p>

<ul>
<li><code>gcc &gt;= 4.1.0</code></li>
<li><code>cmake &gt;= 2.8.0</code></li>
</ul>

<p>C and C++03:</p>

<pre><code>$ git clone https://github.com/msgpack/msgpack-c.git
$ cd msgpack-c
$ cmake .
$ make
$ sudo make install
</code></pre>

<p>If you want to setup C++11 version of msgpack instead,
execute the following commands:</p>

<pre><code>$ git clone https://github.com/msgpack/msgpack-c.git
$ cd msgpack-c
$ cmake -DMSGPACK_CXX11=ON .
$ sudo make install
</code></pre>

<h5>
<a id="user-content-gui-on-windows" class="anchor" href="#gui-on-windows" aria-hidden="true"><span class="octicon octicon-link"></span></a>GUI on Windows</h5>

<p>Clone msgpack-c git repository.</p>

<pre><code>$ git clone https://github.com/msgpack/msgpack-c.git
</code></pre>

<p>or using GUI git client.</p>

<p>e.g.) tortoise git <a href="https://code.google.com/p/tortoisegit/">https://code.google.com/p/tortoisegit/</a></p>

<ol>
<li><p>Launch <a href="http://www.cmake.org/cmake/resources/software.html">cmake GUI client</a>.</p></li>
<li><p>Set 'Where is the source code:' text box and 'Where to build
the binaries:' text box.</p></li>
<li><p>Click 'Configure' button.</p></li>
<li><p>Choose your Visual Studio version.</p></li>
<li><p>Click 'Generate' button.</p></li>
<li><p>Open the created msgpack.sln on Visual Studio.</p></li>
<li><p>Build all.</p></li>
</ol>

<h7>
<a id="user-content-documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h7>

<p>You can get addtional information on the
<a href="https://github.com/msgpack/msgpack-c/wiki">wiki</a>.</p>

<h6>
<a id="user-content-contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h6>

<p><code>msgpack-c</code> is developed on GitHub at <a href="https://github.com/msgpack/msgpack-c">msgpack/msgpack-c</a>.
To report an issue or send a pull request, use the
<a href="https://github.com/msgpack/msgpack-c/issues">issue tracker</a>.</p>

<p>Here's the list of <a href="https://github.com/msgpack/msgpack-c/graphs/contributors">great contributors</a>.</p>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p><code>msgpack-c</code> is licensed under the Boost Software License, Version 1.0. See
the <a href="/msgpack/msgpack-c/blob/master/LICENSE_1_0.txt"><code>LICENSE_1_0.txt</code></a> file for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-ocaml" class="qs"><h4><a href="https://github.com/msgpack/msgpack-ocaml" target="_blank">msgpack/msgpack-ocaml <span class="qs-url">https://github.com/msgpack/msgpack-ocaml</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-for-ocaml" class="anchor" href="#msgpack-for-ocaml" aria-hidden="true"><span class="octicon octicon-link"></span></a>MsgPack for OCaml</h5>

<h6>
<a id="user-content-bulid" class="anchor" href="#bulid" aria-hidden="true"><span class="octicon octicon-link"></span></a>BULID</h6>

<div class="highlight highlight-source-shell"><pre>$ make
$ sudo make install</pre></div>

<h6>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>EXAMPLE</h6>

<h7>
<a id="user-content-serializedeserialize-for-msgpack-object" class="anchor" href="#serializedeserialize-for-msgpack-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Serialize/Deserialize for Msgpack Object</h7>

<div class="highlight highlight-source-ocaml"><pre><span class="pl-c">(* serialize *)</span>
<span class="pl-k">let</span> bytes <span class="pl-k">=</span> 
  <span class="pl-c1">Msgpack.Serialize.</span>serialize_string (<span class="pl-en">`FixArray</span> [<span class="pl-en">`PFixnum</span> <span class="pl-c1">1</span>; <span class="pl-en">`PFixnum</span> <span class="pl-c1">2</span>; <span class="pl-en">`PFixnum</span> <span class="pl-c1">3</span>])

<span class="pl-c">(* deserialize *)</span>
<span class="pl-k">let</span> obj <span class="pl-k">=</span>
  <span class="pl-c1">Msgpack.Serialize.</span>deserialize_string bytes</pre></div>

<h7>
<a id="user-content-serializedeserialize-for-ocaml-types-with-meta_conv" class="anchor" href="#serializedeserialize-for-ocaml-types-with-meta_conv" aria-hidden="true"><span class="octicon octicon-link"></span></a>Serialize/Deserialize for OCaml types (with meta_conv)</h7>

<div class="highlight highlight-source-ocaml"><pre><span class="pl-k">open</span> <span class="pl-c1">Msgpack_conv</span>

<span class="pl-k">type</span> <span class="pl-k">t </span>= {
  <span class="pl-s1">int</span> : <span class="pl-k">int</span><span class="pl-k">;</span>
  <span class="pl-s1">str</span> : <span class="pl-k">string</span><span class="pl-k">;</span>
} <span class="pl-k">with</span> <span class="pl-k">conv</span>(<span class="pl-k">msgpack</span>)

<span class="pl-c">(* serialize *)</span>
<span class="pl-k">let</span> bytes <span class="pl-k">=</span> 
  <span class="pl-c1">Msgpack.Serialize.</span>serialize_string (msgpack_of_t { <span class="pl-k">int</span> <span class="pl-k">=</span> <span class="pl-c1">42</span>; str <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ans<span class="pl-pds">"</span></span> })

<span class="pl-c">(* deserialize *)</span>
<span class="pl-k">let</span> obj <span class="pl-k">=</span>
  t_of_msgpack (<span class="pl-c1">Msgpack.Serialize.</span>deserialize_string bytes)</pre></div>

<p>See also, <code>examlpe/</code></p>

<h6>
<a id="user-content-test" class="anchor" href="#test" aria-hidden="true"><span class="octicon octicon-link"></span></a>TEST</h6>

<div class="highlight highlight-source-shell"><pre>$ ocaml setup.ml -configure --enable-tests
$ make <span class="pl-c1">test</span></pre></div>

<h6>
<a id="user-content-proof" class="anchor" href="#proof" aria-hidden="true"><span class="octicon octicon-link"></span></a>PROOF</h6>

<p>If you want to use msgpack at OCaml, you need not do this section.
This section for user intrested in formal verification.</p>

<p>You need Coq 8.4 and omake.</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">cd</span> proof
$ make
$ cp <span class="pl-k">*</span>.ml ../lib</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-smalltalk" class="qs"><h4><a href="https://github.com/msgpack/msgpack-smalltalk" target="_blank">msgpack/msgpack-smalltalk <span class="qs-url">https://github.com/msgpack/msgpack-smalltalk</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-smalltalk" class="anchor" href="#msgpack-smalltalk" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-smalltalk</h5>

<p>MessagePack serialization library for various Smalltalk dialects.</p>

<ul>
<li>Squeak</li>
<li>Pharo</li>
<li>VisualWorks</li>
<li>VA Smalltalk</li>
<li>Dolphin Smalltalk</li>
<li>GNU Smalltalk (Beta)</li>
<li><a href="https://github.com/mumez/Cuis-Smalltalk-MessagePack">Cuis</a></li>
</ul>

<p>Sources are put as <a href="https://github.com/CampSmalltalk/Cypress/blob/master/README.md">Cypress</a> for the neutral accesses from various Smalltalk dialects.</p>

<h6>
<a id="user-content-how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use</h6>

<h7>
<a id="user-content-serialization" class="anchor" href="#serialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Serialization</h7>

<div class="highlight highlight-source-smalltalk"><pre><span class="pl-c1">MpMessagePack</span> <span class="pl-c1">pack:</span> <span class="pl-k">&lt;</span>your object<span class="pl-k">&gt;</span></pre></div>

<p>or:</p>

<div class="highlight highlight-source-smalltalk"><pre><span class="pl-k">&lt;</span>your object<span class="pl-k">&gt;</span> messagePacked</pre></div>

<h7>
<a id="user-content-deserialization" class="anchor" href="#deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deserialization</h7>

<div class="highlight highlight-source-smalltalk"><pre><span class="pl-c1">MpMessagePack</span> <span class="pl-c1">unpack:</span> msgpackBytes</pre></div>

<p>or:</p>

<div class="highlight highlight-source-smalltalk"><pre><span class="pl-c1">Object</span> <span class="pl-c1">fromMessagePack:</span> msgBytes</pre></div>

<h7>
<a id="user-content-samples" class="anchor" href="#samples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Samples</h7>

<div class="highlight highlight-source-smalltalk"><pre>map <span class="pl-k">:=</span> <span class="pl-c1">Dictionary</span> <span class="pl-k">new</span>.
map <span class="pl-c1">at:</span> <span class="pl-s">'someArray'</span> asByteArray <span class="pl-c1">put:</span> <span class="pl-c1">#(1 2.2 #[3 4 5])</span>.
packed <span class="pl-k">:=</span> map messagePacked.
(<span class="pl-c1">Object</span> <span class="pl-c1">fromMessagePack:</span> packed) inspect.</pre></div>

<div class="highlight highlight-source-smalltalk"><pre>writeStream <span class="pl-k">:=</span> <span class="pl-c1">WriteStream</span> <span class="pl-c1">on:</span> <span class="pl-c1">ByteArray</span> <span class="pl-k">new</span>.
encoder <span class="pl-k">:=</span> <span class="pl-c1">MpEncoder</span> <span class="pl-c1">on:</span> writeStream.
encoder <span class="pl-c1">nextPut:</span> <span class="pl-c1">1</span>.
encoder <span class="pl-c1">nextPut:</span> <span class="pl-c1">#(2 3)</span>.
dic <span class="pl-k">:=</span> <span class="pl-c1">Dictionary</span> <span class="pl-k">new</span>.
dic <span class="pl-c1">at:</span> <span class="pl-c1">4</span> <span class="pl-c1">put:</span> <span class="pl-c1">5</span>.
encoder <span class="pl-c1">nextPut:</span> dic.
encoder <span class="pl-c1">nextPut:</span> <span class="pl-s">'four'</span> asByteArray.
bytes <span class="pl-k">:=</span> encoder contents.
readStream <span class="pl-k">:=</span> <span class="pl-c1">ReadStream</span> <span class="pl-c1">on:</span> bytes.
decoder <span class="pl-k">:=</span> <span class="pl-c1">MpDecoder</span> <span class="pl-c1">on:</span> readStream.
[decoder atEnd] <span class="pl-k">whileFalse:</span> [
        <span class="pl-c1">Transcript</span> cr; <span class="pl-c1">show:</span> decoder next printString
]</pre></div>

<hr>

<p>We are moving from <a href="http://code.google.com/p/messagepack-st/">Google Code site</a>. Old contents including installation guide are still there.</p>
</article>
  </div>
        </div>
        
        <div id="qs-loteixeira-as3-msgpack" class="qs"><h4><a href="https://github.com/loteixeira/as3-msgpack" target="_blank">loteixeira/as3-msgpack <span class="qs-url">https://github.com/loteixeira/as3-msgpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><p><strong>MessagePack for Actionscript3 (Flash, Flex and AIR).</strong></p>

<p>as3-msgpack was designed to work with the interfaces IDataInput and IDataOutput, thus the API might be easily connected with the native classes that handle binary data (such as ByteArray, Socket, FileStream and URLStream).<br>
Moreover, as3-msgpack is capable of decoding data from binary streams.<br>
Get started: <a href="http://loteixeira.github.io/lib/2013/08/19/as3-msgpack/">http://loteixeira.github.io/lib/2013/08/19/as3-msgpack/</a></p>

<p><strong>Basic usage (encoding/decoding):</strong></p>

<div class="highlight highlight-source-actionscript-3"><pre><span class="pl-c">// create messagepack object</span>
<span class="pl-k">var</span> msgpack<span class="pl-k">:</span>MsgPack <span class="pl-k">=</span> <span class="pl-k">new</span> MsgPack()<span class="pl-k">;</span>

<span class="pl-c">// encode an array</span>
<span class="pl-k">var</span> <span class="pl-c1">bytes</span><span class="pl-k">:</span><span class="pl-c1">ByteArray</span> <span class="pl-k">=</span> msgpack<span class="pl-k">.</span>write(<span class="pl-k">[</span><span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span><span class="pl-k">]</span>)<span class="pl-k">;</span>

<span class="pl-c">// rewind the buffer</span>
<span class="pl-c1">bytes</span><span class="pl-k">.</span><span class="pl-c1">position</span> <span class="pl-k">=</span> <span class="pl-c1">0</span><span class="pl-k">;</span>

<span class="pl-c">// print the decoded object</span>
<span class="pl-c1">trace</span>(msgpack<span class="pl-k">.</span>read(<span class="pl-c1">bytes</span>))<span class="pl-k">;</span></pre></div>

<p>For downloads, source code and further information, check the project repository: <a href="https://github.com/loteixeira/as3-msgpack">https://github.com/loteixeira/as3-msgpack</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-php" class="qs"><h4><a href="https://github.com/msgpack/msgpack-php" target="_blank">msgpack/msgpack-php <span class="qs-url">https://github.com/msgpack/msgpack-php</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-for-php" class="anchor" href="#msgpack-for-php" aria-hidden="true"><span class="octicon octicon-link"></span></a>Msgpack for PHP</h5>

<p><a href="https://travis-ci.org/msgpack/msgpack-php"><img src="https://camo.githubusercontent.com/875634a635cca813cf3c16de575dfb96917e2ca9/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d7068702e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/msgpack/msgpack-php.png" style="max-width:100%;"></a></p>

<p>This extension provide API for communicating with MessagePack serialization. </p>

<p>MessagePack is a binary-based efficient object serialization library.
It enables to exchange structured objects between many languages like JSON.
But unlike JSON, it is very fast and small.</p>

<h6>
<a id="user-content-requirement" class="anchor" href="#requirement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirement</h6>

<ul>
<li>PHP 5.0 +</li>
</ul>

<h6>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h6>

<h7>
<a id="user-content-install-from-pecl" class="anchor" href="#install-from-pecl" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install from PECL</h7>

<p>Msgpack is an PECL extension, thus you can simply install it by:</p>

<pre><code>pecl install msgpack
</code></pre>

<h7>
<a id="user-content-compile-msgpack-from-source" class="anchor" href="#compile-msgpack-from-source" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compile Msgpack from source</h7>

<pre><code>$/path/to/phpize
$./configure 
$make &amp;&amp; make install
</code></pre>

<h7>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h7>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$data</span> <span class="pl-k">=</span> <span class="pl-c1">array</span>(<span class="pl-c1">0</span><span class="pl-k">=&gt;</span><span class="pl-c1">1</span>,<span class="pl-c1">1</span><span class="pl-k">=&gt;</span><span class="pl-c1">2</span>,<span class="pl-c1">2</span><span class="pl-k">=&gt;</span><span class="pl-c1">3</span>);</span>
<span class="pl-s1"><span class="pl-smi">$msg</span> <span class="pl-k">=</span> msgpack_pack(<span class="pl-smi">$data</span>);</span>
<span class="pl-s1"><span class="pl-smi">$data</span> <span class="pl-k">=</span> msgpack_unpack(<span class="pl-smi">$msg</span>);</span>
<span class="pl-s1"></span><span class="pl-pse"><span class="pl-s1">?</span>&gt;</span></pre></div>

<h5>
<a id="user-content-resources" class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h5>

<ul>
<li><a href="http://msgpack.org/">msgpack</a></li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-fperrad-lua-MessagePack" class="qs"><h4><a href="http://fperrad.github.io/lua-MessagePack/" target="_blank">fperrad/lua-MessagePack <span class="qs-url">http://fperrad.github.io/lua-MessagePack/</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-lua-spec-v5" class="anchor" href="#messagepack-for-lua-spec-v5" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Lua (spec v5)</h5>

<p><a href="https://travis-ci.org/fperrad/lua-MessagePack"><img src="https://camo.githubusercontent.com/621838758f869a5cea8171a45a34b7021027fbb0/68747470733a2f2f7472617669732d63692e6f72672f667065727261642f6c75612d4d6573736167655061636b2e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/fperrad/lua-MessagePack.png?branch=master" style="max-width:100%;"></a>
<a href="https://coveralls.io/r/fperrad/lua-MessagePack?branch=master"><img src="https://camo.githubusercontent.com/d78abbaa338852cf670531b628d9cc03b815e8ce/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f667065727261642f6c75612d4d6573736167655061636b2f62616467652e706e673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/fperrad/lua-MessagePack/badge.png?branch=master" style="max-width:100%;"></a>
<a href="/fperrad/lua-MessagePack/blob/master/COPYRIGHT"><img src="https://camo.githubusercontent.com/4ebe0bb28f60172b0c0378442dd98253e2b5fded/687474703a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e63652d4d49542d627269676874677265656e2e737667" alt="Licence" data-canonical-src="http://img.shields.io/badge/Licence-MIT-brightgreen.svg" style="max-width:100%;"></a>
<a href="/fperrad/lua-MessagePack/blob/master/COPYRIGHT"><img src="https://camo.githubusercontent.com/10709f61ba8fa7657411081e600eccd7b2e9067a/687474703a2f2f696d672e736869656c64732e696f2f62616467652f446570656e64656e636965732d6e6f6e652d627269676874677265656e2e737667" alt="Dependencies" data-canonical-src="http://img.shields.io/badge/Dependencies-none-brightgreen.svg" style="max-width:100%;"></a></p>

<div class="highlight highlight-source-lua"><pre><span class="pl-k">local</span> mp <span class="pl-k">=</span> <span class="pl-c1">require</span> <span class="pl-s"><span class="pl-pds">'</span>MessagePack<span class="pl-pds">'</span></span>
mpac <span class="pl-k">=</span> mp.<span class="pl-c1">pack</span>(data)
data <span class="pl-k">=</span> mp.<span class="pl-c1">unpack</span>(mpac)</pre></div>

<h6>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h6>

<p>You can use LuaRocks to install lua-MessagePack:</p>

<pre><code>$ luarocks install lua-messagepack
</code></pre>

<p>or from the source, with:</p>

<pre><code>$ make install
</code></pre>

<p>It is a pure Lua implementation, without any dependency.</p>

<h6>
<a id="user-content-links" class="anchor" href="#links" aria-hidden="true"><span class="octicon octicon-link"></span></a>Links</h6>

<ul>
<li><a href="http://github.com/fperrad/lua-MessagePack/">Github</a></li>
<li><a href="http://fperrad.github.io/lua-MessagePack/msgpack.html">API reference</a></li>
</ul>

<h6>
<a id="user-content-copyright-and-license" class="anchor" href="#copyright-and-license" aria-hidden="true"><span class="octicon octicon-link"></span></a>Copyright and License</h6>

<p>Copyright (c) 2012-2015 Francois Perrad <a href="https://www.openhub.net/accounts/4780"><img src="https://camo.githubusercontent.com/b6b47de1fd31badb4c9a48713018c6124e3f1757/68747470733a2f2f7777772e6f70656e6875622e6e65742f6163636f756e74732f343738302f776964676574732f6163636f756e745f72616e6b2e676966" alt="rank" data-canonical-src="https://www.openhub.net/accounts/4780/widgets/account_rank.gif" style="max-width:100%;"></a></p>

<p>This library is licensed under the terms of the MIT/X11 license, like Lua itself.</p>
</article>
  </div>
        </div>
        
        <div id="qs-mneumann-rust-msgpack" class="qs"><h4><a href="https://github.com/mneumann/rust-msgpack" target="_blank">mneumann/rust-msgpack <span class="qs-url">https://github.com/mneumann/rust-msgpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-rust-msgpack-" class="anchor" href="#rust-msgpack-" aria-hidden="true"><span class="octicon octicon-link"></span></a>rust-msgpack <a href="https://travis-ci.org/mneumann/rust-msgpack"><img src="https://camo.githubusercontent.com/7e21da06b68bdd23b5f10b72637cc1a5d5ca2d8a/68747470733a2f2f7472617669732d63692e6f72672f6d6e65756d616e6e2f727573742d6d73677061636b2e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/mneumann/rust-msgpack.png?branch=master" style="max-width:100%;"></a>
</h5>

<p><a href="http://www.msgpack.org">Msgpack</a> implementation for <a href="http://www.rust-lang.org">Rust</a> language.</p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>Simply include the rust-msgpack in your Cargo dependencies.</p>

<div class="highlight highlight-source-toml"><pre>[<span class="pl-en">dependencies</span>.<span class="pl-en">msgpack</span>]

<span class="pl-smi">git</span> = <span class="pl-s"><span class="pl-pds">"</span>git@github.com:mneumann/rust-msgpack.git<span class="pl-pds">"</span></span></pre></div>

<h6>
<a id="user-content-quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h6>

<div class="highlight highlight-source-rust"><pre><span class="pl-k">extern</span> <span class="pl-k">crate</span> msgpack<span class="pl-k">;</span>

<span class="pl-k">fn</span> <span class="pl-en">main</span>() {
  <span class="pl-k">let</span> arr <span class="pl-k">=</span> vec<span class="pl-k">!</span>[<span class="pl-s">"str1"</span><span class="pl-k">.</span><span class="pl-c1">to_string</span>()<span class="pl-k">,</span> <span class="pl-s">"str2"</span><span class="pl-k">.</span><span class="pl-c1">to_string</span>()]<span class="pl-k">;</span>
  <span class="pl-k">let</span> <span class="pl-k">str</span> <span class="pl-k">=</span> msgpack<span class="pl-k">::</span><span class="pl-k">Encoder</span><span class="pl-k">::</span><span class="pl-c1">to_msgpack</span>(<span class="pl-k">&amp;</span>arr)<span class="pl-k">.</span><span class="pl-c1">ok</span>()<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">;</span>
  println<span class="pl-k">!</span>(<span class="pl-s">"Encoded: {}"</span><span class="pl-k">,</span> <span class="pl-k">str</span>)<span class="pl-k">;</span>

  <span class="pl-k">let</span> dec<span class="pl-k">:</span> <span class="pl-k">Vec</span><span class="pl-k">&lt;</span><span class="pl-k">String</span><span class="pl-k">&gt;</span> <span class="pl-k">=</span> msgpack<span class="pl-k">::</span><span class="pl-c1">from_msgpack</span>(<span class="pl-k">str</span>)<span class="pl-k">.</span><span class="pl-c1">ok</span>()<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">;</span>
  println<span class="pl-k">!</span>(<span class="pl-s">"Decoded: {}"</span><span class="pl-k">,</span> dec)<span class="pl-k">;</span>
}</pre></div>

<p>To enable your own data structures to be automatically serialized from and to
msgpack, derive from <code>Encodable</code> and <code>Decodable</code> as shown
in the following example:</p>

<div class="highlight highlight-source-rust"><pre><span class="pl-k">extern</span> <span class="pl-k">crate</span> serialize<span class="pl-k">;</span>

<span class="pl-c">#[deriving(Encodable,Decodable)]</span>
<span class="pl-k">struct</span> <span class="pl-k">MyStruct</span> {
  a<span class="pl-k">:</span> <span class="pl-k">Vec</span><span class="pl-k">&lt;</span><span class="pl-k">u32</span><span class="pl-k">&gt;,</span>
  s<span class="pl-k">:</span> <span class="pl-k">String</span>
}</pre></div>

<h6>
<a id="user-content-testing" class="anchor" href="#testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing</h6>

<pre><code>cargo test
</code></pre>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>This code licensed under the same terms as Rust itself: dual MIT/Apache2 license options.</p>
</article>
  </div>
        </div>
        
        <div id="qs-mururu-msgpack-elixir" class="qs"><h4><a href="https://github.com/mururu/msgpack-elixir" target="_blank">mururu/msgpack-elixir <span class="qs-url">https://github.com/mururu/msgpack-elixir</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-elixir" class="anchor" href="#messagepack-for-elixir" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Elixir</h5>

<p><a href="https://travis-ci.org/mururu/msgpack-elixir"><img src="https://camo.githubusercontent.com/09452907bf3009b0bf9ac3ecb8e3b5ce6bfb4ce6/68747470733a2f2f7472617669732d63692e6f72672f6d75727572752f6d73677061636b2d656c697869722e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/mururu/msgpack-elixir.png?branch=master" style="max-width:100%;"></a></p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>Add <code>:message_pack</code> as a dependency in your <code>mix.exs</code> file.</p>

<div class="highlight highlight-source-elixir"><pre><span class="pl-k">defp</span> <span class="pl-en">deps</span> <span class="pl-k">do</span>
  [{<span class="pl-c1">:message_pack</span>, <span class="pl-s"><span class="pl-pds">"</span>~&gt; 0.2.0<span class="pl-pds">"</span></span>}]
<span class="pl-k">end</span></pre></div>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<div class="highlight highlight-source-elixir"><pre><span class="pl-c"># pack</span>
<span class="pl-c1">MessagePack</span>.pack([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]) <span class="pl-c">#=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }</span>
<span class="pl-c1">MessagePack</span>.pack!([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]) <span class="pl-c">#=&gt; &lt;&lt;147,1,2,3&gt;&gt;</span>

<span class="pl-c"># unpack</span>
<span class="pl-c1">MessagePack</span>.unpack(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; { :ok, [1,2,3] }</span>
<span class="pl-c1">MessagePack</span>.unpack!(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; [1,2,3]</span>

<span class="pl-c"># unpack_once</span>
<span class="pl-c1">MessagePack</span>.unpack_once(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}</span>
<span class="pl-c1">MessagePack</span>.unpack_once!(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}</span></pre></div>

<h6>
<a id="user-content-options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h6>

<ul>
<li><code>enable_string</code></li>
</ul>

<p>Support string type. This options is <code>false</code> by default.</p>

<div class="highlight highlight-source-elixir"><pre>iex(<span class="pl-c1">1</span>)<span class="pl-k">&gt;</span> { <span class="pl-c1">:ok</span>, bin } <span class="pl-k">=</span> <span class="pl-c1">MessagePack</span>.pack(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">255</span><span class="pl-k">&gt;&gt;</span>)
{<span class="pl-c1">:ok</span>, <span class="pl-k">&lt;&lt;</span><span class="pl-c1">161</span>, <span class="pl-c1">255</span><span class="pl-k">&gt;&gt;</span>}
iex(<span class="pl-c1">3</span>)<span class="pl-k">&gt;</span> <span class="pl-c1">MessagePack</span>.unpack(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">161</span>, <span class="pl-c1">255</span><span class="pl-k">&gt;&gt;</span>)
{<span class="pl-c1">:ok</span>, <span class="pl-k">&lt;&lt;</span><span class="pl-c1">255</span><span class="pl-k">&gt;&gt;</span>}
iex(<span class="pl-c1">4</span>)<span class="pl-k">&gt;</span> <span class="pl-c1">MessagePack</span>.unpack(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">161</span>, <span class="pl-c1">255</span><span class="pl-k">&gt;&gt;</span>, <span class="pl-c1">enable_string:</span> <span class="pl-c1">true</span>)
{<span class="pl-c1">:error</span>, {<span class="pl-c1">:invalid_string</span>, <span class="pl-k">&lt;&lt;</span><span class="pl-c1">255</span><span class="pl-k">&gt;&gt;</span>}}</pre></div>

<ul>
<li><code>ext</code></li>
</ul>

<p>Support extention type.</p>

<p>See <code>test/message_pack_ext_test.exs</code>.</p>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-ktakashi-r6rs-msgpack" class="qs"><h4><a href="https://github.com/ktakashi/r6rs-msgpack" target="_blank">ktakashi/r6rs-msgpack <span class="qs-url">https://github.com/ktakashi/r6rs-msgpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-r6rs-scheme" class="anchor" href="#messagepack-for-r6rs-scheme" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for R6RS Scheme</h5>

<p>This is an implementation of <a href="http://msgpack.org/">MessagePack</a> for 
R6RS Scheme.</p>

<h6>
<a id="user-content-api-references" class="anchor" href="#api-references" aria-hidden="true"><span class="octicon octicon-link"></span></a>API references</h6>

<p><em>Function</em> (pack! bv message)<br>
<em>Function</em> (pack! bv message offset)   </p>

<p>Pack <em>message</em> to message pack format bytevector and put it into the
<em>bv</em> destructively. Given <em>bv</em> must have enough length to hold the message.</p>

<p>Optional argument <em>offset</em> indicates where to start with, default is 0.  </p>

<p><em>Function</em> (pack message)   </p>

<p>The same as <strong>pack!</strong> but this one creates a new bytevector.</p>

<p><em>Function</em> (pack-size message)</p>

<p>Calculate the converted message size.</p>

<p><em>Function</em> (unpack bv)<br>
<em>Function</em> (unpack bv offset)  </p>

<p>Unpack the given message format bytevector to Scheme object.</p>

<p>Optional argument <em>offset</em> indicates where to start with, default is 0.  </p>

<p><em>Function</em> (get-unpack in)</p>

<p>Unpack the given binary input port to Scheme object.</p>

<h6>
<a id="user-content-conversion-rules" class="anchor" href="#conversion-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conversion rules</h6>

<p>As you already know, Scheme doesn't have static types so the conversion of
Scheme objects to message pack data might cause unexpected results. To avoid
it, I will describe how conversion works.</p>

<h7>
<a id="user-content-scheme-to-message-pack" class="anchor" href="#scheme-to-message-pack" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scheme to message pack</h7>

<h8>
<a id="user-content-integer-conversion" class="anchor" href="#integer-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integer conversion</h8>

<p>The library automatically decides proper size. More specifically, if it
can fit to message pack's fixnum then library uses it, so are uint8-64.
If the number is too big, then an error is raised. Users must know it tries
to use uint as much as possible. If the given number was negative then
sint will be used.</p>

<h8>
<a id="user-content-floating-point-conversion" class="anchor" href="#floating-point-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Floating point conversion</h8>

<p>Unfortunately R6RS doesn't have difference between float and double. So
when flonum is given then it always converts to double number.</p>

<h8>
<a id="user-content-collection-conversion" class="anchor" href="#collection-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Collection conversion</h8>

<p>Message pack has collections which are map and array. And these are associated
with alist (association list) and vector respectively. When you want to convert
alist to message pack data, then you need to make sure the <em>cdr</em> part will be
the data and if you put <em>(("key" "value))_</em> then it will be converted to nested
map.</p>

<p>The collection size calculation is done automatically. It tries to use the
smallest size.</p>

<h7>
<a id="user-content-message-pack-to-scheme" class="anchor" href="#message-pack-to-scheme" aria-hidden="true"><span class="octicon octicon-link"></span></a>Message pack to Scheme</h7>

<p>The other way around is easy, it can simply restore the byte data to Scheme
object. Following describes the conversion rules;</p>

<p>Positive fixnum -&gt; integer<br>
Negative fixnum -&gt; integer<br>
uint8, uint16, uint32, uint64 -&gt; integer<br>
sint8, sint16, sint32, sint64 -&gt; integer<br>
Map -&gt; alist<br>
Array -&gt; vector<br>
fixstr, str8, str16, str32 -&gt; string
bit8, bit16, bit32 -&gt; bytevector</p>

<h6>
<a id="user-content-tested-scheme-implementations" class="anchor" href="#tested-scheme-implementations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tested Scheme implementations</h6>

<p><a href="http://code.google.com/p/sagittarius-scheme/">Sagittarius Scheme</a></p>

<p><a href="http://code.google.com/p/mosh-scheme/">Mosh Scheme</a></p>

<p><a href="http://code.google.com/p/ypsilon/">Ypsilon</a></p>

<p>Your contributions are always welcome.</p>

<h6>
<a id="user-content-todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h6>

<ul>
<li>More testing</li>
<li>Extended type handling</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-Lichtso-netLink" class="qs"><h4><a href="https://github.com/Lichtso/netLink" target="_blank">Lichtso/netLink <span class="qs-url">https://github.com/Lichtso/netLink</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-v5-implementation-for-c-11" class="anchor" href="#msgpack-v5-implementation-for-c-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>MsgPack v5 implementation for C++ 11</h5>

<p><a href="https://travis-ci.org/Lichtso/netLink"><img src="https://camo.githubusercontent.com/1595d84b723daaced17cd83455a0f07b3722c4c5/68747470733a2f2f7472617669732d63692e6f72672f4c69636874736f2f6e65744c696e6b2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/Lichtso/netLink.svg" style="max-width:100%;"></a>
<a href="http://en.wikipedia.org/wiki/Zlib_License"><img src="https://camo.githubusercontent.com/bd8e513df5763d4db311ba4c3018a661df881989/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d5a4c49422d627269676874677265656e2e737667" alt="License" data-canonical-src="https://img.shields.io/badge/License-ZLIB-brightgreen.svg" style="max-width:100%;"></a></p>

<h6>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h6>

<ul>
<li>std::streambuf serializer and deserializer</li>
<li>hierarchy or token stream</li>
<li>push and pull parser</li>
<li>byte wise data flow control</li>
</ul>

<h6>
<a id="user-content-small-example" class="anchor" href="#small-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small Example</h6>

<pre><code>MsgPack::Serializer serializer(socket);  
std::vector&lt;std::unique_ptr&lt;MsgPack::Element&gt;&gt; arrayWithoutElements, arrayWith3Elements;
arrayWith3Elements.push_back(MsgPack::Factory(true));
arrayWith3Elements.push_back(MsgPack__Factory(Array(std::move(arrayWithoutElements))));
arrayWith3Elements.push_back(MsgPack::Factory("Hello World!"));  
serializer &lt;&lt; MsgPack__Factory(Array(std::move(arrayWith3Elements)));

MsgPack::Deserializer deserializer(socket);  
deserializer.deserialize([](std::unique_ptr&lt;MsgPack::Element&gt; parsed) {
    std::cout &lt;&lt; "Parsed: " &lt;&lt; *parsed &lt;&lt; "\n";
    return false;
}, true);
</code></pre>

<h6>
<a id="user-content-read-more" class="anchor" href="#read-more" aria-hidden="true"><span class="octicon octicon-link"></span></a>Read More</h6>

<p><a href="https://github.com/Lichtso/netLink/wiki/MsgPack">Tutorial</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-ugorji-go" class="qs"><h4><a href="https://github.com/ugorji/go" target="_blank">ugorji/go <span class="qs-url">https://github.com/ugorji/go</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><p><strong>MessagePack and <a href="http://github.com/ugorji/binc">Binc</a> Codec for <a href="http://golang.org">Go</a> Language.</strong></p>

<p><em>A High Performance, Feature-Rich, Idiomatic encode/decode and rpc library</em>.</p>

<p>To install:</p>

<pre><code>go get github.com/ugorji/go/codec
</code></pre>

<p>Source: [<a href="http://github.com/ugorji/go">http://github.com/ugorji/go</a>]<br>
Online documentation: [<a href="http://godoc.org/github.com/ugorji/go/codec">http://godoc.org/github.com/ugorji/go/codec</a>]  </p>

<p>Typical usage:</p>

<div class="highlight highlight-source-go"><pre>    <span class="pl-c">// create and use decoder/encoder</span>
    <span class="pl-c1">var</span> (
        v <span class="pl-k">interface</span>{} <span class="pl-c">// value to decode/encode into</span>
        r io.<span class="pl-smi">Reader</span>
        w io.<span class="pl-smi">Writer</span>
        b []<span class="pl-k">byte</span>
        mh codec.<span class="pl-smi">MsgpackHandle</span>
    )

    dec = codec.<span class="pl-c1">NewDecoder</span>(r, &amp;mh)
    dec = codec.<span class="pl-c1">NewDecoderBytes</span>(b, &amp;mh)
    err = dec.<span class="pl-c1">Decode</span>(&amp;v) 

    enc = codec.<span class="pl-c1">NewEncoder</span>(w, &amp;mh)
    enc = codec.<span class="pl-c1">NewEncoderBytes</span>(&amp;b, &amp;mh)
    err = enc.<span class="pl-c1">Encode</span>(v)

    <span class="pl-c">//RPC Server</span>
    <span class="pl-k">go</span> <span class="pl-k">func</span>() {
        <span class="pl-k">for</span> {
            <span class="pl-smi">conn</span>, <span class="pl-smi">err</span> <span class="pl-k">:=</span> listener.<span class="pl-c1">Accept</span>()
            <span class="pl-smi">rpcCodec</span> <span class="pl-k">:=</span> codec.<span class="pl-smi">GoRpc</span>.<span class="pl-c1">ServerCodec</span>(conn, h)
            <span class="pl-c">//OR rpcCodec := codec.MsgpackSpecRpc.ServerCodec(conn, h)</span>
            rpc.<span class="pl-c1">ServeCodec</span>(rpcCodec)
        }
    }()

    <span class="pl-c">//RPC Communication (client side)</span>
    conn, err = net.<span class="pl-c1">Dial</span>(<span class="pl-s"><span class="pl-pds">"</span>tcp<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>localhost:5555<span class="pl-pds">"</span></span>)
    <span class="pl-smi">rpcCodec</span> <span class="pl-k">:=</span> codec.<span class="pl-smi">GoRpc</span>.<span class="pl-c1">ClientCodec</span>(conn, h)
    <span class="pl-c">//OR rpcCodec := codec.MsgpackSpecRpc.ClientCodec(conn, h)</span>
    <span class="pl-smi">client</span> <span class="pl-k">:=</span> rpc.<span class="pl-c1">NewClientWithCodec</span>(rpcCodec)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-suzukaze-mruby-msgpack" class="qs"><h4><a href="MessagePack for mruby" target="_blank">suzukaze/mruby-msgpack <span class="qs-url">MessagePack for mruby</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-mruby-msgpack---" class="anchor" href="#mruby-msgpack---" aria-hidden="true"><span class="octicon octicon-link"></span></a>mruby-msgpack   <a href="https://travis-ci.org/suzukaze/mruby-msgpack"><img src="https://camo.githubusercontent.com/363e4c78a037f69c0b697b36f5e213eaf4497681/68747470733a2f2f7472617669732d63692e6f72672f73757a756b617a652f6d727562792d6d73677061636b2e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/suzukaze/mruby-msgpack.png?branch=master" style="max-width:100%;"></a>
</h5>

<h6>
<a id="user-content-welcome-to-messagepack-for-mruby" class="anchor" href="#welcome-to-messagepack-for-mruby" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to MessagePack for mruby</h6>

<p>MessagePack for mruby is MessagePack implimented in mruby language.</p>

<div class="highlight highlight-source-ruby"><pre>msg <span class="pl-k">=</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>].to_msgpack  <span class="pl-c">#=&gt; "\x93\x01\x02\x03"</span>
<span class="pl-c1">MessagePack</span>.unpack(msg)     <span class="pl-c">#=&gt; [1, 2, 3]</span></pre></div>

<p>This is early vesion. Please check the methods that work in test foloder.</p>

<h6>
<a id="user-content-platform" class="anchor" href="#platform" aria-hidden="true"><span class="octicon octicon-link"></span></a>Platform</h6>

<p>I test MessagePack for mruby in mac OSX 10.8.4. In the future it will work in Windows and Linux OS.</p>

<h6>
<a id="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h6>

<ol>
<li>
<p>Download MessagePack for mruby at the command prompt:</p>

<pre><code>git clone https://github.com/suzukaze/mruby-msgpack.git
</code></pre>
</li>
<li><p>Add config.gem line to <code>build_config.rb</code></p></li>
</ol>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c1">MRuby</span>::<span class="pl-c1">Build</span>.<span class="pl-k">new</span> <span class="pl-k">do </span>|<span class="pl-smi">conf</span>|

  <span class="pl-c"># ...(snip)...</span>
  conf.<span class="pl-k">gem</span> <span class="pl-c1">:git</span> =&gt; <span class="pl-s"><span class="pl-pds">'</span>https://github.com/suzukaze/mruby-msgpack.git<span class="pl-pds">'</span></span>
<span class="pl-k">end</span></pre></div>

<ol>
<li>
<p>Test at the command prompt:</p>

<pre><code>rake test
</code></pre>
</li>
<li>
<p>Build at the command prompt:</p>

<pre><code>rake
</code></pre>
</li>
</ol>

<h6>
<a id="user-content-msgpack-ruby-commit" class="anchor" href="#msgpack-ruby-commit" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-ruby commit</h6>

<p>mruby-msgpack is based on <a href="https://github.com/msgpack/msgpack-ruby">msgpack-ruby</a>(<code>a7c2dc34ef69c9132167e38009baa8420c460c9b</code>)</p>

<h6>
<a id="user-content-contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h6>

<p>I encourage you to contribute to MessagePack for mruby!</p>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>Author : Jun Hiroe</p>

<p>Copyrigh : Copyright (c) 2013 Jun Hiroe</p>

<p>License : MIT License</p>
</article>
  </div>
        </div>
        
        <div id="qs-lexmag-msgpax" class="qs"><h4><a href="https://github.com/lexmag/msgpax" target="_blank">lexmag/msgpax <span class="qs-url">https://github.com/lexmag/msgpax</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpax-" class="anchor" href="#msgpax-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Msgpax <a href="https://travis-ci.org/lexmag/msgpax"><img src="https://camo.githubusercontent.com/578c5f36cb5d8f123825ff693fc781f1dccfcff6/68747470733a2f2f7472617669732d63692e6f72672f6c65786d61672f6d73677061782e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/lexmag/msgpax.svg" style="max-width:100%;"></a>
</h5>

<p>This library provides an API for serializing and de-serializing Elixir terms using the <a href="http://msgpack.org/">MessagePack</a> format.</p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>Add Msgpax as a dependency in your <code>mix.exs</code> file:</p>

<div class="highlight highlight-source-elixir"><pre><span class="pl-k">def</span> <span class="pl-en">deps</span> <span class="pl-k">do</span>
  [{<span class="pl-c1">:msgpax</span>, <span class="pl-s"><span class="pl-pds">"</span>~&gt; 0.8<span class="pl-pds">"</span></span>}]
<span class="pl-k">end</span></pre></div>

<p>After you are done, run <code>mix deps.get</code> in your shell to fetch the dependencies.</p>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<div class="highlight highlight-source-elixir"><pre>{<span class="pl-c1">:ok</span>, iodata} <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.pack([<span class="pl-c1">300</span>, <span class="pl-s"><span class="pl-pds">"</span>Spartans<span class="pl-pds">"</span></span>])
<span class="pl-c"># =&gt; {:ok, [&lt;&lt;146&gt;&gt;, [&lt;&lt;205, 1, 44&gt;&gt;, [&lt;&lt;168&gt;&gt;, "Spartans"]]]}</span>
iodata <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.pack!([<span class="pl-c1">300</span>, <span class="pl-s"><span class="pl-pds">"</span>Spartans<span class="pl-pds">"</span></span>])
<span class="pl-c"># ...</span>
{<span class="pl-c1">:ok</span>, term} <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.unpack(iodata)
<span class="pl-c"># =&gt; {:ok, [300, "Spartans"]}</span>
term <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.unpack!(iodata)
<span class="pl-c"># =&gt; [300, "Spartans"]</span></pre></div>

<h8>
<a id="user-content-stream-oriented-deserialization" class="anchor" href="#stream-oriented-deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stream-oriented deserialization</h8>

<div class="highlight highlight-source-elixir"><pre>{term1, rest} <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.unpack_slice!(buffer)
<span class="pl-c"># =&gt; {[1,2,3], &lt;&lt;4&gt;&gt;}</span>
{<span class="pl-c1">:ok</span>, term2, rest} <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.unpack_slice(rest)
<span class="pl-c"># =&gt; {:ok, 4, ""}</span></pre></div>

<h8>
<a id="user-content-binary-type" class="anchor" href="#binary-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary type</h8>

<div class="highlight highlight-source-elixir"><pre>msgbin <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.<span class="pl-c1">Bin</span>.new(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">3</span>, <span class="pl-c1">18</span>, <span class="pl-c1">122</span>, <span class="pl-c1">27</span>, <span class="pl-c1">115</span><span class="pl-k">&gt;&gt;</span>)
<span class="pl-c"># =&gt; #Msgpax.Bin&lt;&lt;&lt;3, 18, 122, 27, 115&gt;&gt;&gt;</span>
iodata <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.pack!(msgbin)
<span class="pl-c"># =&gt; [&lt;&lt;196, 5&gt;&gt;, &lt;&lt;3, 18, 122, 27, 115&gt;&gt;]</span>
<span class="pl-c"># ...</span>
code <span class="pl-k">=</span> <span class="pl-c1">Msgpax</span>.unpack!(iodata, %{<span class="pl-c1">binary:</span> <span class="pl-c1">true</span>})
<span class="pl-c"># =&gt; #Msgpax.Bin&lt;&lt;&lt;3, 18, 122, 27, 115&gt;&gt;&gt;</span></pre></div>

<h8>
<a id="user-content-extension-type" class="anchor" href="#extension-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extension type</h8>

<p>See <a href="/lexmag/msgpax/blob/master/test/msgpax/ext_test.exs"><code>ext_test.exs</code></a>
file for more information and usage examples.</p>

<h8>
<a id="user-content-packer-protocol-deriving" class="anchor" href="#packer-protocol-deriving" aria-hidden="true"><span class="octicon octicon-link"></span></a>Packer protocol deriving</h8>

<div class="highlight highlight-source-elixir"><pre><span class="pl-k">defmodule</span> <span class="pl-en">User</span> <span class="pl-k">do</span>
  <span class="pl-smi">@derive</span> [<span class="pl-c1">Msgpax</span>.<span class="pl-c1">Packer</span>]
  <span class="pl-k">defstruct</span> [<span class="pl-c1">:name</span>]
<span class="pl-k">end</span>

<span class="pl-c1">Msgpax</span>.pack!(%<span class="pl-c1">User</span>{<span class="pl-c1">name:</span> <span class="pl-s"><span class="pl-pds">"</span>Lex<span class="pl-pds">"</span></span>})
<span class="pl-c"># =&gt; [&lt;&lt;129&gt;&gt;, [[[&lt;&lt;164&gt;&gt;, "name"], [&lt;&lt;163&gt;&gt;, "Lex"]]]]</span></pre></div>

<h6>
<a id="user-content-data-conversion" class="anchor" href="#data-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data conversion</h6>

<table>
<thead>
<tr>
<th>Elixir</th>
<th>MessagePack</th>
<th>Elixir</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nil</code></td>
<td>nil</td>
<td><code>nil</code></td>
</tr>
<tr>
<td><code>true</code></td>
<td>boolean</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>false</code></td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>-1</code></td>
<td>integer</td>
<td><code>-1</code></td>
</tr>
<tr>
<td><code>1.25</code></td>
<td>float</td>
<td><code>1.25</code></td>
</tr>
<tr>
<td><code>:ok</code></td>
<td>string</td>
<td><code>"ok"</code></td>
</tr>
<tr>
<td><code>Atom</code></td>
<td>string</td>
<td><code>"Elixir.Atom"</code></td>
</tr>
<tr>
<td><code>"str"</code></td>
<td>string</td>
<td><code>"str"</code></td>
</tr>
<tr>
<td><code>"\xFF\xFF"</code></td>
<td>string</td>
<td><code>"\xFF\xFF"</code></td>
</tr>
<tr>
<td><code>#Msgpax.Bin&lt;"\xFF"&gt;</code></td>
<td>binary</td>
<td><code>"\xFF"</code></td>
</tr>
<tr>
<td><code>%{foo: "bar"}</code></td>
<td>map</td>
<td><code>%{"foo" =&gt; "bar"}</code></td>
</tr>
<tr>
<td><code>[foo: "bar"]</code></td>
<td>map</td>
<td><code>%{"foo" =&gt; "bar"}</code></td>
</tr>
<tr>
<td><code>[1, true]</code></td>
<td>array</td>
<td><code>[1, true]</code></td>
</tr>
<tr>
<td><code>#Msgpax.Ext&lt;4, "02:12"&gt;</code></td>
<td>extension</td>
<td><code>#Msgpax.Ext&lt;4, "02:12"&gt;</code></td>
</tr>
</tbody>
</table>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>This software is licensed under <a href="/lexmag/msgpax/blob/master/LICENSE">the ISC license</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-jingweno-msgpack_rails" class="qs"><h4><a href="https://github.com/jingweno/msgpack_rails" target="_blank">jingweno/msgpack_rails <span class="qs-url">https://github.com/jingweno/msgpack_rails</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-rails-" class="anchor" href="#messagepack-for-rails-" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Rails <a href="https://travis-ci.org/jingweno/msgpack_rails"><img src="https://camo.githubusercontent.com/df08185f44e63a7de541fc5fc107a7a0da0f943d/68747470733a2f2f7472617669732d63692e6f72672f6a696e6777656e6f2f6d73677061636b5f7261696c732e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jingweno/msgpack_rails.png?branch=master" style="max-width:100%;"></a>
</h5>

<p>The Rails way to serialize/deserialize objects with <a href="http://msgpack.org">Message Pack</a>.
It implements the <a href="http://rubygems.org/gems/activesupport">ActiveSupport</a> <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activesupport/message_pack/encoding.rb">encoder</a> &amp; <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activesupport/message_pack/decoding.rb">decoder</a> and the <a href="http://rubygems.org/gems/activemodel">ActiveModel</a> <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activemodel/serializers/message_pack.rb">serializer</a> for Message Pack.</p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>Add this line to your application's Gemfile:</p>

<pre><code>gem 'msgpack_rails'
</code></pre>

<p>And then execute:</p>

<pre><code>$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre><code>$ gem install msgpack_rails
</code></pre>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<p><code>msgpack_rails</code> converts data type using <code>as_json</code> before feeding it into <a href="http://rubygems.org/gems/msgpack">msgpack</a>.
Here are a few examples:</p>

<pre><code>$ ActiveSupport::MessagePack.encode(:a =&gt; :b)
=&gt; "\x81\xA1a\xA1b"

$ ActiveSupport::MessagePack.encode(Time.now)
=&gt; "\xB92013-09-11T10:40:39-07:00"

$ Time.now.as_msgpack
=&gt; "2013-09-11T10:48:13-07:00"

$ Time.now.to_msgpack
=&gt; "\xB92013-09-11T10:40:39-07:00"

$ ActiveSupport::MessagePack.decode Time.now.to_msgpack
=&gt; "2013-09-11T11:23:07-07:00"

# After setting ActiveSupport.parse_msgpack_times to true
$ ActiveSupport::MessagePack.decode Time.now.to_msgpack
=&gt; Wed, 11 Sep 2013 11:25:18 -0700
</code></pre>

<p>You can also use it as part of <code>ActiveModel</code>, similar to <code>to_json</code>:</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">Contact</span>
  <span class="pl-k">include</span> <span class="pl-c1">ActiveModel</span>::<span class="pl-c1">Serializers</span>::<span class="pl-c1">MessagePack</span>

  ...
<span class="pl-k">end</span>

<span class="pl-smi">@contact</span> <span class="pl-k">=</span> <span class="pl-c1">Contact</span>.<span class="pl-k">new</span>
<span class="pl-smi">@contact</span>.name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Owen Ou<span class="pl-pds">'</span></span>
<span class="pl-smi">@contact</span>.age <span class="pl-k">=</span> <span class="pl-c1">28</span>
<span class="pl-smi">@contact</span>.created_at <span class="pl-k">=</span> <span class="pl-c1">Time</span>.utc(<span class="pl-c1">2006</span>, <span class="pl-c1">8</span>, <span class="pl-c1">1</span>)
<span class="pl-smi">@contact</span>.awesome <span class="pl-k">=</span> <span class="pl-c1">true</span>
<span class="pl-smi">@contact</span>.preferences <span class="pl-k">=</span> { <span class="pl-s"><span class="pl-pds">'</span>shows<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">'</span>anime<span class="pl-pds">'</span></span> }

<span class="pl-smi">@contact</span>.to_msgpack                <span class="pl-c"># =&gt; msgpack output</span>
<span class="pl-smi">@contact</span>.to_msgpack(<span class="pl-c1">:root</span> =&gt; <span class="pl-c1">true</span>) <span class="pl-c"># =&gt; include root in msgpack output</span></pre></div>

<h6>
<a id="user-content-contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h6>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
</article>
  </div>
        </div>
        
        <div id="qs-vsergeev-u-msgpack-python" class="qs"><h4><a href="https://github.com/vsergeev/u-msgpack-python" target="_blank">vsergeev/u-msgpack-python <span class="qs-url">https://github.com/vsergeev/u-msgpack-python</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-u-msgpack-python-v21" class="anchor" href="#u-msgpack-python-v21" aria-hidden="true"><span class="octicon octicon-link"></span></a>u-msgpack-python v2.1</h5>

<p>u-msgpack-python is a lightweight <a href="http://msgpack.org/">MessagePack</a> serializer and deserializer module written in pure Python, compatible with both Python 2 and 3, as well CPython and PyPy implementations of Python. u-msgpack-python is fully compliant with the latest <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a>.</p>

<p>u-msgpack-python is currently distributed on PyPI: <a href="https://pypi.python.org/pypi/u-msgpack-python">https://pypi.python.org/pypi/u-msgpack-python</a> and as a single file: <a href="https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py">umsgpack.py</a></p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>With pip:</p>

<pre lang="text"><code>$ pip install u-msgpack-python
</code></pre>

<p>With easy_install:</p>

<pre lang="text"><code>$ easy_install u-msgpack-python
</code></pre>

<p>or simply drop <a href="https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py">umsgpack.py</a> into your project!</p>

<pre lang="text"><code>$ wget https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py
</code></pre>

<h6>
<a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h6>

<p>Basic Example:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;&gt;</span> <span class="pl-k">import</span> umsgpack
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.packb({<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>})
<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\x82</span>\xa7compact\xc3\xa6schema<span class="pl-cce">\x00</span><span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.unpackb(_)
{<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>compact<span class="pl-pds">'</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>schema<span class="pl-pds">'</span></span>: <span class="pl-c1">0</span>}
<span class="pl-k">&gt;&gt;&gt;</span> </pre></div>

<p>A more complicated example:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;&gt;</span> umsgpack.packb(
        [<span class="pl-c1">1</span>, <span class="pl-c1">True</span>, <span class="pl-c1">False</span>, <span class="pl-c1">0x</span>ffffffff, {<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>: b<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\x80\x01\x02</span><span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>: [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>, {<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>: [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,{}]}]}, <span class="pl-k">-</span><span class="pl-c1">1</span>, <span class="pl-c1">2.12345</span>] )
<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\x97\x01</span>\xc3\xc2\xce\xff\xff\xff\xff<span class="pl-cce">\x82</span>\xa3foo\xc4<span class="pl-cce">\x03\x80\x01</span><span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\x02</span>\xa3bar<span class="pl-cce">\x94\x01\x02\x03\x81</span>\xa1a<span class="pl-cce">\x94\x01\x02\x03\x80</span>\xff\xcb<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">'</span>@<span class="pl-cce">\x00</span>\xfc\xd3Z<span class="pl-cce">\x85\x87\x94</span><span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.unpackb(_)
[<span class="pl-c1">1</span>, <span class="pl-c1">True</span>, <span class="pl-c1">False</span>, <span class="pl-c1">4294967295</span>, {<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\x80\x01\x02</span><span class="pl-pds">'</span></span>,
 <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>: [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, {<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>: [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, {}]}]}, <span class="pl-k">-</span><span class="pl-c1">1</span>, <span class="pl-c1">2.12345</span>]
<span class="pl-k">&gt;&gt;&gt;</span> </pre></div>

<p>Streaming serialization with file-like objects:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;&gt;</span> f <span class="pl-k">=</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>test.bin<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>w<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.pack({<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>}, f)
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.pack([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>], f)
<span class="pl-k">&gt;&gt;&gt;</span> f.close()
<span class="pl-k">&gt;&gt;&gt;</span> 
<span class="pl-k">&gt;&gt;&gt;</span> f <span class="pl-k">=</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>test.bin<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.unpack(f)
{<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>compact<span class="pl-pds">'</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>schema<span class="pl-pds">'</span></span>: <span class="pl-c1">0</span>}
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.unpack(f)
[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]
<span class="pl-k">&gt;&gt;&gt;</span> f.close()
<span class="pl-k">&gt;&gt;&gt;</span> </pre></div>

<p>Encoding and decoding an application-defined ext type:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;&gt;</span> <span class="pl-c"># Create an Ext object with type 0x05 and data b"\x01\x02\x03"</span>
... foo <span class="pl-k">=</span> umsgpack.Ext(<span class="pl-c1">0x</span>05, b<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\x01\x02\x03</span><span class="pl-pds">"</span></span>)
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.packb({<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>special stuff<span class="pl-pds">"</span></span>: foo, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>awesome<span class="pl-pds">"</span></span>: <span class="pl-c1">True</span>})
b<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\x82</span>\xadspecial stuff\xc7<span class="pl-cce">\x03\x05\x01\x02\x03</span>\xa7awesome\xc3<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;&gt;</span> bar <span class="pl-k">=</span> umsgpack.unpackb(_)
<span class="pl-k">&gt;&gt;&gt;</span> <span class="pl-k">print</span>(bar[<span class="pl-s"><span class="pl-pds">"</span>special stuff<span class="pl-pds">"</span></span>])
Ext Object (Type: <span class="pl-c1">0x</span>05, Data: <span class="pl-c1">01</span> <span class="pl-c1">02</span> <span class="pl-c1">03</span>)
<span class="pl-k">&gt;&gt;&gt;</span> bar[<span class="pl-s"><span class="pl-pds">"</span>special stuff<span class="pl-pds">"</span></span>].type
<span class="pl-c1">5</span>
<span class="pl-k">&gt;&gt;&gt;</span> bar[<span class="pl-s"><span class="pl-pds">"</span>special stuff<span class="pl-pds">"</span></span>].data
b<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\x01\x02\x03</span><span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;&gt;</span> </pre></div>

<p>Python standard library style names <code>dump</code>, <code>dumps</code>, <code>load</code>, <code>loads</code> are also
available:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;&gt;</span> <span class="pl-k">import</span> umsgpack
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.dumps({<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>})
<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\x82</span>\xa7compact\xc3\xa6schema<span class="pl-cce">\x00</span><span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.loads(_)
{<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>compact<span class="pl-pds">'</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>schema<span class="pl-pds">'</span></span>: <span class="pl-c1">0</span>}
<span class="pl-k">&gt;&gt;&gt;</span> 
<span class="pl-k">&gt;&gt;&gt;</span> f <span class="pl-k">=</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>test.bin<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>w<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.dump({<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>}, f)
<span class="pl-k">&gt;&gt;&gt;</span> f.close()
<span class="pl-k">&gt;&gt;&gt;</span> 
<span class="pl-k">&gt;&gt;&gt;</span> f <span class="pl-k">=</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>test.bin<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;&gt;</span> umsgpack.load(f)
{<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>compact<span class="pl-pds">'</span></span>: <span class="pl-c1">True</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>schema<span class="pl-pds">'</span></span>: <span class="pl-c1">0</span>}
<span class="pl-k">&gt;&gt;&gt;</span> </pre></div>

<h6>
<a id="user-content-more-information" class="anchor" href="#more-information" aria-hidden="true"><span class="octicon octicon-link"></span></a>More Information</h6>

<p>See the <a href="https://github.com/vsergeev/u-msgpack-python">project page</a> for more information on old specification compatibility mode, exceptions, behavior, and testing.</p>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>u-msgpack-python is MIT licensed. See the included <code>LICENSE</code> file for more details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-kmsquire-MsgPack-jl" class="qs"><h4><a href="https://github.com/kmsquire/MsgPack.jl" target="_blank">kmsquire/MsgPack.jl <span class="qs-url">https://github.com/kmsquire/MsgPack.jl</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack" class="anchor" href="#msgpack" aria-hidden="true"><span class="octicon octicon-link"></span></a>MsgPack</h5>

<p><a href="https://travis-ci.org/kmsquire/MsgPack.jl"><img src="https://camo.githubusercontent.com/8a2893a403c22c2fa53ef926fa2a63aecff17e69/68747470733a2f2f7472617669732d63692e6f72672f6b6d7371756972652f4d73675061636b2e6a6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kmsquire/MsgPack.jl.svg?branch=master" style="max-width:100%;"></a></p>

<p>Provides basic support for the <a href="http://msgpack.org">msgpack</a> format.</p>

<pre><code>julia&gt; import MsgPack

julia&gt; MsgPack.pack("hi")
3-element Array{Uint8,1}:
 0xa2
 0x68
 0x69

julia&gt; a = MsgPack.pack([1,2,"hi"])
6-element Array{Uint8,1}:
 0x93
 0x01
 0x02
 0xa2
 0x68
 0x69

julia&gt; MsgPack.unpack(MsgPack.pack(4.5))
4.5

julia&gt; f = open("in.mp")
julia&gt; MsgPack.unpack(f)
"hello"

julia&gt; f2 = open("out.mp", "w")
julia&gt; MsgPack.pack(f2, [1,2,"hi"])



</code></pre>

<p>NOTE: The standard method for encoding integers in msgpack is to use the most compact representation possible, and to encode negative integers as signed ints and non-negative numbers as unsigned ints.</p>

<p>For compatibility with other implementations, I'm following this convention.  On the unpacking side, every integer type becomes an Int64 in Julia, unless it doesn't fit (ie. values greater than 2^63 are unpacked as Uint64).</p>

<p>I might change this at some point, and/or provide a way to control the unpacked types.</p>

<h7>
<a id="user-content-the-extension-type" class="anchor" href="#the-extension-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Extension Type</h7>

<p>The MsgPack spec <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#formats-ext">defines</a> the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#types-extension-type">extension type</a> to be a tuple of <code>(typecode, bytearray)</code> where <code>typecode</code> is an application-specific identifier for the data in <code>bytearray</code>. MsgPack.jl provides support for the extension type through the <code>Ext</code> immutable.</p>

<p>It is defined like so</p>

<div class="highlight highlight-source-julia"><pre><span class="pl-k">immutable</span> <span class="pl-en">Ext</span>
    typecode<span class="pl-c1">::Int8</span>
    data<span class="pl-c1">::Vector{Uint8}</span>
<span class="pl-k">end</span></pre></div>

<p>and used like this</p>

<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> a <span class="pl-k">=</span> [<span class="pl-c1">0x34</span>, <span class="pl-c1">0xff</span>, <span class="pl-c1">0x76</span>, <span class="pl-c1">0x22</span>, <span class="pl-c1">0xd3</span>, <span class="pl-c1">0xab</span>]
<span class="pl-c1">6</span><span class="pl-k">-</span>element Array{UInt8,<span class="pl-c1">1</span>}<span class="pl-k">:</span>
 <span class="pl-c1">0x34</span>
 <span class="pl-c1">0xff</span>
 <span class="pl-c1">0x76</span>
 <span class="pl-c1">0x22</span>
 <span class="pl-c1">0xd3</span>
 <span class="pl-c1">0xab</span>

julia<span class="pl-k">&gt;</span> b <span class="pl-k">=</span> <span class="pl-c1">Ext</span>(<span class="pl-c1">22</span>, a)
MsgPack<span class="pl-k">.</span><span class="pl-c1">Ext</span>(<span class="pl-c1">22</span>,UInt8[<span class="pl-c1">0x34</span>,<span class="pl-c1">0xff</span>,<span class="pl-c1">0x76</span>,<span class="pl-c1">0x22</span>,<span class="pl-c1">0xd3</span>,<span class="pl-c1">0xab</span>])

julia<span class="pl-k">&gt;</span> p <span class="pl-k">=</span> <span class="pl-c1">pack</span>(b)
<span class="pl-c1">9</span><span class="pl-k">-</span>element Array{UInt8,<span class="pl-c1">1</span>}<span class="pl-k">:</span>
 <span class="pl-c1">0xc7</span>
 <span class="pl-c1">0x06</span>
 <span class="pl-c1">0x16</span>
 <span class="pl-c1">0x34</span>
 <span class="pl-c1">0xff</span>
 <span class="pl-c1">0x76</span>
 <span class="pl-c1">0x22</span>
 <span class="pl-c1">0xd3</span>
 <span class="pl-c1">0xab</span>

julia<span class="pl-k">&gt;</span> c <span class="pl-k">=</span> <span class="pl-c1">unpack</span>(p)
MsgPack<span class="pl-k">.</span><span class="pl-c1">Ext</span>(<span class="pl-c1">22</span>,UInt8[<span class="pl-c1">0x34</span>,<span class="pl-c1">0xff</span>,<span class="pl-c1">0x76</span>,<span class="pl-c1">0x22</span>,<span class="pl-c1">0xd3</span>,<span class="pl-c1">0xab</span>])

julia<span class="pl-k">&gt;</span> c <span class="pl-k">==</span> b
<span class="pl-c1">true</span></pre></div>

<p>MsgPack reserves typecodes in the range <code>[-128, -1]</code> for future types specified by the MsgPack spec. MsgPack.jl enforces this when creating an <code>Ext</code> but if you are packing an implementation defined extension type (currently there are none) you can pass <code>impltype=true</code>.</p>

<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">Ext</span>(<span class="pl-k">-</span><span class="pl-c1">43</span>, Uint8[<span class="pl-c1">1</span>, <span class="pl-c1">5</span>, <span class="pl-c1">3</span>, <span class="pl-c1">9</span>])
ERROR<span class="pl-k">:</span> MsgPack Ext typecode <span class="pl-k">-</span><span class="pl-c1">128</span> through <span class="pl-k">-</span><span class="pl-c1">1</span> reserved by implementation
 <span class="pl-k">in</span> call at <span class="pl-k">/</span>Users<span class="pl-k">/</span>sean<span class="pl-k">/</span><span class="pl-k">.</span>julia<span class="pl-k">/</span>v0<span class="pl-c1">.4</span><span class="pl-k">/</span>MsgPack<span class="pl-k">/</span>src<span class="pl-k">/</span>MsgPack<span class="pl-k">.</span>jl<span class="pl-k">:</span><span class="pl-c1">48</span> 

julia<span class="pl-k">&gt;</span> <span class="pl-c1">Ext</span>(<span class="pl-k">-</span><span class="pl-c1">43</span>, Uint8[<span class="pl-c1">1</span>, <span class="pl-c1">5</span>, <span class="pl-c1">3</span>, <span class="pl-c1">9</span>], impltype<span class="pl-k">=</span><span class="pl-c1">true</span>)
MsgPack<span class="pl-k">.</span><span class="pl-c1">Ext</span>(<span class="pl-k">-</span><span class="pl-c1">43</span>,UInt8[<span class="pl-c1">0x01</span>,<span class="pl-c1">0x05</span>,<span class="pl-c1">0x03</span>,<span class="pl-c1">0x09</span>])</pre></div>

<h8>
<a id="user-content-serialization" class="anchor" href="#serialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Serialization</h8>

<p>MsgPack.jl also defines the <code>extserialize</code> and <code>extdeserialize</code> convenience functions. These functions can turn an arbitrary object into an <code>Ext</code> and vice-versa.</p>

<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">type</span> <span class="pl-en">Point</span>{T}
        x<span class="pl-c1">::T</span>
        y<span class="pl-c1">::T</span>
       <span class="pl-k">end</span>

julia<span class="pl-k">&gt;</span> r <span class="pl-k">=</span> <span class="pl-c1">Point</span>(<span class="pl-c1">2.5</span>, <span class="pl-c1">7.8</span>)
Point{Float64}(<span class="pl-c1">2.5</span>,<span class="pl-c1">7.8</span>)

julia<span class="pl-k">&gt;</span> e <span class="pl-k">=</span> MsgPack<span class="pl-k">.</span><span class="pl-c1">extserialize</span>(<span class="pl-c1">123</span>, r)
MsgPack<span class="pl-k">.</span><span class="pl-c1">Ext</span>(<span class="pl-c1">123</span>,UInt8[<span class="pl-c1">0x11</span>,<span class="pl-c1">0x01</span>,<span class="pl-c1">0x02</span>,<span class="pl-c1">0x05</span>,<span class="pl-c1">0x50</span>,<span class="pl-c1">0x6f</span>,<span class="pl-c1">0x69</span>,<span class="pl-c1">0x6e</span>,<span class="pl-c1">0x74</span>,<span class="pl-c1">0x23</span>  …  <span class="pl-c1">0x40</span>,<span class="pl-c1">0x0e</span>,<span class="pl-c1">0x33</span>,<span class="pl-c1">0x33</span>,<span class="pl-c1">0x33</span>,<span class="pl-c1">0x33</span>,<span class="pl-c1">0x33</span>,<span class="pl-c1">0x33</span>,<span class="pl-c1">0x1f</span>,<span class="pl-c1">0x40</span>])

julia<span class="pl-k">&gt;</span> s <span class="pl-k">=</span> MsgPack<span class="pl-k">.</span><span class="pl-c1">extdeserialize</span>(e)
(<span class="pl-c1">123</span>,Point{Float64}(<span class="pl-c1">2.5</span>,<span class="pl-c1">7.8</span>))

julia<span class="pl-k">&gt;</span> s[<span class="pl-c1">2</span>]
Point{Float64}(<span class="pl-c1">2.5</span>,<span class="pl-c1">7.8</span>)

julia<span class="pl-k">&gt;</span> r
Point{Float64}(<span class="pl-c1">2.5</span>,<span class="pl-c1">7.8</span>)</pre></div>

<p>Since these functions use <a href="http://docs.julialang.org/en/latest/stdlib/base/#Base.serialize"><code>serialize</code></a> under the hood they are subject to the following caveat.</p>

<blockquote>
<p>In general, this process will not work if the reading and writing are done by
different versions of Julia, or an instance of Julia with a different system
image.</p>
</blockquote>
</article>
  </div>
        </div>
        
        <div id="qs-tkob-mlmsgpack" class="qs"><h4><a href="https://github.com/tkob/mlmsgpack" target="_blank">tkob/mlmsgpack <span class="qs-url">https://github.com/tkob/mlmsgpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-ml-messagepack" class="anchor" href="#ml-messagepack" aria-hidden="true"><span class="octicon octicon-link"></span></a>ML-MessagePack</h5>

<p>MessagePack implementation for Standard ML (SML)</p>

<h6>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h6>

<ul>
<li>Portable: Depends only on the required components of the SML Basis Library specification.</li>
<li>Composable: Composable combinators for encoding and decoding.</li>
</ul>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<h8>
<a id="user-content-mlton-and-mlkit" class="anchor" href="#mlton-and-mlkit" aria-hidden="true"><span class="octicon octicon-link"></span></a>MLton and MLKit</h8>

<p>Include mlmsgpack.mlb in your MLB file.</p>

<h8>
<a id="user-content-polyml" class="anchor" href="#polyml" aria-hidden="true"><span class="octicon octicon-link"></span></a>Poly/ML</h8>

<p>From the interactive shell, use .sml files in the following order.</p>

<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>

<h8>
<a id="user-content-smlnj" class="anchor" href="#smlnj" aria-hidden="true"><span class="octicon octicon-link"></span></a>SML/NJ</h8>

<p>Use mlmsgpack.cm.</p>

<h8>
<a id="user-content-moscow-ml" class="anchor" href="#moscow-ml" aria-hidden="true"><span class="octicon octicon-link"></span></a>Moscow ML</h8>

<p>From the interactive shell, use .sml files in the following order.</p>

<ul>
<li>large.sml</li>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>

<p>Makefile.mosml is also provided.</p>

<h8>
<a id="user-content-hamlet" class="anchor" href="#hamlet" aria-hidden="true"><span class="octicon octicon-link"></span></a>HaMLet</h8>

<p>From the interactive shell, use .sml files in the following order.</p>

<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>

<h8>
<a id="user-content-alice-ml" class="anchor" href="#alice-ml" aria-hidden="true"><span class="octicon octicon-link"></span></a>Alice ML</h8>

<p>Makefile.alice is provided.</p>

<pre><code>make -f Makefile.alice
alicerun mlmsgpack-test
</code></pre>

<h8>
<a id="user-content-sml" class="anchor" href="#sml" aria-hidden="true"><span class="octicon octicon-link"></span></a>SML#</h8>

<p>For separate compilation, .smi files are provided. Require mlmsgpack.smi from your .smi file.</p>

<p>From the interactive shell, use .sml files in the following order.</p>

<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>

<h6>
<a id="user-content-tutorial" class="anchor" href="#tutorial" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tutorial</h6>

<p>See TUTORIAL.md.</p>

<h6>
<a id="user-content-known-problems" class="anchor" href="#known-problems" aria-hidden="true"><span class="octicon octicon-link"></span></a>Known Problems</h6>

<p>Our recommendation is MLton, MLKit, Poly/ML and SML#(&gt;=2.0.0) as all tests passed on them.
SML/NJ and Moscow ML are fine if you don't use real values.</p>

<h8>
<a id="user-content-smlnj-1" class="anchor" href="#smlnj-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>SML/NJ</h8>

<p>Packing real values fail or produces imprecise results in some cases.</p>

<h8>
<a id="user-content-moscow-ml-1" class="anchor" href="#moscow-ml-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Moscow ML</h8>

<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.</p>

<h8>
<a id="user-content-hamlet-1" class="anchor" href="#hamlet-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>HaMLet</h8>

<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.
Some functions are very slow, although they work properly. (We tested HaMLet compiled with MLton.)</p>

<h8>
<a id="user-content-alice-ml-1" class="anchor" href="#alice-ml-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Alice ML</h8>

<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.
Also, some unit tests fail.</p>

<h8>
<a id="user-content-sml-1" class="anchor" href="#sml-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>SML#</h8>

<p>Most functions do not work properly because of bugs of SML# prior to version 2.0.0.</p>

<h6>
<a id="user-content-see-also" class="anchor" href="#see-also" aria-hidden="true"><span class="octicon octicon-link"></span></a>See Also</h6>

<p>There already exists another MessagePack implemenatation for SML, 
called MsgPack-SML, which is targeted for MLton.</p>

<p><a href="https://msgpacksml.codeplex.com/">https://msgpacksml.codeplex.com/</a></p>

<p>ML-MessagePack is written from scratch and not a fork of MsgPack-SML.</p>

<p>For information on MessagePack, see:</p>

<p><a href="http://msgpack.org/">http://msgpack.org/</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-camgunz-cmp" class="qs"><h4><a href="https://github.com/camgunz/cmp" target="_blank">camgunz/cmp <span class="qs-url">https://github.com/camgunz/cmp</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-cmp" class="anchor" href="#cmp" aria-hidden="true"><span class="octicon octicon-link"></span></a>cmp</h5>

<p>CMP is a C implementation of the MessagePack serialization format.  It
currently implements version 5 of the <a href="http://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack
Spec</a>.</p>

<p>CMP's goal is to be lightweight and straightforward, forcing nothing on the
programmer.</p>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>While I'm a big believer in the GPL, I license CMP under the MIT license.</p>

<h6>
<a id="user-content-example-usage" class="anchor" href="#example-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Usage</h6>

<p>The following examples use a file as the backend, and are modeled after the
examples included with the msgpack-c project.</p>

<div class="highlight highlight-source-c"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>stdbool.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>stdint.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>stdio.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>stdlib.h<span class="pl-pds">&gt;</span></span>

#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>cmp.h<span class="pl-pds">"</span></span>

<span class="pl-k">static</span> <span class="pl-k">bool</span> <span class="pl-en">read_bytes</span>(<span class="pl-k">void</span> *data, <span class="pl-c1">size_t</span> sz, <span class="pl-c1">FILE</span> *fh) {
    <span class="pl-k">return</span> <span class="pl-c1">fread</span>(data, <span class="pl-k">sizeof</span>(<span class="pl-c1">uint8_t</span>), sz, fh) == (sz * <span class="pl-k">sizeof</span>(<span class="pl-c1">uint8_t</span>));
}

<span class="pl-k">static</span> <span class="pl-k">bool</span> <span class="pl-en">file_reader</span>(<span class="pl-c1">cmp_ctx_t</span> *ctx, <span class="pl-k">void</span> *data, <span class="pl-c1">size_t</span> limit) {
    <span class="pl-k">return</span> <span class="pl-c1">read_bytes</span>(data, limit, (<span class="pl-c1">FILE</span> *)ctx-&gt;buf);
}

<span class="pl-k">static</span> <span class="pl-c1">size_t</span> <span class="pl-en">file_writer</span>(<span class="pl-c1">cmp_ctx_t</span> *ctx, <span class="pl-k">const</span> <span class="pl-k">void</span> *data, <span class="pl-c1">size_t</span> count) {
    <span class="pl-k">return</span> <span class="pl-c1">fwrite</span>(data, <span class="pl-k">sizeof</span>(<span class="pl-c1">uint8_t</span>), count, (<span class="pl-c1">FILE</span> *)ctx-&gt;buf);
}

<span class="pl-k">void</span> <span class="pl-en">error_and_exit</span>(<span class="pl-k">const</span> <span class="pl-k">char</span> *msg) {
    <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">%s</span><span class="pl-cce">\n\n</span><span class="pl-pds">"</span></span>, msg);
    <span class="pl-c1">exit</span>(EXIT_FAILURE);
}

<span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">void</span>) {
    <span class="pl-c1">FILE</span> *fh = <span class="pl-c1">NULL</span>;
    <span class="pl-c1">cmp_ctx_t</span> cmp;
    <span class="pl-c1">uint32_t</span> array_size = <span class="pl-c1">0</span>;
    <span class="pl-c1">uint32_t</span> str_size = <span class="pl-c1">0</span>;
    <span class="pl-k">char</span> hello[<span class="pl-c1">6</span>] = {<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>};
    <span class="pl-k">char</span> message_pack[<span class="pl-c1">12</span>] = {<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>};

    fh = <span class="pl-c1">fopen</span>(<span class="pl-s"><span class="pl-pds">"</span>cmp_data.dat<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>w+b<span class="pl-pds">"</span></span>);

    <span class="pl-k">if</span> (fh == <span class="pl-c1">NULL</span>)
        <span class="pl-c1">error_and_exit</span>(<span class="pl-s"><span class="pl-pds">"</span>Error opening data.dat<span class="pl-pds">"</span></span>);

    <span class="pl-c1">cmp_init</span>(&amp;cmp, fh, file_reader, file_writer);

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_write_array</span>(&amp;cmp, <span class="pl-c1">2</span>))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_write_str</span>(&amp;cmp, <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span>))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_write_str</span>(&amp;cmp, <span class="pl-s"><span class="pl-pds">"</span>MessagePack<span class="pl-pds">"</span></span>, <span class="pl-c1">11</span>))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));

    <span class="pl-c1">rewind</span>(fh);

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_read_array</span>(&amp;cmp, &amp;array_size))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));

    <span class="pl-c">/* You can read the str byte size and then read str bytes... */</span>

    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_read_str_size</span>(&amp;cmp, &amp;str_size))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));

    <span class="pl-k">if</span> (str_size &gt; (<span class="pl-k">sizeof</span>(hello) - <span class="pl-c1">1</span>))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-s"><span class="pl-pds">"</span>Packed 'hello' length too long<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>);

    <span class="pl-k">if</span> (!<span class="pl-c1">read_bytes</span>(hello, str_size, fh))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));

    <span class="pl-c">/*</span>
<span class="pl-c">     * ...or you can set the maximum number of bytes to read and do it all in</span>
<span class="pl-c">     * one call</span>
<span class="pl-c">     */</span>

    str_size = <span class="pl-k">sizeof</span>(message_pack);
    <span class="pl-k">if</span> (!<span class="pl-c1">cmp_read_str</span>(&amp;cmp, message_pack, &amp;str_size))
        <span class="pl-c1">error_and_exit</span>(<span class="pl-c1">cmp_strerror</span>(&amp;cmp));

    <span class="pl-c1">printf</span>(<span class="pl-s"><span class="pl-pds">"</span>Array Length: <span class="pl-c1">%zu</span>.<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, array_size);
    <span class="pl-c1">printf</span>(<span class="pl-s"><span class="pl-pds">"</span>[<span class="pl-cce">\"</span><span class="pl-c1">%s</span><span class="pl-cce">\"</span>, <span class="pl-cce">\"</span><span class="pl-c1">%s</span><span class="pl-cce">\"</span>]<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, hello, message_pack);

    <span class="pl-c1">fclose</span>(fh);

    <span class="pl-k">return</span> EXIT_SUCCESS;
}</pre></div>

<h6>
<a id="user-content-advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced Usage</h6>

<p>See the <code>examples</code> folder.</p>

<h6>
<a id="user-content-fast-lightweight-flexible-and-robust" class="anchor" href="#fast-lightweight-flexible-and-robust" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fast, Lightweight, Flexible, and Robust</h6>

<p>CMP uses no internal buffers; conversions, encoding and decoding are done on
the fly.</p>

<p>CMP's source and header file together are ~3,300 LOC.</p>

<p>CMP makes no heap allocations.</p>

<p>CMP uses standardized types rather than declaring its own, and it depends only
on <code>stdbool.h</code>, <code>stdint.h</code> and <code>string.h</code>.  It has no link-time dependencies,
not even the C Standard Library.</p>

<p>CMP is written using C89 (ANSI C), aside, of course, from its use of
fixed-width integer types and <code>bool</code>.</p>

<p>On the other hand, CMP's test suite depends upon the C Standard Library and
requires C99.</p>

<p>CMP only requires the programmer supply a read function and a write function.
In this way, the programmer can use CMP on memory, files, sockets, etc.</p>

<p>CMP is portable.  It uses fixed-width integer types, and checks the endianness
of the machine at runtime before swapping bytes (MessagePack is big-endian).</p>

<p>CMP provides a fairly comprehensive error reporting mechanism modeled after
<code>errno</code> and <code>strerror</code>.</p>

<p>CMP is threadsafe; while contexts cannot be shared between threads, each thread
may use its own context freely.</p>

<p>CMP is tested using the MessagePack test suite as well as a large set of custom
test cases.  Its small test program is compiled with clang using <code>-Wall -Werror
-Wextra ...</code> along with several other flags, and generates no compilation
errors.</p>

<p>CMP's source is written as readably as possible, using explicit, descriptive
variable names and a consistent, clear style.</p>

<p>CMP's source is written to be as secure as possible.  Its testing suite checks
for invalid values, and data is always treated as suspect before it passes
validation.</p>

<p>CMP's API is designed to be clear, convenient and unsurprising.  Strings are
null-terminated, binary data is not, error codes are clear, and so on.</p>

<p>CMP provides optional backwards compatibility for use with other MessagePack
implementations that only implement version 4 of the spec.</p>

<h6>
<a id="user-content-building" class="anchor" href="#building" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building</h6>

<p>There is no build system for CMP.  The programmer can drop <code>cmp.c</code> and <code>cmp.h</code>
in their source tree and modify as necessary.  No special compiler settings are
required to build it, and it generates no compilation errors in either clang or
gcc.</p>

<h6>
<a id="user-content-backwards-compatibility" class="anchor" href="#backwards-compatibility" aria-hidden="true"><span class="octicon octicon-link"></span></a>Backwards Compatibility</h6>

<p>Version 4 of the MessagePack spec has no <code>BIN</code> type, and provides no <code>STR8</code>
marker.  In order to remain backwards compatible with version 4 of MessagePack,
do the following:</p>

<p>Avoid these functions:</p>

<ul>
<li><code>cmp_write_bin</code></li>
<li><code>cmp_write_bin_marker</code></li>
<li><code>cmp_write_str8_marker</code></li>
<li><code>cmp_write_str8</code></li>
<li><code>cmp_write_bin8_marker</code></li>
<li><code>cmp_write_bin8</code></li>
<li><code>cmp_write_bin16_marker</code></li>
<li><code>cmp_write_bin16</code></li>
<li><code>cmp_write_bin32_marker</code></li>
<li><code>cmp_write_bin32</code></li>
</ul>

<p>Use these functions in lieu of their v5 counterparts:</p>

<ul>
<li>
<code>cmp_write_str_marker_v4</code> instead of <code>cmp_write_str_marker</code>
</li>
<li>
<code>cmp_write_str_v4</code> instead of <code>cmp_write_str</code>
</li>
<li>
<code>cmp_write_object_v4</code> instead of <code>cmp_write_object</code>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-danellis-dart-msgpack" class="qs"><h4><a href="https://github.com/danellis/dart-msgpack" target="_blank">danellis/dart-msgpack <span class="qs-url">https://github.com/danellis/dart-msgpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-dart-msgpack" class="anchor" href="#dart-msgpack" aria-hidden="true"><span class="octicon octicon-link"></span></a>dart-msgpack</h5>

<p>This is a very early release of my MessagePack library for Dart. Currently, message classes must be written by hand. For example:</p>

<div class="highlight highlight-source-dart"><pre><span class="pl-k">class</span> NotificationFrame <span class="pl-k">extends</span> Message {
    <span class="pl-k">String</span> kind;
    <span class="pl-k">Map</span><span class="pl-k">&lt;</span><span class="pl-k">String</span>, Object<span class="pl-k">&gt;</span> data;

    NotificationFrame(<span class="pl-v">this</span>.kind, <span class="pl-v">this</span>.data);

    <span class="pl-k">static</span> NotificationFrame fromList(<span class="pl-k">List</span> f) <span class="pl-k">=</span><span class="pl-k">&gt;</span> <span class="pl-k">new</span> NotificationFrame(f[<span class="pl-c1">0</span>], f[<span class="pl-c1">1</span>]);
    <span class="pl-k">List</span> toList() <span class="pl-k">=</span><span class="pl-k">&gt;</span> [kind, data];
}</pre></div>

<p>For each class you need to define the <code>fromList</code> and <code>toList</code> methods, which convert from and to a list of fields respectively.</p>

<p>For example usage, see the unit tests.</p>
</article>
  </div>
        </div>
        
        <div id="qs-reeze-msgpack-hhvm" class="qs"><h4><a href="https://github.com/reeze/msgpack-hhvm" target="_blank">reeze/msgpack-hhvm <span class="qs-url">https://github.com/reeze/msgpack-hhvm</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-hhvm" class="anchor" href="#msgpack-hhvm" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-hhvm</h5>

<p>Build Status: <a href="http://travis-ci.org/reeze/msgpack-hhvm"><img src="https://camo.githubusercontent.com/049faf8e16a7430277c7604af979bfaab5fd5e3e/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f7265657a652f6d73677061636b2d6868766d2e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/reeze/msgpack-hhvm.png" style="max-width:100%;"></a></p>

<p>Msgpack for HHVM, It is a msgpack binding for HHVM</p>

<h5>
<a id="user-content-api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h5>

<ul>
<li>msgpack_pack(mixed $input) : string;
pack a input to msgpack, object and resource are not supported, array and other types supported,
false on failure.</li>
<li>msgpack_unpack(string $pac) : mixed;
unpack a msgpack.</li>
</ul>

<h5>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h5>

<div class="highlight highlight-source-shell"><pre>$ git clone https://github.com/reeze/msgpack-hhvm --depth=1
$ <span class="pl-c1">cd</span> msgpack-hhvm
$ hphpize <span class="pl-k">&amp;&amp;</span> cmake <span class="pl-c1">.</span> <span class="pl-k">&amp;&amp;</span> make
$ cp msgpack.so /path/to/your/hhvm/ext/dir</pre></div>

<p>If you don't have <code>hphpize</code> program, please intall package <code>hhvm-dev</code></p>

<div class="highlight highlight-source-shell"><pre>$ sudo apt-get install hhvm-dev</pre></div>

<h5>
<a id="user-content-contribution-and--issues" class="anchor" href="#contribution-and--issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contribution and  Issues</h5>

<p>Feel free to send Pull Requests for bug report at: <a href="http://github.com/reeze/msgpack-hhvm/issues">http://github.com/reeze/msgpack-hhvm/issues</a></p>

<h5>
<a id="user-content-authors" class="anchor" href="#authors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors</h5>

<ul>
<li>Reeze Xia <a href="mailto:reeze@php.net">reeze@php.net</a>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-Gab-km-msgpack-fsharp" class="qs"><h4><a href="https://github.com/Gab-km/msgpack-fsharp" target="_blank">Gab-km/msgpack-fsharp <span class="qs-url">https://github.com/Gab-km/msgpack-fsharp</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-f" class="anchor" href="#messagepack-for-f" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for F#</h5>
<a href="https://ci.appveyor.com/project/Gabkm/msgpack-fsharp"><img alt="Build status" src="https://camo.githubusercontent.com/4abfa86ee3c1757a0aa637a0e880fe82b962c1ad/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f71676871726c376e777139366176616c" data-canonical-src="https://ci.appveyor.com/api/projects/status/qghqrl7nwq96aval" style="max-width:100%;"></a>
<a name="user-content-what-is-this"></a>
<h6>
<a id="user-content-what-is-this" class="anchor" href="#what-is-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is this?</h6>
<p>MessagePack is a fast and compact binary serialization library.</p>
<p>MessagePack for F# is a MessagePack implementation of F#, by F#, for F#.</p>
<a name="user-content-usage"></a>
<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>
<div class="highlight highlight-source-fsharp"><pre><span class="pl-k">open</span> <span class="pl-en">MsgPack</span>

<span class="pl-k">[|</span> <span class="pl-c1">1</span>uy<span class="pl-k">;</span> <span class="pl-c1">2</span>uy<span class="pl-k">;</span> <span class="pl-c1">3</span>uy <span class="pl-k">|]</span>
<span class="pl-k">|&gt;</span> Array.map (Value.UInt8)
<span class="pl-k">|&gt;</span> Value.Array
<span class="pl-k">|&gt;</span> Packer.packOne
<span class="pl-c">//=&gt; val it : byte [] = [|147uy; 1uy; 2uy; 3uy|]</span>

Unpacker.unpack <span class="pl-k">[|</span><span class="pl-c1">147</span>uy<span class="pl-k">;</span> <span class="pl-c1">1</span>uy<span class="pl-k">;</span> <span class="pl-c1">2</span>uy<span class="pl-k">;</span> <span class="pl-c1">3</span>uy<span class="pl-k">|]</span>
<span class="pl-c">//=&gt; [|Value.Array [|Value.UInt8 1uy; Value.UInt8 2uy; Value.UInt8 3uy|]|]</span></pre></div>
<a name="user-content-copyright"></a>
<h6>
<a id="user-content-copyright" class="anchor" href="#copyright" aria-hidden="true"><span class="octicon octicon-link"></span></a>Copyright</h6>
<p><code>Copyright (c) 2014- Kazuhiro Matsushima</code></p>
<a name="user-content-license"></a>
<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>
<p>Distributed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a> .</p>

</article>
  </div>
        </div>
        
        <div id="qs-komamitsu-jackson-dataformat-msgpack" class="qs"><h4><a href="https://github.com/komamitsu/jackson-dataformat-msgpack" target="_blank">komamitsu/jackson-dataformat-msgpack <span class="qs-url">https://github.com/komamitsu/jackson-dataformat-msgpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-jackson-dataformat-msgpack" class="anchor" href="#jackson-dataformat-msgpack" aria-hidden="true"><span class="octicon octicon-link"></span></a>jackson-dataformat-msgpack</h5>

<p><strong>This project is merged to msgpack-java!!</strong> Yay!</p>

<p><strong>See msgpack-java/msgpack-jackson for the updated documents: <a href="/komamitsu/jackson-dataformat-msgpack/blob/master/msgpack-java/msgpack-jackson">https://github.com/msgpack/msgpack-java/tree/v07-develop/msgpack-jackson</a></strong></p>

<h5>
<a id="user-content-overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h5>

<p><a href="https://travis-ci.org/komamitsu/jackson-dataformat-msgpack"><img src="https://camo.githubusercontent.com/cb266e7c9c0cf7f82be48efd626f912092290b25/68747470733a2f2f7472617669732d63692e6f72672f6b6f6d616d697473752f6a61636b736f6e2d64617461666f726d61742d6d73677061636b2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/komamitsu/jackson-dataformat-msgpack.svg" style="max-width:100%;"></a></p>

<p>This Jackson extension library handles reading and writing of data encoded in <a href="http://msgpack.org/">MessagePack</a> data format.
It extends standard Jackson streaming API (<code>JsonFactory</code>, <code>JsonParser</code>, <code>JsonGenerator</code>), and as such works seamlessly with all the higher level data abstractions (data binding, tree model, and pluggable extensions).</p>

<h6>
<a id="user-content-maven-dependency" class="anchor" href="#maven-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Maven dependency</h6>

<p>To use this module on Maven-based projects, use following dependency:</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.komamitsu&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-dataformat-msgpack&lt;/artifactId&gt;
  &lt;version&gt;0.0.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<p>Only thing you need to do is to instantiate MessagePackFactory and pass it to the constructor of ObjectMapper.</p>

<pre><code>  ObjectMapper objectMapper = new ObjectMapper(new MessagePackFactory());
  ExamplePojo orig = new ExamplePojo("komamitsu");
  byte[] bytes = objectMapper.writeValueAsBytes(orig);
  ExamplePojo value = objectMapper.readValue(bytes, ExamplePojo.class);
  System.out.println(value.getName()); // =&gt; komamitsu
</code></pre>

<p>Also, you can exchange data among multiple languages.</p>

<p>Java</p>

<pre><code>  // Serialize
  Map&lt;String, Object&gt; obj = new HashMap&lt;String, Object&gt;();
  obj.put("foo", "hello");
  obj.put("bar", "world");
  byte[] bs = objectMapper.writeValueAsBytes(obj);
  // bs =&gt; [-126, -93, 102, 111, 111, -91, 104, 101, 108, 108, 111,
  //        -93, 98, 97, 114, -91, 119, 111, 114, 108, 100]
</code></pre>

<p>Ruby</p>

<pre><code>  require 'msgpack'

  # Deserialize
  xs = [-126, -93, 102, 111, 111, -91, 104, 101, 108, 108, 111,
        -93, 98, 97, 114, -91, 119, 111, 114, 108, 100]
  MessagePack.unpack(xs.pack("C*"))
  # =&gt; {"foo"=&gt;"hello", "bar"=&gt;"world"}

  # Serialize
  ["zero", 1, 2.0, nil].to_msgpack.unpack('C*')
  # =&gt; [148, 164, 122, 101, 114, 111, 1, 203, 64, 0, 0, 0, 0, 0, 0, 0, 192]
</code></pre>

<p>Java</p>

<pre><code>  // Deserialize
  bs = new byte[] {(byte) 148, (byte) 164, 122, 101, 114, 111, 1,
                   (byte) 203, 64, 0, 0, 0, 0, 0, 0, 0, (byte) 192};
  TypeReference&lt;List&lt;Object&gt;&gt; typeReference = new TypeReference&lt;List&lt;Object&gt;&gt;(){};
  List&lt;Object&gt; xs = objectMapper.readValue(bs, typeReference);
  // xs =&gt; [zero, 1, 2.0, null]
</code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-briandw-SwiftPack" class="qs"><h4><a href="https://github.com/briandw/SwiftPack" target="_blank">briandw/SwiftPack <span class="qs-url">https://github.com/briandw/SwiftPack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-swiftpack" class="anchor" href="#swiftpack" aria-hidden="true"><span class="octicon octicon-link"></span></a>SwiftPack</h5>

<p>SwiftPack is MessagePack packer and unpacker written almost entirely in Swift. </p>

<h5>
<a id="user-content-issues" class="anchor" href="#issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Issues</h5>

<ul>
<li>There are few Objective-C dependencies, mostly NSData. I hope to remove these dependencies as Swift matures. </li>
<li>Maps currently only support String types for keys.</li>
</ul>

<h5>
<a id="user-content-copyright-and-license" class="anchor" href="#copyright-and-license" aria-hidden="true"><span class="octicon octicon-link"></span></a>Copyright and License</h5>

<p>Copyright (c) 2014 Brian Williams</p>

<p>This software is licensed under the terms of the MIT license.</p>
</article>
  </div>
        </div>
        
        <div id="qs-gabriel-MPMessagePack" class="qs"><h4><a href="https://github.com/gabriel/MPMessagePack" target="_blank">gabriel/MPMessagePack <span class="qs-url">https://github.com/gabriel/MPMessagePack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h5>

<pre><code>pod "MPMessagePack"
</code></pre>

<h6>
<a id="user-content-writing" class="anchor" href="#writing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing</h6>

<div class="highlight highlight-source-objc"><pre>#<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">&lt;</span>MPMessagePack/MPMessagePack.h<span class="pl-pds">&gt;</span></span>

<span class="pl-c1">NSDictionary</span> *dict =
@{
<span class="pl-s"><span class="pl-pds">@"</span>n<span class="pl-pds">"</span></span>: @(<span class="pl-c1">32134123</span>),
<span class="pl-s"><span class="pl-pds">@"</span>bool<span class="pl-pds">"</span></span>: @(<span class="pl-c1">YES</span>),
<span class="pl-s"><span class="pl-pds">@"</span>array<span class="pl-pds">"</span></span>: @[@(<span class="pl-c1">1</span>.<span class="pl-c1">1f</span>), @(<span class="pl-c1">2.1</span>)],
<span class="pl-s"><span class="pl-pds">@"</span>body<span class="pl-pds">"</span></span>: [<span class="pl-c1">NSData</span> <span class="pl-c1">data</span>],
};

<span class="pl-c1">NSData</span> *data = [dict <span class="pl-c1">mp_messagePack</span>];</pre></div>

<p>Or via <code>MPMessagePackWriter</code>.</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c1">NSError</span> *error = <span class="pl-c1">nil</span>;
<span class="pl-c1">NSData</span> *data = [MPMessagePackWriter <span class="pl-c1">writeObject:</span>dict <span class="pl-c1">error:</span>&amp;error];</pre></div>

<p>If you need to use an ordered dictionary.</p>

<div class="highlight highlight-source-objc"><pre>MPOrderedDictionary *dict = [[MPOrderedDictionary <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>];
[dict <span class="pl-c1">addEntriesFromDictionary:</span>@{<span class="pl-s"><span class="pl-pds">@"</span>c<span class="pl-pds">"</span></span>: @(<span class="pl-c1">1</span>), <span class="pl-s"><span class="pl-pds">@"</span>b<span class="pl-pds">"</span></span>: @(<span class="pl-c1">2</span>), <span class="pl-s"><span class="pl-pds">@"</span>a<span class="pl-pds">"</span></span>: @(<span class="pl-c1">3</span>)}];
[dict <span class="pl-c1">sortKeysUsingSelector:</span><span class="pl-k">@selector</span>(<span class="pl-c1">localizedCaseInsensitiveCompare:</span>)];
[dict <span class="pl-c1">mp_messagePack</span>];</pre></div>

<h6>
<a id="user-content-reading" class="anchor" href="#reading" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reading</h6>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">id</span> obj = [MPMessagePackReader <span class="pl-c1">readData:</span>data <span class="pl-c1">error:</span>&amp;error];</pre></div>

<div class="highlight highlight-source-objc"><pre>MPMessagePackReader *reader = [[MPMessagePackReader <span class="pl-c1">alloc</span>] <span class="pl-c1">initWithData:</span>data];
<span class="pl-k">id</span> obj1 = [reader <span class="pl-c1">read</span>:&amp;error]; <span class="pl-c">// Read an object</span>
<span class="pl-k">id</span> obj2 = [reader <span class="pl-c1">read</span>:&amp;error]; <span class="pl-c">// Read another object</span></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-mcollina-msgpack5" class="qs"><h4><a href="https://github.com/mcollina/msgpack5" target="_blank">mcollina/msgpack5 <span class="qs-url">https://github.com/mcollina/msgpack5</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack5" class="anchor" href="#msgpack5" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack5  <a href="https://travis-ci.org/mcollina/msgpack5"><img src="https://camo.githubusercontent.com/9b55d6db87b3f41e6c4963d8169561554a7e4975/68747470733a2f2f7472617669732d63692e6f72672f6d636f6c6c696e612f6d73677061636b352e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/mcollina/msgpack5.png" style="max-width:100%;"></a>
</h5>

<p>A msgpack v5 implementation for node.js and the browser, with extension point support.</p>

<h6>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h6>

<div class="highlight highlight-source-shell"><pre>npm install msgpack5 --save</pre></div>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> msgpack <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>msgpack5<span class="pl-pds">'</span></span>)() <span class="pl-c">// namespace our extensions</span>
  , a       <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MyType</span>(<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>)
  , encode  <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-smi">encode</span>
  , decode  <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-smi">decode</span>

<span class="pl-smi">msgpack</span>.<span class="pl-en">register</span>(<span class="pl-c1">0x42</span>, MyType, mytipeEncode, mytipeDecode)

<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">encode</span>({ <span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>world<span class="pl-pds">'</span></span> }).<span class="pl-c1">toString</span>(<span class="pl-s"><span class="pl-pds">'</span>hex<span class="pl-pds">'</span></span>))
<span class="pl-c">// 81a568656c6c6fa5776f726c64</span>
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">decode</span>(<span class="pl-en">encode</span>({ <span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>world<span class="pl-pds">'</span></span> })))
<span class="pl-c">// { hello: 'world' }</span>
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">encode</span>(a).<span class="pl-c1">toString</span>(<span class="pl-s"><span class="pl-pds">'</span>hex<span class="pl-pds">'</span></span>))
<span class="pl-c">// d5426161</span>
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">decode</span>(<span class="pl-en">encode</span>(a)) <span class="pl-k">instanceof</span> MyType)
<span class="pl-c">// true</span>
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">decode</span>(<span class="pl-en">encode</span>(a)))
<span class="pl-c">// { value: 'a', size: 2 }</span>

<span class="pl-k">function</span> <span class="pl-en">MyType</span>(<span class="pl-smi">size</span>, <span class="pl-smi">value</span>) {
  <span class="pl-v">this</span>.<span class="pl-c1">value</span> <span class="pl-k">=</span> value
  <span class="pl-v">this</span>.<span class="pl-c1">size</span>  <span class="pl-k">=</span> size
}

<span class="pl-k">function</span> <span class="pl-en">mytipeEncode</span>(<span class="pl-smi">obj</span>) {
  <span class="pl-k">var</span> buf <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Buffer</span>(<span class="pl-smi">obj</span>.<span class="pl-c1">size</span>)
  <span class="pl-smi">buf</span>.<span class="pl-en">fill</span>(<span class="pl-smi">obj</span>.<span class="pl-c1">value</span>)
  <span class="pl-k">return</span> buf
}

<span class="pl-k">function</span> <span class="pl-en">mytipeDecode</span>(<span class="pl-smi">data</span>) {
  <span class="pl-k">var</span> result <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MyType</span>(<span class="pl-smi">data</span>.<span class="pl-c1">length</span>, <span class="pl-smi">data</span>.<span class="pl-c1">toString</span>(<span class="pl-s"><span class="pl-pds">'</span>utf8<span class="pl-pds">'</span></span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>))
    , i

  <span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-smi">data</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {
    <span class="pl-k">if</span> (<span class="pl-smi">data</span>.<span class="pl-en">readUInt8</span>(<span class="pl-c1">0</span>) <span class="pl-k">!=</span> <span class="pl-smi">data</span>.<span class="pl-en">readUInt8</span>(i)) {
      <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-en">Error</span>(<span class="pl-s"><span class="pl-pds">'</span>should all be the same<span class="pl-pds">'</span></span>)
    }
  }

  <span class="pl-k">return</span> result
}</pre></div>

<h6>
<a id="user-content-in-the-browser" class="anchor" href="#in-the-browser" aria-hidden="true"><span class="octicon octicon-link"></span></a>In the Browser</h6>

<p>This library is compatible with <a href="http://npm.im/browserify">Browserify</a>.</p>

<p>If you want to use standalone, grab the file in the <code>dist</code> folder of
this repo, and use in your own HTML page, the module will expose a
<code>msgpack5</code> global.</p>

<pre><code>&lt;script type="text/javascript"
        src="./msgpack5.min.js"&gt;
&lt;/script&gt;
</code></pre>

<h7>
<a id="user-content-to-build" class="anchor" href="#to-build" aria-hidden="true"><span class="octicon octicon-link"></span></a>To build</h7>

<pre><code>    npm run build
</code></pre>

<h6>
<a id="user-content-api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h6>

<p><a name="user-content-api"></a></p>

<h6>
<a id="user-content-api-1" class="anchor" href="#api-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h6>

<ul>
<li><a href="#msgpack"><code><b>msgpack()</b></code></a></li>
<li><a href="#encode"><code>msgpack().<b>encode()</b></code></a></li>
<li><a href="#decode"><code>msgpack().<b>decode()</b></code></a></li>
<li><a href="#registerEncoder"><code>msgpack().<b>registerEncoder()</b></code></a></li>
<li><a href="#registerDecoder"><code>msgpack().<b>registerDecoder()</b></code></a></li>
<li><a href="#register"><code>msgpack().<b>register()</b></code></a></li>
<li><a href="#encoder"><code>msgpack().<b>encoder()</b></code></a></li>
<li><a href="#decoder"><code>msgpack().<b>decoder()</b></code></a></li>
</ul>

<hr>

<p><a name="user-content-msgpack"></a></p>

<h7>
<a id="user-content-msgpackoptionsobj" class="anchor" href="#msgpackoptionsobj" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack(options(obj))</h7>

<p>Creates a new instance on which you can register new types for being
encoded.</p>

<p>options:</p>

<ul>
<li>
<code>forceFloat64</code>, a boolean to that forces all floats to be encoded as 64-bits floats. Defaults is false.</li>
</ul>

<hr>

<p><a name="user-content-encode"></a></p>

<h7>
<a id="user-content-encodeobject" class="anchor" href="#encodeobject" aria-hidden="true"><span class="octicon octicon-link"></span></a>encode(object)</h7>

<p>Encodes <code>object</code> in msgpack, returns a <a href="http://npm.im/bl">bl</a>.</p>

<hr>

<p><a name="user-content-decode"></a></p>

<h7>
<a id="user-content-decodebuf" class="anchor" href="#decodebuf" aria-hidden="true"><span class="octicon octicon-link"></span></a>decode(buf)</h7>

<p>Decodes buf from in msgpack. <code>buf</code> can be a <code>Buffer</code> or a <a href="http://npm.im/bl">bl</a> instance.</p>

<p>In order to support a stream interface, a user must pass in a <a href="http://npm.im/bl">bl</a> instance.</p>

<hr>

<p><a name="user-content-registerEncoder"></a></p>

<h7>
<a id="user-content-registerencodercheckobj-encodeobj" class="anchor" href="#registerencodercheckobj-encodeobj" aria-hidden="true"><span class="octicon octicon-link"></span></a>registerEncoder(check(obj), encode(obj))</h7>

<p>Register a new custom object type for being automatically encoded.
The arguments are:</p>

<ul>
<li>
<code>check</code>, a function that will be called to check if the passed
object should be encoded with the <code>encode</code> function</li>
<li>
<code>encode</code>, a function that will be called to encode an object in binary
form; this function <strong>must</strong> return a <code>Buffer</code> which include the same type
for <a href="#registerDecoder">registerDecoder</a>.</li>
</ul>

<hr>

<p><a name="user-content-registerDecoder"></a></p>

<h7>
<a id="user-content-registerdecodertype-decodebuf" class="anchor" href="#registerdecodertype-decodebuf" aria-hidden="true"><span class="octicon octicon-link"></span></a>registerDecoder(type, decode(buf))</h7>

<p>Register a new custom object type for being automatically decoded.
The arguments are:</p>

<ul>
<li>
<code>type</code>, is a greater than zero integer identificating the type once serialized</li>
<li>
<code>decode</code>, a function that will be called to decode the object from
the passed <code>Buffer</code>
</li>
</ul>

<hr>

<p><a name="user-content-register"></a></p>

<h7>
<a id="user-content-registertype-constructor-encodeobj-decodebuf" class="anchor" href="#registertype-constructor-encodeobj-decodebuf" aria-hidden="true"><span class="octicon octicon-link"></span></a>register(type, constructor, encode(obj), decode(buf))</h7>

<p>Register a new custom object type for being automatically encoded and
decoded. The arguments are:</p>

<ul>
<li>
<code>type</code>, is a greater than zero integer identificating the type once serialized</li>
<li>
<code>constructor</code>, the function that will be used to match the objects
with <code>instanceof</code>
</li>
<li>
<code>encode</code>, a function that will be called to encode an object in binary
form; this function <strong>must</strong> return a <code>Buffer</code> that can be
deserialized by the <code>decode</code> function</li>
<li>
<code>decode</code>, a function that will be called to decode the object from
the passed <code>Buffer</code>
</li>
</ul>

<p>This is just a commodity that calls
<a href="#registerEncoder"><code>registerEncoder</code></a> and
<a href="#registerDecoder"><code>registerDecoder</code></a> internally.</p>

<hr>

<p><a name="user-content-encoder"></a></p>

<h7>
<a id="user-content-encoder" class="anchor" href="#encoder" aria-hidden="true"><span class="octicon octicon-link"></span></a>encoder()</h7>

<p>Builds a stream in object mode that encodes msgpack.</p>

<hr>

<p><a name="user-content-decoder"></a></p>

<h7>
<a id="user-content-decoder" class="anchor" href="#decoder" aria-hidden="true"><span class="octicon octicon-link"></span></a>decoder()</h7>

<p>Builds a stream in object mode that decodes msgpack.</p>

<h6>
<a id="user-content-levelup-support" class="anchor" href="#levelup-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>LevelUp Support</h6>

<p><strong>msgpack5</strong> can be used as a LevelUp
<a href="https://github.com/rvagg/node-levelup#leveluplocation-options-callback"><code>valueEncoding</code></a> straight away:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> level <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>level<span class="pl-pds">'</span></span>)
  , pack  <span class="pl-k">=</span> <span class="pl-en">msgpack</span>()
  , db    <span class="pl-k">=</span> <span class="pl-en">level</span>(<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, {
      valueEncoding<span class="pl-k">:</span> pack
    })
  , obj   <span class="pl-k">=</span> { my<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>obj<span class="pl-pds">'</span></span> }

<span class="pl-smi">db</span>.<span class="pl-en">put</span>(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>, obj, <span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
  <span class="pl-smi">db</span>.<span class="pl-en">get</span>(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>, <span class="pl-smi">result</span>) {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(result)
    <span class="pl-smi">db</span>.<span class="pl-c1">close</span>()
  })
})
</pre></div>

<h6>
<a id="user-content-related-projects" class="anchor" href="#related-projects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Related projects</h6>

<ul>
<li>
<a href="http://npmjs.com/package/msgpack5rpc">msgpack5rpc</a>: An implementation of the
<a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc spec</a>
on top of this library.</li>
</ul>

<h6>
<a id="user-content-disclaimer" class="anchor" href="#disclaimer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disclaimer</h6>

<p>This library is built fully on JS and on <a href="http://npm.im/bl">bl</a> to
simplify the code. Every improvement that keeps the same API is welcome.</p>

<h6>
<a id="user-content-acknowledgements" class="anchor" href="#acknowledgements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Acknowledgements</h6>

<p>This project was kindly sponsored by <a href="http://nearform.com">nearForm</a>.</p>

<p>This library was originally built as the data format for
<a href="http://npm.im/jschan">JSChan</a>.</p>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-rodrigosetti-messagepack" class="qs"><h4><a href="http://hackage.haskell.org/package/messagepack" target="_blank">rodrigosetti/messagepack <span class="qs-url">http://hackage.haskell.org/package/messagepack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-haskell" class="anchor" href="#messagepack-for-haskell" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Haskell</h5>

<p>This implementation defines an messagepack <code>Object</code> type, which is an instance of
<code>Serialize</code> (from <a href="http://hackage.haskell.org/package/cereal">cereal</a> ):</p>

<div class="highlight highlight-source-haskell"><pre><span class="pl-k">data</span> <span class="pl-c1">Object</span> <span class="pl-k">=</span> <span class="pl-c1">ObjectNil</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectUInt</span>   <span class="pl-c1">Word64</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectInt</span>    <span class="pl-c1">Int64</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectBool</span>   <span class="pl-c1">Bool</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectFloat</span>  <span class="pl-c1">Float</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectDouble</span> <span class="pl-c1">Double</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectString</span> <span class="pl-c1">ByteString</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectBinary</span> <span class="pl-c1">ByteString</span>
            <span class="pl-k">|</span> <span class="pl-c1">ObjectArray</span>  [<span class="pl-c1">Object</span>]
            <span class="pl-k">|</span> <span class="pl-c1">ObjectMap</span>    (<span class="pl-c1">M</span><span class="pl-k">.</span><span class="pl-c1">Map</span> <span class="pl-c1">Object</span> <span class="pl-c1">Object</span> )
            <span class="pl-k">|</span> <span class="pl-c1">ObjectExt</span>    <span class="pl-k">!</span><span class="pl-c1">Int8</span> <span class="pl-c1">BS</span><span class="pl-k">.</span><span class="pl-c1">ByteString</span>
    <span class="pl-k">deriving</span> (<span class="pl-e">Eq</span>, <span class="pl-e">Ord</span>, <span class="pl-e">Show</span>)

<span class="pl-k">instance</span> <span class="pl-k">Serialize</span> <span class="pl-k">Object</span> <span class="pl-k">where</span>
    <span class="pl-c">-- ...</span></pre></div>

<p>Thus, you can use cereal's <code>encode</code> and <code>decode</code> to pack and unpack objects.</p>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-msgpack-delphi" class="qs"><h4><a href="https://github.com/ymofen/msgpack-delphi" target="_blank">ymofen/msgpack-delphi <span class="qs-url">https://github.com/ymofen/msgpack-delphi</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-for-delphi" class="anchor" href="#msgpack-for-delphi" aria-hidden="true"><span class="octicon octicon-link"></span></a>Msgpack for Delphi</h5>

<p>It's like JSON but small and fast.</p>

<pre><code>unit Owner: D10.Mofen, qdac.swish
contact:
       qq:185511468, 
    email:185511468@qq.com
welcome to report bug
</code></pre>

<h6>
<a id="user-content-works-with" class="anchor" href="#works-with" aria-hidden="true"><span class="octicon octicon-link"></span></a>Works with</h6>

<ul>
<li>Delphi 7 (tested)</li>
<li>Delphi 2007 (tested)</li>
<li>XE5, XE6, XE7, FMX (tested)</li>
</ul>

<h6>
<a id="user-content-changes" class="anchor" href="#changes" aria-hidden="true"><span class="octicon octicon-link"></span></a>changes:</h6>

<ul>
<li><p>first release
 2014-08-15 13:05:13</p></li>
<li><p>add array support
 2014-08-19 12:18:47</p></li>
<li><p>add andriod support
 2014-09-08 00:45:27</p></li>
<li><p>fixed int32, int64 parse bug&lt; integer, int64 parse zero&gt;
 2014-11-09 22:35:27</p></li>
<li><p>add EncodeToFile/DecodeFromFile
 2014-11-13 12:30:58</p></li>
<li><p>fix  asVariant = null (thanks for cyw(26890954))
 2014-11-14 09:05:52</p></li>
<li><p>fix AsInteger = -1 bug (thanks for cyw(26890954))
 2014-11-14 12:15:52</p></li>
<li><p>fix AsInteger = -127 bug
 check int64/integer/cardinal/word/shortint/smallint/byte assign, encode,decode, read
 2014-11-14 12:30:38</p></li>
<li><p>fix AsFloat = 2.507182 bug
 thanks fo [珠海]-芒果  1939331207
 2014-11-21 12:37:04</p></li>
<li><p>add AddArrayChild func
 2015-03-25 17:47:28</p></li>
<li><p>add remove/removeFromParent/Delete function
 2015-08-29 22:37:48</p></li>
</ul>

<h7>
<a id="user-content-code-example" class="anchor" href="#code-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code Example</h7>

<div class="highlight highlight-source-pascal"><pre><span class="pl-k">var</span>
  lvMsg, lvMsg2:TSimpleMsgPack;
  lvBytes:TBytes;
  s:string;
<span class="pl-k">begin</span>
  lvMsg := TSimpleMsgPack.Create;
  lvMsg.S[<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>] := <span class="pl-s"><span class="pl-pds">'</span>汉字,ascii<span class="pl-pds">'</span></span>;
  <span class="pl-k">if</span> dlgOpen.Execute <span class="pl-k">then</span>
  <span class="pl-k">begin</span>
    lvMsg.S[<span class="pl-s"><span class="pl-pds">'</span>key.image.name<span class="pl-pds">'</span></span>] := ExtractFileName(dlgOpen.FileName);

    <span class="pl-c">// file binary data</span>
    lvMsg.ForcePathObject(<span class="pl-s"><span class="pl-pds">'</span>key.image.data<span class="pl-pds">'</span></span>).LoadBinaryFromFile(dlgOpen.FileName);
  <span class="pl-k">end</span>;

  <span class="pl-c">//</span>
  lvBytes := lvMsg.EncodeToBytes;

  lvMsg2 := TSimpleMsgPack.Create;
  lvMsg2.DecodeFromBytes(lvBytes);
  <span class="pl-c">//</span>
  Memo1.Lines.Add(lvMsg2.S[<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>]);
  <span class="pl-k">if</span> lvMsg2.S[<span class="pl-s"><span class="pl-pds">'</span>key.image.name<span class="pl-pds">'</span></span>] &lt;&gt; <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span> <span class="pl-k">then</span>
  <span class="pl-k">begin</span>
    s := ExtractFilePath(ParamStr(<span class="pl-c1">0</span>)) + lvMsg2.S[<span class="pl-s"><span class="pl-pds">'</span>key.image.name<span class="pl-pds">'</span></span>];
    Memo1.Lines.Add(<span class="pl-s"><span class="pl-pds">'</span>file saved<span class="pl-pds">'</span></span>);
    Memo1.Lines.Add(s);
    lvMsg2.ForcePathObject(<span class="pl-s"><span class="pl-pds">'</span>key.image.data<span class="pl-pds">'</span></span>).SaveBinaryToFile(s);    
  <span class="pl-k">end</span>;
</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-chinawsb-qmsgpack-delphi" class="qs"><h4><a href="http://www.qdac.cc" target="_blank">chinawsb/qmsgpack-delphi <span class="qs-url">http://www.qdac.cc</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h7>
<a id="user-content-qmsgpack-messagepack-for-delphic-builder" class="anchor" href="#qmsgpack-messagepack-for-delphic-builder" aria-hidden="true"><span class="octicon octicon-link"></span></a>QMsgPack-Messagepack for Delphi/C++ Builder</h7>

<p>QMsgPack is a simple and powerful Delphi &amp; C++ Builder implementation for messagepack protocol.
QMsgPack is a part of QDAC 3.0,Source code hosted in Sourceforge(<a href="http://sourceforge.net/p/qdac3">http://sourceforge.net/p/qdac3</a>).</p>

<h7>
<a id="user-content-feathers" class="anchor" href="#feathers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Feathers</h7>

<p>· Full types support,include messagepack extension type</p>

<p>· Full open source,free for used in ANY PURPOSE</p>

<p>· Quick and simple interface</p>

<p>· RTTI support include</p>

<h7>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h7>

<p>QMsgPack is not a desgin time package.So just place QMsgPack files into search path and add to your project.</p>

<h7>
<a id="user-content-support" class="anchor" href="#support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support</h7>

<p>· Topic in Website (<a href="http://www.qdac.cc/?cat=44">http://www.qdac.cc/?cat=44</a>) ,CHINESE only</p>

<p>· Mail to author (<a href="mailto:chinawsb@sina.com">chinawsb@sina.com</a>)</p>

<p>· Post in forum (<a href="http://tieba.baidu.com/f?kw=qdac">http://tieba.baidu.com/f?kw=qdac</a>)</p>

<p>· QQ Group No：250530692 (<a href="http://jq.qq.com/?_wv=1027&amp;k=ZH6mZR">http://jq.qq.com/?_wv=1027&amp;k=ZH6mZR</a>)</p>

<h7>
<a id="user-content-source-check-out" class="anchor" href="#source-check-out" aria-hidden="true"><span class="octicon octicon-link"></span></a>Source check out</h7>

<p>· HTTP (<a href="http://svn.code.sf.net/p/qdac3/code/">http://svn.code.sf.net/p/qdac3/code/</a>)</p>

<p>· SVN (svn://svn.code.sf.net/p/qdac3/code/)</p>

<h7>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h7>

<div class="highlight highlight-source-pascal"><pre><span class="pl-k">var</span>
  lvMsg, lvMsg2:TQMsgPack;
  lvBytes:TBytes;
  s:string;
<span class="pl-k">begin</span>
  lvMsg := TQMsgPack.Create;
  lvMsg.ForcePath(<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>).AsString := <span class="pl-s"><span class="pl-pds">'</span>汉字,ascii<span class="pl-pds">'</span></span>;

  <span class="pl-c">//</span>
  lvBytes := lvMsg.Encode;

  lvMsg2 := TQMsgPack.Create;
  lvMsg2.Parse(lvBytes);
  <span class="pl-c">//</span>
  showMessage(lvMsg.ForcePath(<span class="pl-s"><span class="pl-pds">'</span>key.obj<span class="pl-pds">'</span></span>).AsString);
  ....
</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-romixlab-qmsgpack" class="qs"><h4><a href="https://github.com/romixlab/qmsgpack" target="_blank">romixlab/qmsgpack <span class="qs-url">https://github.com/romixlab/qmsgpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-for-qt" class="anchor" href="#messagepack-for-qt" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack for Qt</h5>

<p>Full documentation is here <a href="http://msgpack.marsworks.ru/">mp.marsw.ru</a></p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>Clone repository:</p>

<div class="highlight highlight-source-shell"><pre>git clone https://github.com/romixlab/qmsgpack.git
<span class="pl-c1">cd</span> qmsgpack
mkdir build
<span class="pl-c1">cd</span> build
cmake ..
make install</pre></div>

<h6>
<a id="user-content-sample-usage" class="anchor" href="#sample-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sample usage</h6>

<p>Packing</p>

<div class="highlight highlight-source-c++"><pre>QVariantList list;
list &lt;&lt; <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">2</span> &lt;&lt; <span class="pl-c1">3</span>;
QByteArray array = MsgPack::pack(list);</pre></div>

<p>Unpacking:</p>

<div class="highlight highlight-source-c++"><pre>QVariantList unpacked = MsgPack::unpack(array).toList();</pre></div>

<p>Streaming API:</p>

<div class="highlight highlight-source-c++"><pre><span class="pl-c">// packing</span>
MsgPackStream <span class="pl-en">stream</span>(&amp;ba, QIODevice::WriteOnly);
stream &lt;&lt; <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">2.3</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>some string<span class="pl-pds">"</span></span>;

<span class="pl-c">// unpacking</span>
MsgPackStream <span class="pl-en">stream</span>(ba);
<span class="pl-k">int</span> a;
<span class="pl-k">double</span> b;
QSting s;
stream &gt;&gt; a &gt;&gt; b &gt;&gt; s;</pre></div>

<h6>
<a id="user-content-qt-types-and-user-types" class="anchor" href="#qt-types-and-user-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Qt types and User types</h6>

<p>There is packers and unpackers for QColor, QTime, QDate, QDateTime, QPoint, QSize, QRect. Also you can create your own packer/unpacker methods for Qt or your own types. See <a href="http://msgpack.marsworks.ru/">docs</a> for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-tinylib-msgp" class="qs"><h4><a href="https://github.com/tinylib/msgp" target="_blank">tinylib/msgp <span class="qs-url">https://github.com/tinylib/msgp</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack-code-generator-" class="anchor" href="#messagepack-code-generator-" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack Code Generator <a href="https://travis-ci.org/tinylib/msgp"><img src="https://camo.githubusercontent.com/8156ac9f5b1f720c43c6089f42d909698c7623bf/68747470733a2f2f7472617669732d63692e6f72672f74696e796c69622f6d7367702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/tinylib/msgp.svg?branch=master" style="max-width:100%;"></a>
</h5>

<p><a href="http://forthebadge.com"><img src="https://camo.githubusercontent.com/299ea3461543de30174632b3fb35e878c03148b7/687474703a2f2f666f7274686562616467652e636f6d2f6261646765732f757365732d6261646765732e737667" alt="forthebadge" data-canonical-src="http://forthebadge.com/badges/uses-badges.svg" style="max-width:100%;"></a>
<a href="http://forthebadge.com"><img src="https://camo.githubusercontent.com/49f354772cd85677a4abe7fc0404273fa953b9bd/687474703a2f2f666f7274686562616467652e636f6d2f6261646765732f616765732d31322e737667" alt="forthebadge" data-canonical-src="http://forthebadge.com/badges/ages-12.svg" style="max-width:100%;"></a></p>

<p>This is a code generation tool and serialization library for <a href="http://msgpack.org">MessagePack</a>. It is targeted at the <code>go generate</code> <a href="http://tip.golang.org/cmd/go/#hdr-Generate_Go_files_by_processing_source">tool</a>. You can read more about MessagePack <a href="http://github.com/tinylib/msgp/wiki">in the wiki</a>, or at <a href="http://msgpack.org">msgpack.org</a>.</p>

<h7>
<a id="user-content-why" class="anchor" href="#why" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why?</h7>

<ul>
<li>Use Go as your schema language</li>
<li>Speeeeeed (400MB/s on modern hardware)</li>
<li><a href="http://godoc.org/github.com/tinylib/msgp/msgp#CopyToJSON">JSON interop</a></li>
<li><a href="http://github.com/tinylib/msgp/wiki/Using-Extensions">User-defined extensions</a></li>
<li>Type safety</li>
<li>Encoding flexibility</li>
</ul>

<h7>
<a id="user-content-quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h7>

<p>Note: you need at least go 1.3 to compile this package, and at least go 1.4 to use <code>go generate</code>.</p>

<p>In a source file, include the following directive:</p>

<div class="highlight highlight-source-go"><pre><span class="pl-c">//go:generate msgp</span></pre></div>

<p>The <code>msgp</code> command will generate serialization methods for all exported type declarations in the file.</p>

<p>You can <a href="http://github.com/tinylib/msgp/wiki/Using-the-Code-Generator">read more about the code generation options here</a>.</p>

<h7>
<a id="user-content-use" class="anchor" href="#use" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use</h7>

<p>Field names can be set in much the same way as the <code>encoding/json</code> package. For example:</p>

<div class="highlight highlight-source-go"><pre><span class="pl-k">type</span> <span class="pl-v">Person</span> <span class="pl-k">struct</span> {
    <span class="pl-v">Name</span>       <span class="pl-k">string</span> <span class="pl-s"><span class="pl-pds">`</span>msg:"name"<span class="pl-pds">`</span></span>
    <span class="pl-v">Address</span>    <span class="pl-k">string</span> <span class="pl-s"><span class="pl-pds">`</span>msg:"address"<span class="pl-pds">`</span></span>
    <span class="pl-v">Age</span>        <span class="pl-k">int</span>    <span class="pl-s"><span class="pl-pds">`</span>msg:"age"<span class="pl-pds">`</span></span>
    <span class="pl-v">Hidden</span>     <span class="pl-k">string</span> <span class="pl-s"><span class="pl-pds">`</span>msg:"-"<span class="pl-pds">`</span></span> <span class="pl-c">// this field is ignored</span>
    unexported <span class="pl-k">bool</span>             <span class="pl-c">// this field is also ignored</span>
}</pre></div>

<p>By default, the code generator will satisfy <code>msgp.Sizer</code>, <code>msgp.Encodable</code>, <code>msgp.Decodable</code>, 
<code>msgp.Marshaler</code>, and <code>msgp.Unmarshaler</code>. Carefully-designed applications can use these methods to do
marshalling/unmarshalling with zero allocations.</p>

<p>While <code>msgp.Marshaler</code> and <code>msgp.Unmarshaler</code> are quite similar to the standard library's
<code>json.Marshaler</code> and <code>json.Unmarshaler</code>, <code>msgp.Encodable</code> and <code>msgp.Decodable</code> are useful for 
stream serialization. (<code>*msgp.Writer</code> and <code>*msgp.Reader</code> are essentially protocol-aware versions
of <code>*bufio.Writer</code> and <code>*bufio.Reader</code>, respectively.)</p>

<h7>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h7>

<ul>
<li>Extremely fast generated code</li>
<li>Test and benchmark generation</li>
<li>JSON interoperability (see <code>msgp.CopyToJSON() and msgp.UnmarshalAsJSON()</code>)</li>
<li>Support for complex type declarations</li>
<li>Native support for Go's <code>time.Time</code>, <code>complex64</code>, and <code>complex128</code> types </li>
<li>Generation of both <code>[]byte</code>-oriented and <code>io.Reader/io.Writer</code>-oriented methods</li>
<li>Support for arbitrary type system extensions</li>
<li><a href="http://github.com/tinylib/msgp/wiki/Preprocessor-Directives">Preprocessor directives</a></li>
</ul>

<p>Consider the following:</p>

<div class="highlight highlight-source-go"><pre><span class="pl-k">const</span> <span class="pl-v">Eight</span> = <span class="pl-c1">8</span>
<span class="pl-k">type</span> <span class="pl-v">MyInt</span> <span class="pl-k">int</span>
<span class="pl-k">type</span> <span class="pl-v">Data</span> []<span class="pl-k">byte</span>

<span class="pl-k">type</span> <span class="pl-v">Struct</span> <span class="pl-k">struct</span> {
    <span class="pl-v">Which</span>  <span class="pl-k">map</span>[<span class="pl-k">string</span>]*MyInt <span class="pl-s"><span class="pl-pds">`</span>msg:"which"<span class="pl-pds">`</span></span>
    <span class="pl-v">Other</span>  <span class="pl-v">Data</span>              <span class="pl-s"><span class="pl-pds">`</span>msg:"other"<span class="pl-pds">`</span></span>
    <span class="pl-v">Nums</span>   [Eight]<span class="pl-k">float64</span>    <span class="pl-s"><span class="pl-pds">`</span>msg:"nums"<span class="pl-pds">`</span></span>
}</pre></div>

<p>As long as the declarations of <code>MyInt</code> and <code>Data</code> are in the same file as <code>Struct</code>, the parser will determine that the type information for <code>MyInt</code> and <code>Data</code> can be passed into the definition of <code>Struct</code> before its methods are generated.</p>

<h8>
<a id="user-content-extensions" class="anchor" href="#extensions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extensions</h8>

<p>MessagePack supports defining your own types through "extensions," which are just a tuple of
the data "type" (<code>int8</code>) and the raw binary. You <a href="http://github.com/tinylib/msgp/wiki/Using-Extensions">can see a worked example in the wiki.</a></p>

<h7>
<a id="user-content-status" class="anchor" href="#status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Status</h7>

<p>Alpha. I <em>will</em> break stuff. There is an open milestone for Beta stability (targeted for January.) Only the <code>/msgp</code> sub-directory will have a stability guarantee.</p>

<p>You can read more about how <code>msgp</code> maps MessagePack types onto Go types <a href="http://github.com/tinylib/msgp/wiki">in the wiki</a>.</p>

<p>Here some of the known limitations/restrictions:</p>

<ul>
<li>Identifiers from outside the processed source file are assumed (optimistically) to satisfy the generator's interfaces. If this isn't the case, your code will fail to compile.</li>
<li>Like most serializers, <code>chan</code> and <code>func</code> fields are ignored, as well as non-exported fields.</li>
<li>Encoding of <code>interface{}</code> is limited to built-ins or types that have explicit encoding methods.</li>
<li>
<em>Maps must have <code>string</code> keys.</em> This is intentional (as it preserves JSON interop.) Although non-string map keys are not forbidden by the MessagePack standard, many serializers impose this restriction. (It also means <em>any</em> well-formed <code>struct</code> can be de-serialized into a <code>map[string]interface{}</code>.) The only exception to this rule is that the deserializers will allow you to read map keys encoded as <code>bin</code> types, due to the fact that some legacy encodings permitted this. (However, those values will still be cast to Go <code>string</code>s, and they will be converted to <code>str</code> types when re-encoded. It is the responsibility of the user to ensure that map keys are UTF-8 safe in this case.) The same rules hold true for JSON translation.</li>
</ul>

<p>If the output compiles, then there's a pretty good chance things are fine. (Plus, we generate tests for you.) <em>Please, please, please</em> file an issue if you think the generator is writing broken code.</p>

<h7>
<a id="user-content-performance" class="anchor" href="#performance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Performance</h7>

<p>If you like benchmarks, see <a href="https://github.com/alecthomas/go_serialization_benchmarks">here.</a></p>

<p>As one might expect, the generated methods that deal with <code>[]byte</code> are faster, but the <code>io.Reader/Writer</code> methods are generally more memory-efficient for large (&gt; 2KB) objects.</p>
</article>
  </div>
        </div>
        
        <div id="qs-jakm-msgpack-cli" class="qs"><h4><a href="https://github.com/jakm/msgpack-cli" target="_blank">jakm/msgpack-cli <span class="qs-url">https://github.com/jakm/msgpack-cli</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-cli" class="anchor" href="#msgpack-cli" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-cli</h5>

<p>msgpack-cli is command line tool that converts data from JSON to <a href="http://msgpack.org">Msgpack</a> and vice versa. Also allows calling RPC methods via <a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc</a>.</p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<div class="highlight highlight-source-shell"><pre>% go get github.com/jakm/msgpack-cli</pre></div>

<p>Debian packages and Windows binaries are available on project's
<a href="https://github.com/jakm/msgpack-cli/releases/latest">Releases page</a>.</p>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<pre><code>msgpack-cli

Usage:
    msgpack-cli encode &lt;input-file&gt; [--out=&lt;output-file&gt;] [--disable-int64-conv]
    msgpack-cli decode &lt;input-file&gt; [--out=&lt;output-file&gt;] [--pp]
    msgpack-cli rpc &lt;host&gt; &lt;port&gt; &lt;method&gt; [&lt;params&gt;|--file=&lt;input-file&gt;] [--pp]
        [--timeout=&lt;timeout&gt;][--disable-int64-conv]
    msgpack-cli -h | --help
    msgpack-cli --version

Commands:
    encode                Encode data from input file to STDOUT
    decode                Decode data from input file to STDOUT
    rpc                   Call RPC method and write result to STDOUT

Options:
    -h --help             Show this help message and exit
    --version             Show version
    --out=&lt;output-file&gt;   Write output data to file instead of STDOUT
    --file=&lt;input-file&gt;   File where parameters or RPC method are read from
    --pp                  Pretty-print - indent output JSON data
    --timeout=&lt;timeout&gt;   Timeout of RPC call [default: 30]
    --disable-int64-conv  Disable the default behaviour such that JSON numbers
                          are converted to float64 or int64 numbers by their
                          meaning, all result numbers will have float64 type


Arguments:
    &lt;input-file&gt;          File where data are read from
    &lt;host&gt;                Server hostname
    &lt;port&gt;                Server port
    &lt;method&gt;              Name of RPC method
    &lt;params&gt;              Parameters of RPC method in JSON format
</code></pre>

<h6>
<a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h6>

<p>Encoding/decoding:</p>

<pre><code>$ cat test.json
{
  "firstName": "John",
  "lastName": "Smith",
  "isAlive": true,
  "age": 25,
  "height_cm": 167.6,
  "address": {
    "streetAddress": "21 2nd Street",
    "city": "New York",
    "state": "NY",
    "postalCode": "10021-3100"
  },
  "phoneNumbers": [
    {
      "type": "home",
      "number": "212 555-1234"
    },
    {
      "type": "office",
      "number": "646 555-4567"
    }
  ],
  "children": [],
  "spouse": null
}
$
$ msgpack-cli encode test.json --out test.bin
$
$ ls -l test.* | awk '{print $9, $5}'
test.bin 242
test.json 429
$
$ msgpack-cli decode test.bin --pp  # pretty-print
{
  "address": {
    "city": "New York",
    "postalCode": "10021-3100",
    "state": "NY",
    "streetAddress": "21 2nd Street"
  },
  "age": 25,
  "children": [],
  "firstName": "John",
  "height_cm": 167.6,
  "isAlive": true,
  "lastName": "Smith",
  "phoneNumbers": [
    {
      "number": "212 555-1234",
      "type": "home"
    },
    {
      "number": "646 555-4567",
      "type": "office"
    }
  ],
  "spouse": null
}
</code></pre>

<p>RPC calling:</p>

<pre><code>$ # zero params
$ msgpack-cli rpc localhost 8000 echo
[]
$
$ # single param
$ msgpack-cli rpc localhost 8000 echo 3.14159
[3.14159]
$
$ # multiple params (as json array)
$ msgpack-cli rpc localhost 8000 echo '["abc", "def", "ghi", {"A": 65, "B": 66, "C": 67}]'
["abc","def","ghi",{"A":65,"B":66,"C":67}]
</code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-SimpleMsgPack-Net" class="qs"><h4><a href="https://github.com/ymofen/SimpleMsgPack.Net" target="_blank">ymofen/SimpleMsgPack.Net <span class="qs-url">https://github.com/ymofen/SimpleMsgPack.Net</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-simplemsgpacknet" class="anchor" href="#simplemsgpacknet" aria-hidden="true"><span class="octicon octicon-link"></span></a>SimpleMsgPack.Net</h5>

<p>MessagePack implementation for C# / msgpack.org[C#] </p>

<p>Binary files distributed via the NuGet package <a href="http://www.nuget.org/packages/SimpleMsgPack/">SimpleMsgPack</a>.</p>

<p>It's like JSON but small and fast.</p>

<pre><code>unit Owner: D10.Mofen
contact:
       qq:185511468, 
    email:ymofen@diocp.org
    homepage:www.diocp.org
if you find any bug, please contact me!
</code></pre>

<h6>
<a id="user-content-works-with" class="anchor" href="#works-with" aria-hidden="true"><span class="octicon octicon-link"></span></a>Works with</h6>

<p>.NET Framework 4.x</p>

<h7>
<a id="user-content-code-example" class="anchor" href="#code-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code Example</h7>

<div class="highlight highlight-source-cs"><pre>    MsgPack msgpack = <span class="pl-k">new</span> MsgPack();
    msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.name<span class="pl-pds">"</span></span>).AsString = <span class="pl-s"><span class="pl-pds">"</span>张三<span class="pl-pds">"</span></span>;
    msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.age<span class="pl-pds">"</span></span>).AsInteger = <span class="pl-c1">25</span>;
    msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).AsArray.Add(<span class="pl-c1">90</span>);
    msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).AsArray.Add(<span class="pl-c1">80</span>);
    msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).AsArray.Add(<span class="pl-s"><span class="pl-pds">"</span>李四<span class="pl-pds">"</span></span>);
    msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).AsArray.Add(<span class="pl-c1">3.1415926</span>);

    <span class="pl-c">// pack file</span>
    msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.filedata<span class="pl-pds">"</span></span>).LoadFileAsBytes(<span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>a.png<span class="pl-pds">"</span></span>);

    <span class="pl-c">// pack msgPack binary</span>
    <span class="pl-k">byte</span>[] packData = msgpack.Encode2Bytes();

    MsgPack unpack_msgpack = <span class="pl-k">new</span> MsgPack();

    <span class="pl-c">// unpack msgpack</span>
    unpack_msgpack.DecodeFromBytes(packData);

    System.Console.WriteLine(<span class="pl-s"><span class="pl-pds">"</span>name:{0}, age:{1}<span class="pl-pds">"</span></span>,
          unpack_msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.name<span class="pl-pds">"</span></span>).AsString,
          unpack_msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.age<span class="pl-pds">"</span></span>).AsInteger);

    Console.WriteLine(<span class="pl-s"><span class="pl-pds">"</span>==================================<span class="pl-pds">"</span></span>);
    System.Console.WriteLine(<span class="pl-s"><span class="pl-pds">"</span>use index property, Length{0}:{1}<span class="pl-pds">"</span></span>,
          unpack_msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).AsArray.Length,
          unpack_msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>).AsArray[<span class="pl-c1">0</span>].AsString
          );

    Console.WriteLine(<span class="pl-s"><span class="pl-pds">"</span>==================================<span class="pl-pds">"</span></span>);
    Console.WriteLine(<span class="pl-s"><span class="pl-pds">"</span>use foreach statement:<span class="pl-pds">"</span></span>);
    <span class="pl-k">foreach</span> (MsgPack item <span class="pl-k">in</span> unpack_msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.datas<span class="pl-pds">"</span></span>))
    {
        Console.WriteLine(item.AsString);
    }

    <span class="pl-c">// unpack filedata </span>
    unpack_msgpack.ForcePathObject(<span class="pl-s"><span class="pl-pds">"</span>p.filedata<span class="pl-pds">"</span></span>).SaveBytesToFile(<span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>b.png<span class="pl-pds">"</span></span>);
    Console.Read();</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-thealchemist" class="qs"><h4><a href="https://github.com/ymofen/thealchemist" target="_blank">ymofen/thealchemist <span class="qs-url">https://github.com/ymofen/thealchemist</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-the-alchemist" class="anchor" href="#the-alchemist" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Alchemist</h5>

<p><a href="https://travis-ci.org/vertexclique/thealchemist"><img src="https://camo.githubusercontent.com/0e934e21d804822bd49d2e7a616ca540397dba17/68747470733a2f2f7472617669732d63692e6f72672f766572746578636c697175652f746865616c6368656d6973742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/vertexclique/thealchemist.svg?branch=master" style="max-width:100%;"></a></p>

<p>Elixir implementation bundle for MessagePack</p>

<p><a href="https://camo.githubusercontent.com/0951f3b966b46f3b8a5c8e7fdd6c2dde1a84f154/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/0951f3b966b46f3b8a5c8e7fdd6c2dde1a84f154/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067" alt="The Alchemist" data-canonical-src="http://www.whats-your-sign.com/images/AlchemySymbols.jpg" style="max-width:100%;"></a></p>

<p>Elixir implementation relies on <code>mururu/msgpack-elixir</code>
<a href="http://badge.fury.io/gh/mururu%2Fmsgpack-elixir"><img src="https://camo.githubusercontent.com/12454619ac1503d662f763767f2a29f36f594d45/68747470733a2f2f62616467652e667572792e696f2f67682f6d75727572752532466d73677061636b2d656c697869722e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/mururu%2Fmsgpack-elixir.svg" style="max-width:100%;"></a></p>

<p>Pure erlang implementation used with <code>msgpack/msgpack-erlang</code>
<a href="http://badge.fury.io/gh/msgpack%2Fmsgpack-erlang"><img src="https://camo.githubusercontent.com/5168eb3d47691288e71bbc7342f91bdd15bd3205/68747470733a2f2f62616467652e667572792e696f2f67682f6d73677061636b2532466d73677061636b2d65726c616e672e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/msgpack%2Fmsgpack-erlang.svg" style="max-width:100%;"></a></p>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<h7>
<a id="user-content-in-pure-elixir" class="anchor" href="#in-pure-elixir" aria-hidden="true"><span class="octicon octicon-link"></span></a> In pure elixir:</h7>

<div class="highlight highlight-source-elixir"><pre><span class="pl-c"># pack</span>
<span class="pl-c1">TheAlchemist</span>.pack([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]) <span class="pl-c">#=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }</span>
<span class="pl-c1">TheAlchemist</span>.pack!([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]) <span class="pl-c">#=&gt; &lt;&lt;147,1,2,3&gt;&gt;</span>

<span class="pl-c"># unpack</span>
<span class="pl-c1">TheAlchemist</span>.unpack(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; { :ok, [1,2,3] }</span>
<span class="pl-c1">TheAlchemist</span>.unpack!(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; [1,2,3]</span>

<span class="pl-c"># unpack_once</span>
<span class="pl-c1">TheAlchemist</span>.unpack_once(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}</span>
<span class="pl-c1">TheAlchemist</span>.unpack_once!(<span class="pl-k">&lt;&lt;</span><span class="pl-c1">147</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span><span class="pl-k">&gt;&gt;</span>) <span class="pl-c">#=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}</span>
</pre></div>

<h7>
<a id="user-content-with-underlying-erlang" class="anchor" href="#with-underlying-erlang" aria-hidden="true"><span class="octicon octicon-link"></span></a> With underlying erlang:</h7>

<h8>
<a id="user-content-deserialization" class="anchor" href="#deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deserialization</h8>

<div class="highlight highlight-source-elixir"><pre>msgpacked <span class="pl-k">=</span> <span class="pl-c1">TheAlchemistErl</span>.pack(<span class="pl-s"><span class="pl-pds">'</span>{"test":false}<span class="pl-pds">'</span></span>)
<span class="pl-c1">TheAlchemistErl</span>.unpack(msgpacked)</pre></div>

<h8>
<a id="user-content-stream-deserialization" class="anchor" href="#stream-deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stream deserialization</h8>

<div class="highlight highlight-source-elixir"><pre>mat <span class="pl-k">=</span> <span class="pl-c1">TheAlchemistErl</span>.unpack_stream(data)
<span class="pl-c1">TheAlchemistErl</span>.unpack_stream(elem(mat, <span class="pl-c1">1</span>)),</pre></div>

<h8>
<a id="user-content-string-type" class="anchor" href="#string-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>String type</h8>

<p>Now this supports string type!</p>

<div class="highlight highlight-source-elixir"><pre>opt <span class="pl-k">=</span> [{<span class="pl-c1">:enable_str</span>, <span class="pl-c1">true</span>}]
<span class="pl-c1">TheAlchemistErl</span>.unpack(<span class="pl-c1">TheAlchemistErl</span>.pack(<span class="pl-s"><span class="pl-pds">"</span>埼玉kanji<span class="pl-pds">"</span></span>, opt), opt)
 <span class="pl-k">=&gt;</span> {<span class="pl-c1">:ok</span>, <span class="pl-s"><span class="pl-pds">"</span>埼玉kanji<span class="pl-pds">"</span></span>}</pre></div>

<h8>
<a id="user-content-map-style" class="anchor" href="#map-style" aria-hidden="true"><span class="octicon octicon-link"></span></a>Map Style</h8>

<p>Since Erlang/OTP 17.0</p>

<div class="highlight highlight-source-erlang"><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>(#{ &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt; <span class="pl-k">=&gt;</span> &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt; }, [{<span class="pl-c1">format</span>, <span class="pl-c1">map</span>}]).</pre></div>

<p>Or use old jiffy/jsx style</p>

<div class="highlight highlight-source-erlang"><pre><span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>({[{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}]}, [{<span class="pl-c1">format</span>, <span class="pl-c1">jiffy</span>}]),
<span class="pl-en">msgpack</span>:<span class="pl-en">pack</span>([{&lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>&gt;&gt;, &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&gt;}], [{<span class="pl-c1">format</span>, <span class="pl-c1">jsx</span>}]).</pre></div>

<h6>
<a id="user-content-running-interactively" class="anchor" href="#running-interactively" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running interactively</h6>

<p>Firstly <code>make all</code> to ensure all source files are compiled
after that you can bring the <code>ERL shell</code> with</p>

<p><code>make run</code></p>

<p>If you want to bring the <code>IEX</code> you can type</p>

<p><code>make runex</code></p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack4z-msgpack4z-core" class="qs"><h4><a href="https://github.com/msgpack4z/msgpack4z-core" target="_blank">msgpack4z/msgpack4z-core <span class="qs-url">https://github.com/msgpack4z/msgpack4z-core</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack4z-core" class="anchor" href="#msgpack4z-core" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack4z-core</h5>

<p><a href="http://travis-ci.org/msgpack4z/msgpack4z-core"><img src="https://camo.githubusercontent.com/b364d30bed187c240de4bcc263194ca99ef1591c/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b347a2f6d73677061636b347a2d636f72652e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/msgpack4z/msgpack4z-core.png?branch=master" style="max-width:100%;"></a>
<a href="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-core_2.11"><img src="https://camo.githubusercontent.com/a73a91fa3efef97d78ae7dfbadb57e9a1f934e87/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d636f72655f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.github.xuwei-k/msgpack4z-core_2.11/badge.svg" style="max-width:100%;"></a>
<a href="http://javadoc-badge.appspot.com/com.github.xuwei-k/msgpack4z-core_2.11"><img src="https://camo.githubusercontent.com/bed9332e3f7a86c2a944d10ea08cee73a4cdd861/687474703a2f2f6a617661646f632d62616467652e61707073706f742e636f6d2f636f6d2e6769746875622e78757765692d6b2f6d73677061636b347a2d636f72655f322e31312e7376673f6c6162656c3d7363616c61646f63" alt="scaladoc" data-canonical-src="http://javadoc-badge.appspot.com/com.github.xuwei-k/msgpack4z-core_2.11.svg?label=scaladoc" style="max-width:100%;"></a>
<a href="https://www.versioneye.com/java/com.github.xuwei-k:msgpack4z-core_2.11/references"><img src="https://camo.githubusercontent.com/74171dba5a52ae5fbf94c8df8f3863fe5e7d21ce/68747470733a2f2f7777772e76657273696f6e6579652e636f6d2f6a6176612f636f6d2e6769746875622e78757765692d6b3a6d73677061636b347a2d636f72655f322e31312f7265666572656e63655f62616467652e7376673f7374796c653d666c6174" alt="Reference Status" data-canonical-src="https://www.versioneye.com/java/com.github.xuwei-k:msgpack4z-core_2.11/reference_badge.svg?style=flat" style="max-width:100%;"></a></p>

<ul>
<li><a href="http://msgpack.org/">http://msgpack.org/</a></li>
<li><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a></li>
</ul>

<h7>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>example</h7>

<ul>
<li><a href="https://github.com/msgpack4z/msgpack4z-core/blob/master/src/test/scala/msgpack4z/CaseClassExample.scala">https://github.com/msgpack4z/msgpack4z-core/blob/master/src/test/scala/msgpack4z/CaseClassExample.scala</a></li>
<li><a href="https://github.com/xuwei-k/msgpack-json/blob/640878e88171/src/main/scala/App.scala">https://github.com/xuwei-k/msgpack-json/blob/640878e88171/src/main/scala/App.scala</a></li>
</ul>

<h7>
<a id="user-content-latest-stable-version" class="anchor" href="#latest-stable-version" aria-hidden="true"><span class="octicon octicon-link"></span></a>latest stable version</h7>

<div class="highlight highlight-source-scala"><pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.xuwei-k<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>msgpack4z-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.1<span class="pl-pds">"</span></span></pre></div>

<ul>
<li><a href="https://oss.sonatype.org/service/local/repositories/releases/archive/com/github/xuwei-k/msgpack4z-core_2.11/0.3.1/msgpack4z-core_2.11-0.3.1-sxr.jar/!/index.html">sxr</a></li>
</ul>

<h7>
<a id="user-content-snapshot-version" class="anchor" href="#snapshot-version" aria-hidden="true"><span class="octicon octicon-link"></span></a>snapshot version</h7>

<div class="highlight highlight-source-scala"><pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.xuwei-k<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>msgpack4z-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.2-SNAPSHOT<span class="pl-pds">"</span></span>

resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Opts</span>.resolver.sonatypeSnapshots</pre></div>

<ul>
<li><a href="https://oss.sonatype.org/service/local/repositories/snapshots/archive/com/github/xuwei-k/msgpack4z-core_2.11/0.3.2-SNAPSHOT/msgpack4z-core_2.11-0.3.2-SNAPSHOT-sxr.jar/!/index.html">sxr</a></li>
</ul>

<h7>
<a id="user-content-dependency-graph" class="anchor" href="#dependency-graph" aria-hidden="true"><span class="octicon octicon-link"></span></a>dependency graph</h7>

<p><a href="http://msgpack4z.github.io/graph.svg"><img src="https://camo.githubusercontent.com/2d7060d5e007a005e7bb886c4d75523174ca5307/687474703a2f2f6d73677061636b347a2e6769746875622e696f2f67726170682e737667" alt="graph" data-canonical-src="http://msgpack4z.github.io/graph.svg" style="max-width:100%;"></a></p>

<h7>
<a id="user-content-for-scalaz-71x" class="anchor" href="#for-scalaz-71x" aria-hidden="true"><span class="octicon octicon-link"></span></a>for scalaz 7.1.x</h7>

<p><a href="https://github.com/msgpack4z/msgpack4z-core/tree/0.2.x">https://github.com/msgpack4z/msgpack4z-core/tree/0.2.x</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-jakm-txmsgpackrpc" class="qs"><h4><a href="https://github.com/jakm/txmsgpackrpc" target="_blank">jakm/txmsgpackrpc <span class="qs-url">https://github.com/jakm/txmsgpackrpc</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-txmsgpackrpc" class="anchor" href="#txmsgpackrpc" aria-hidden="true"><span class="octicon octicon-link"></span></a>txmsgpackrpc</h5>
<p>For the latest source code, see <a href="http://github.com/jakm/txmsgpackrpc">http://github.com/jakm/txmsgpackrpc</a></p>
<p><code>txmsgpackrpc</code> is a library for writing asynchronous
<a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc</a>
servers and clients in Python, using <a href="http://twistedmatrix.com">Twisted
framework</a>. Library is based on
<a href="https://github.com/donalm/txMsgpack">txMsgpack</a>, but some
improvements and fixes were made.</p>
<a name="user-content-features"></a>
<h6>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h6>
<ul>
<li>user friendly API</li>
<li>modular object model</li>
<li>working timeouts and reconnecting</li>
<li>connection pool support</li>
<li>TCP, SSL, UDP and UNIX sockets</li>
</ul>
<a name="user-content-python-3-note"></a>
<h6>
<a id="user-content-python-3-note" class="anchor" href="#python-3-note" aria-hidden="true"><span class="octicon octicon-link"></span></a>Python 3 note</h6>
<p>To use UNIX sockets with Python 3 please use Twisted framework 15.3.0 and above.</p>
<a name="user-content-dependencies"></a>
<h6>
<a id="user-content-dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h6>
<ul>
<li>msgpack-python <a href="https://pypi.python.org/pypi/msgpack-python/">https://pypi.python.org/pypi/msgpack-python/</a>
</li>
<li>Twisted <a href="http://twistedmatrix.com/trac/">http://twistedmatrix.com/trac/</a>
</li>
</ul>
<a name="user-content-installation"></a>
<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>
<div class="highlight highlight-source-shell"><pre>% pip install txmsgpackrpc</pre></div>
<p>Debian packages are available on project's <a href="https://github.com/jakm/txmsgpackrpc/releases/latest">Releases
page</a>.</p>
<a name="user-content-tcp-example"></a>
<h6>
<a id="user-content-tcp-example" class="anchor" href="#tcp-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>TCP example</h6>
<p>Computation of PI using Chudnovsky algorithm in subprocess. For details,
see <a href="http://www.craig-wood.com/nick/articles/pi-chudnovsky/">http://www.craig-wood.com/nick/articles/pi-chudnovsky/</a>.</p>
<a name="user-content-results"></a>
<h7>
<a id="user-content-results" class="anchor" href="#results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Results</h7>
<pre>Computation of PI with 5 places finished in 0.022390 seconds

Computation of PI with 100 places finished in 0.037856 seconds

Computation of PI with 1000 places finished in 0.038070 seconds

Computation of PI with 10000 places finished in 0.073907 seconds

Computation of PI with 100000 places finished in 6.741683 seconds

Computation of PI with 5 places finished in 0.001142 seconds

Computation of PI with 100 places finished in 0.001182 seconds

Computation of PI with 1000 places finished in 0.001206 seconds

Computation of PI with 10000 places finished in 0.001230 seconds

Computation of PI with 100000 places finished in 0.001255 seconds

Computation of PI with 1000000 places finished in 432.574457 seconds

Computation of PI with 1000000 places finished in 402.551226 seconds

DONE
</pre>
<a name="user-content-server"></a>
<h7>
<a id="user-content-server" class="anchor" href="#server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Server</h7>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> __future__ <span class="pl-k">import</span> print_function

<span class="pl-k">from</span> collections <span class="pl-k">import</span> defaultdict
<span class="pl-k">from</span> twisted.internet <span class="pl-k">import</span> defer, reactor, utils
<span class="pl-k">from</span> twisted.python <span class="pl-k">import</span> failure
<span class="pl-k">from</span> txmsgpackrpc.server <span class="pl-k">import</span> MsgpackRPCServer


pi_chudovsky_bs <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'''</span></span>
<span class="pl-s">"""</span>
<span class="pl-s">Python3 program to calculate Pi using python long integers, binary</span>
<span class="pl-s">splitting and the Chudnovsky algorithm</span>
<span class="pl-s"></span>
<span class="pl-s">See: http://www.craig-wood.com/nick/articles/pi-chudnovsky/ for more</span>
<span class="pl-s">info</span>
<span class="pl-s"></span>
<span class="pl-s">Nick Craig-Wood &lt;nick@craig-wood.com&gt;</span>
<span class="pl-s">"""</span>
<span class="pl-s"></span>
<span class="pl-s">import math</span>
<span class="pl-s">from time import time</span>
<span class="pl-s"></span>
<span class="pl-s">def sqrt(n, one):</span>
<span class="pl-s">    """</span>
<span class="pl-s">    Return the square root of n as a fixed point number with the one</span>
<span class="pl-s">    passed in.  It uses a second order Newton-Raphson convgence.  This</span>
<span class="pl-s">    doubles the number of significant figures on each iteration.</span>
<span class="pl-s">    """</span>
<span class="pl-s">    # Use floating point arithmetic to make an initial guess</span>
<span class="pl-s">    floating_point_precision = 10**16</span>
<span class="pl-s">    n_float = float((n * floating_point_precision) // one) / floating_point_precision</span>
<span class="pl-s">    x = (int(floating_point_precision * math.sqrt(n_float)) * one) // floating_point_precision</span>
<span class="pl-s">    n_one = n * one</span>
<span class="pl-s">    while 1:</span>
<span class="pl-s">        x_old = x</span>
<span class="pl-s">        x = (x + n_one // x) // 2</span>
<span class="pl-s">        if x == x_old:</span>
<span class="pl-s">            break</span>
<span class="pl-s">    return x</span>
<span class="pl-s"></span>
<span class="pl-s">def pi_chudnovsky_bs(digits):</span>
<span class="pl-s">    """</span>
<span class="pl-s">    Compute int(pi * 10**digits)</span>
<span class="pl-s"></span>
<span class="pl-s">    This is done using Chudnovsky's series with binary splitting</span>
<span class="pl-s">    """</span>
<span class="pl-s">    C = 640320</span>
<span class="pl-s">    C3_OVER_24 = C**3 // 24</span>
<span class="pl-s">    def bs(a, b):</span>
<span class="pl-s">        """</span>
<span class="pl-s">        Computes the terms for binary splitting the Chudnovsky infinite series</span>
<span class="pl-s"></span>
<span class="pl-s">        a(a) = +/- (13591409 + 545140134*a)</span>
<span class="pl-s">        p(a) = (6*a-5)*(2*a-1)*(6*a-1)</span>
<span class="pl-s">        b(a) = 1</span>
<span class="pl-s">        q(a) = a*a*a*C3_OVER_24</span>
<span class="pl-s"></span>
<span class="pl-s">        returns P(a,b), Q(a,b) and T(a,b)</span>
<span class="pl-s">        """</span>
<span class="pl-s">        if b - a == 1:</span>
<span class="pl-s">            # Directly compute P(a,a+1), Q(a,a+1) and T(a,a+1)</span>
<span class="pl-s">            if a == 0:</span>
<span class="pl-s">                Pab = Qab = 1</span>
<span class="pl-s">            else:</span>
<span class="pl-s">                Pab = (6*a-5)*(2*a-1)*(6*a-1)</span>
<span class="pl-s">                Qab = a*a*a*C3_OVER_24</span>
<span class="pl-s">            Tab = Pab * (13591409 + 545140134*a) # a(a) * p(a)</span>
<span class="pl-s">            if a &amp; 1:</span>
<span class="pl-s">                Tab = -Tab</span>
<span class="pl-s">        else:</span>
<span class="pl-s">            # Recursively compute P(a,b), Q(a,b) and T(a,b)</span>
<span class="pl-s">            # m is the midpoint of a and b</span>
<span class="pl-s">            m = (a + b) // 2</span>
<span class="pl-s">            # Recursively calculate P(a,m), Q(a,m) and T(a,m)</span>
<span class="pl-s">            Pam, Qam, Tam = bs(a, m)</span>
<span class="pl-s">            # Recursively calculate P(m,b), Q(m,b) and T(m,b)</span>
<span class="pl-s">            Pmb, Qmb, Tmb = bs(m, b)</span>
<span class="pl-s">            # Now combine</span>
<span class="pl-s">            Pab = Pam * Pmb</span>
<span class="pl-s">            Qab = Qam * Qmb</span>
<span class="pl-s">            Tab = Qmb * Tam + Pam * Tmb</span>
<span class="pl-s">        return Pab, Qab, Tab</span>
<span class="pl-s">    # how many terms to compute</span>
<span class="pl-s">    DIGITS_PER_TERM = math.log10(C3_OVER_24/6/2/6)</span>
<span class="pl-s">    N = int(digits/DIGITS_PER_TERM + 1)</span>
<span class="pl-s">    # Calclate P(0,N) and Q(0,N)</span>
<span class="pl-s">    P, Q, T = bs(0, N)</span>
<span class="pl-s">    one = 10**digits</span>
<span class="pl-s">    sqrtC = sqrt(10005*one, one)</span>
<span class="pl-s">    return (Q*426880*sqrtC) // T</span>
<span class="pl-s"></span>
<span class="pl-s">if __name__ == "__main__":</span>
<span class="pl-s">    import sys</span>
<span class="pl-s">    digits = int(sys.argv[1])</span>
<span class="pl-s">    pi = pi_chudnovsky_bs(digits)</span>
<span class="pl-s">    print(pi)</span>
<span class="pl-s"><span class="pl-pds">'''</span></span>


<span class="pl-k">def</span> <span class="pl-en">set_timeout</span>(<span class="pl-smi">deferred</span>, <span class="pl-smi">timeout</span><span class="pl-k">=</span><span class="pl-c1">30</span>):
    <span class="pl-k">def</span> <span class="pl-en">callback</span>(<span class="pl-smi">value</span>):
        <span class="pl-k">if</span> <span class="pl-k">not</span> watchdog.called:
            watchdog.cancel()
        <span class="pl-k">return</span> value

    deferred.addBoth(callback)

    watchdog <span class="pl-k">=</span> reactor.callLater(timeout, defer.timeout, deferred)


<span class="pl-k">class</span> <span class="pl-en">ComputePI</span>(<span class="pl-e">MsgpackRPCServer</span>):

    <span class="pl-k">def</span> <span class="pl-en"><span class="pl-c1">__init__</span></span>(<span class="pl-smi">self</span>):
        <span class="pl-v">self</span>.waiting <span class="pl-k">=</span> defaultdict(<span class="pl-c1">list</span>)
        <span class="pl-v">self</span>.results <span class="pl-k">=</span> {}

    <span class="pl-k">def</span> <span class="pl-en">remote_PI</span>(<span class="pl-smi">self</span>, <span class="pl-smi">digits</span>, <span class="pl-smi">timeout</span><span class="pl-k">=</span><span class="pl-c1">None</span>):
        <span class="pl-k">if</span> digits <span class="pl-k">in</span> <span class="pl-v">self</span>.results:
            <span class="pl-k">return</span> defer.succeed(<span class="pl-v">self</span>.results[digits])

        d <span class="pl-k">=</span> defer.Deferred()

        <span class="pl-k">if</span> digits <span class="pl-k">not</span> <span class="pl-k">in</span> <span class="pl-v">self</span>.waiting:
            subprocessDeferred <span class="pl-k">=</span> <span class="pl-v">self</span>.computePI(digits, timeout)

            <span class="pl-k">def</span> <span class="pl-en">callWaiting</span>(<span class="pl-smi">res</span>):
                waiting <span class="pl-k">=</span> <span class="pl-v">self</span>.waiting[digits]
                <span class="pl-k">del</span> <span class="pl-v">self</span>.waiting[digits]

                <span class="pl-k">if</span> <span class="pl-c1">isinstance</span>(res, failure.Failure):
                    func <span class="pl-k">=</span> <span class="pl-k">lambda</span> <span class="pl-smi">d</span>: d.errback(res)
                <span class="pl-k">else</span>:
                    func <span class="pl-k">=</span> <span class="pl-k">lambda</span> <span class="pl-smi">d</span>: d.callback(res)

                <span class="pl-k">for</span> d <span class="pl-k">in</span> waiting:
                    func(d)

            subprocessDeferred.addBoth(callWaiting)

        <span class="pl-v">self</span>.waiting[digits].append(d)

        <span class="pl-k">return</span> d

    <span class="pl-k">def</span> <span class="pl-en">computePI</span>(<span class="pl-smi">self</span>, <span class="pl-smi">digits</span>, <span class="pl-smi">timeout</span>):
        d <span class="pl-k">=</span> utils.getProcessOutputAndValue(<span class="pl-s"><span class="pl-pds">'</span>/usr/bin/python<span class="pl-pds">'</span></span>, <span class="pl-smi">args</span><span class="pl-k">=</span>(<span class="pl-s"><span class="pl-pds">'</span>-c<span class="pl-pds">'</span></span>, pi_chudovsky_bs, <span class="pl-c1">str</span>(digits)))

        <span class="pl-k">def</span> <span class="pl-en">callback</span>((<span class="pl-smi">out</span>, <span class="pl-smi">err</span>, <span class="pl-smi">code</span>)):
            <span class="pl-k">if</span> code <span class="pl-k">==</span> <span class="pl-c1">0</span>:
                pi <span class="pl-k">=</span> <span class="pl-c1">int</span>(out)
                <span class="pl-v">self</span>.results[digits] <span class="pl-k">=</span> pi
                <span class="pl-k">return</span> pi
            <span class="pl-k">else</span>:
                <span class="pl-k">return</span> failure.Failure(<span class="pl-c1">RuntimeError</span>(<span class="pl-s"><span class="pl-pds">'</span>Computation failed: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> err))

        <span class="pl-k">if</span> timeout <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:
            set_timeout(d, timeout)

        d.addCallback(callback)

        <span class="pl-k">return</span> d


<span class="pl-k">def</span> <span class="pl-en">main</span>():
    server <span class="pl-k">=</span> ComputePI()
    reactor.listenTCP(<span class="pl-c1">8000</span>, server.getStreamFactory())

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>
<a name="user-content-client"></a>
<h7>
<a id="user-content-client" class="anchor" href="#client" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client</h7>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> __future__ <span class="pl-k">import</span> print_function

<span class="pl-k">import</span> sys
<span class="pl-k">import</span> time
<span class="pl-k">from</span> twisted.internet <span class="pl-k">import</span> defer, reactor, task
<span class="pl-k">from</span> twisted.python <span class="pl-k">import</span> failure

<span class="pl-en">@defer.inlineCallbacks</span>
<span class="pl-k">def</span> <span class="pl-en">main</span>():
    <span class="pl-k">try</span>:

        <span class="pl-k">from</span> txmsgpackrpc.client <span class="pl-k">import</span> connect

        c <span class="pl-k">=</span> <span class="pl-k">yield</span> connect(<span class="pl-s"><span class="pl-pds">'</span>localhost<span class="pl-pds">'</span></span>, <span class="pl-c1">8000</span>, <span class="pl-smi">waitTimeout</span><span class="pl-k">=</span><span class="pl-c1">900</span>)

        <span class="pl-k">def</span> <span class="pl-en">callback</span>(<span class="pl-smi">res</span>, <span class="pl-smi">digits</span>, <span class="pl-smi">start_time</span>):
            <span class="pl-k">if</span> <span class="pl-c1">isinstance</span>(res, failure.Failure):
                <span class="pl-k">print</span>(<span class="pl-s"><span class="pl-pds">'</span>Computation of PI with <span class="pl-c1">%d</span> places failed: <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span>
                      (digits, res.getErrorMessage()), end<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\n\n</span><span class="pl-pds">'</span></span>)
            <span class="pl-k">else</span>:
                <span class="pl-k">print</span>(<span class="pl-s"><span class="pl-pds">'</span>Computation of PI with <span class="pl-c1">%d</span> places finished in <span class="pl-c1">%f</span> seconds<span class="pl-pds">'</span></span> <span class="pl-k">%</span>
                      (digits, time.time() <span class="pl-k">-</span> start_time), end<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\n\n</span><span class="pl-pds">'</span></span>)
            sys.stdout.flush()

        defers <span class="pl-k">=</span> []
        <span class="pl-k">for</span> _ <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">2</span>):
            <span class="pl-k">for</span> digits <span class="pl-k">in</span> (<span class="pl-c1">5</span>, <span class="pl-c1">100</span>, <span class="pl-c1">1000</span>, <span class="pl-c1">10000</span>, <span class="pl-c1">100000</span>, <span class="pl-c1">1000000</span>):
                d <span class="pl-k">=</span> c.createRequest(<span class="pl-s"><span class="pl-pds">'</span>PI<span class="pl-pds">'</span></span>, digits, <span class="pl-c1">600</span>)
                d.addBoth(callback, digits, time.time())
                defers.append(d)
            <span class="pl-c"># wait for 30 seconds</span>
            <span class="pl-k">yield</span> task.deferLater(reactor, <span class="pl-c1">30</span>, <span class="pl-k">lambda</span>: <span class="pl-c1">None</span>)

        <span class="pl-k">yield</span> defer.DeferredList(defers)

        <span class="pl-k">print</span>(<span class="pl-s"><span class="pl-pds">'</span>DONE<span class="pl-pds">'</span></span>)

    <span class="pl-k">except</span> <span class="pl-c1">Exception</span>:
        <span class="pl-k">import</span> traceback
        traceback.print_exc()
    <span class="pl-k">finally</span>:
        reactor.stop()

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>
<a name="user-content-multicast-udp-example"></a>
<h6>
<a id="user-content-multicast-udp-example" class="anchor" href="#multicast-udp-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Multicast UDP example</h6>
<p>Example servers join to group 224.0.0.5 and listen on port 8000. Their only
method <code>echo</code> returns its parameter.</p>
<p>Client joins group to 224.0.0.5, sends multicast request to group on port 8000
and waits for 5 seconds for responses. If some responses are received,
protocol callbacks with tuple of results and individual parts are checked for
errors. If no responses are received, protocol errbacks with TimeoutError.</p>
<p>Because there is no common way to determine number of peers in group,
MsgpackMulticastDatagramProtocol always wait for responses until waitTimeout
expires.</p>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"># setup multicast routing</span>
$ ip route add 224.0.0.0/4 dev eth0
$ <span class="pl-c1">echo</span> 1 <span class="pl-k">&gt;</span> /proc/sys/net/ipv4/ip_forward
$
$ <span class="pl-c"># start servers listening on port 8000</span>
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[1] 3584
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[2] 3585
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[3] 3586
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[4] 3587
$ python examples/tx_rpc_server_udp_multicast.py <span class="pl-k">&amp;</span>
[5] 3588
$
$ <span class="pl-c"># execute client</span>
$ python examples/tx_rpc_client_udp_multicast.py
Received results from 5 peers
$</pre></div>
<a name="user-content-id1"></a>
<h7>
<a id="user-content-server-1" class="anchor" href="#server-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Server</h7>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> twisted.internet <span class="pl-k">import</span> defer, reactor, task
<span class="pl-k">from</span> txmsgpackrpc.server <span class="pl-k">import</span> MsgpackRPCServer


<span class="pl-k">class</span> <span class="pl-en">EchoRPC</span>(<span class="pl-e">MsgpackRPCServer</span>):

    <span class="pl-en">@defer.inlineCallbacks</span>
    <span class="pl-k">def</span> <span class="pl-en">remote_echo</span>(<span class="pl-smi">self</span>, <span class="pl-smi">value</span>, <span class="pl-smi">delay</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-smi">msgid</span><span class="pl-k">=</span><span class="pl-c1">None</span>):
        <span class="pl-k">if</span> delay <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:
            <span class="pl-k">yield</span> task.deferLater(reactor, delay, <span class="pl-k">lambda</span>: <span class="pl-c1">None</span>)
        defer.returnValue(value)


<span class="pl-k">def</span> <span class="pl-en">main</span>():
    server <span class="pl-k">=</span> EchoRPC()
    reactor.listenMulticast(<span class="pl-c1">8000</span>, server.getMulticastProtocol(<span class="pl-s"><span class="pl-pds">'</span>228.0.0.5<span class="pl-pds">'</span></span>, <span class="pl-smi">ttl</span><span class="pl-k">=</span><span class="pl-c1">5</span>),
                            <span class="pl-smi">listenMultiple</span><span class="pl-k">=</span><span class="pl-c1">True</span>)

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>
<a name="user-content-id2"></a>
<h7>
<a id="user-content-client-1" class="anchor" href="#client-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client</h7>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> __future__ <span class="pl-k">import</span> print_function

<span class="pl-k">from</span> twisted.internet <span class="pl-k">import</span> defer, reactor

<span class="pl-en">@defer.inlineCallbacks</span>
<span class="pl-k">def</span> <span class="pl-en">main</span>():
    <span class="pl-k">try</span>:

        <span class="pl-k">from</span> txmsgpackrpc.client <span class="pl-k">import</span> connect_multicast

        c <span class="pl-k">=</span> <span class="pl-k">yield</span> connect_multicast(<span class="pl-s"><span class="pl-pds">'</span>228.0.0.5<span class="pl-pds">'</span></span>, <span class="pl-c1">8000</span>, <span class="pl-smi">ttl</span><span class="pl-k">=</span><span class="pl-c1">5</span>, <span class="pl-smi">waitTimeout</span><span class="pl-k">=</span><span class="pl-c1">5</span>)

        data <span class="pl-k">=</span> {
                    <span class="pl-s"><span class="pl-pds">'</span>firstName<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>John<span class="pl-pds">'</span></span>,
                    <span class="pl-s"><span class="pl-pds">'</span>lastName<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Smith<span class="pl-pds">'</span></span>,
                    <span class="pl-s"><span class="pl-pds">'</span>isAlive<span class="pl-pds">'</span></span>: <span class="pl-c1">True</span>,
                    <span class="pl-s"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span>: <span class="pl-c1">25</span>,
                    <span class="pl-s"><span class="pl-pds">'</span>height_cm<span class="pl-pds">'</span></span>: <span class="pl-c1">167.6</span>,
                    <span class="pl-s"><span class="pl-pds">'</span>address<span class="pl-pds">'</span></span>: {
                      <span class="pl-s"><span class="pl-pds">'</span>streetAddress<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">"</span>21 2nd Street<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>city<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">'</span>New York<span class="pl-pds">'</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>state<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">'</span>NY<span class="pl-pds">'</span></span>,
                      <span class="pl-s"><span class="pl-pds">'</span>postalCode<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>10021-3100<span class="pl-pds">'</span></span>
                    },
                    <span class="pl-s"><span class="pl-pds">'</span>phoneNumbers<span class="pl-pds">'</span></span>: [
                      {
                        <span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>home<span class="pl-pds">'</span></span>,
                        <span class="pl-s"><span class="pl-pds">'</span>number<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>212 555-1234<span class="pl-pds">'</span></span>
                      },
                      {
                        <span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>office<span class="pl-pds">'</span></span>,
                        <span class="pl-s"><span class="pl-pds">'</span>number<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>646 555-4567<span class="pl-pds">'</span></span>
                      }
                    ],
                    <span class="pl-s"><span class="pl-pds">'</span>children<span class="pl-pds">'</span></span>: [],
                    <span class="pl-s"><span class="pl-pds">'</span>spouse<span class="pl-pds">'</span></span>: <span class="pl-c1">None</span>
                  }

        results <span class="pl-k">=</span> <span class="pl-k">yield</span> c.createRequest(<span class="pl-s"><span class="pl-pds">'</span>echo<span class="pl-pds">'</span></span>, data)

        <span class="pl-k">assert</span> <span class="pl-c1">isinstance</span>(results, <span class="pl-c1">tuple</span>)

        <span class="pl-k">print</span>(<span class="pl-s"><span class="pl-pds">'</span>Received results from <span class="pl-c1">%d</span> peers<span class="pl-pds">'</span></span> <span class="pl-k">%</span> <span class="pl-c1">len</span>(results))

        <span class="pl-k">for</span> i, result <span class="pl-k">in</span> <span class="pl-c1">enumerate</span>(results):
            <span class="pl-k">if</span> result <span class="pl-k">!=</span> data:
                <span class="pl-k">print</span>(<span class="pl-s"><span class="pl-pds">'</span>Result <span class="pl-c1">%d</span> mismatch<span class="pl-pds">'</span></span> <span class="pl-k">%</span> i)
                <span class="pl-k">print</span>(result)

    <span class="pl-k">except</span> <span class="pl-c1">Exception</span>:
        <span class="pl-k">import</span> traceback
        traceback.print_exc()
    <span class="pl-k">finally</span>:
        reactor.stop()

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>

</article>
  </div>
        </div>
        
        <div id="qs-jonghough-msgpack-j" class="qs"><h4><a href="https://github.com/jonghough/msgpack-j" target="_blank">jonghough/msgpack-j <span class="qs-url">https://github.com/jonghough/msgpack-j</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-j" class="anchor" href="#msgpack-j" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-j</h5>

<p>Implementation of the Message Pack serialization format in J.</p>

<h7>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h7>

<p>import into projects and open in jqt or other. It's very simple. </p>

<h7>
<a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h7>

<p><code>pack</code> packs J types into a byte string. <code>unpack</code> reverses this.</p>

<pre><code>  `pack 'hello world'`

     `�hello world`

  `unpack �hello world`

     `'hello world'`
</code></pre>

<p><b><code>packObj</code></b> packs J types into a hex string (string literal). <b><code>unpackObj</code></b> reverses this.</p>

<p>e.g.</p>

<pre><code>   `packObj 'Hello World'`

     `ab48656c6c6f20576f726c64`

  `unpackObj 'ab48656c6c6f20576f726c64'`

     `Hello World`
</code></pre>

<h7>
<a id="user-content-more-usage" class="anchor" href="#more-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>More Usage</h7>

<p>Example:</p>

<pre><code>  `pack 2;4.67;'hello, world'`

     `���@┐�┼z�G��hello, world`

  `packObj 2;4.67;'hello, world'`

     `9302cb4012ae147ae147aeac68656c6c6f2c20776f726c64`
</code></pre>

<p>JSON representation:
      <code>[2,4.67,"hello, world"]</code></p>

<p>Example: </p>

<pre><code>  `unpackObj '81a46461746183a2696401a673636f72657394cb400999999999999acb4016cccccccccccdcb40091eb851eb851fcb4007333333333333a56f7468657283a4736f6d65d1f2b8a46d6f7265ccc8a4646174610c'`
</code></pre>

<p>returns a nested dictionary. </p>

<p>JSON representation:</p>

<pre><code>  `{"data":{"id":1,"scores":[3.2,5.7,3.14,2.9],"other":{"some":_3400,"more":200,"data":12}}}`
</code></pre>

<h7>
<a id="user-content-handling-dictionary--hashmap-datatypes" class="anchor" href="#handling-dictionary--hashmap-datatypes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Handling dictionary / hashmap datatypes</h7>

<p>Since J has no native Dictionary / Hashmap type, one has been implemented for the purposes of MsgPack serialization.</p>

<p>Construction:</p>

<pre><code>  `HM =: '' conew 'HashMap'`
</code></pre>

<p>This will instantiate a new HashMap object.</p>

<pre><code>  `set__HM 'key';'value'`
</code></pre>

<p>This will add a key value pair to the dicitonary. Note the length of the boxed array argument must be two. i.e. if  the value is an array itself, then it must be boxed together before appending to the key value.</p>

<pre><code>  `get__HM 'key'`
</code></pre>

<p>This will return the value for the given key, if one exists.</p>

<p>To pack a HashMap:</p>

<pre><code>  `packObj s: HM`
</code></pre>

<p>Here HM is the HashMap reference name. It must be symbolized first, before packing. Furthermore, to add a HashMap as a value of another HashMap:</p>

<pre><code>  `set__HM 'hashmapkey';s:HM2`
</code></pre>

<p>The inner HashMap reference (HM2) must be symbolized before adding to the dictionary. If you are adding a list of HashMaps to the parent HashMap:</p>

<pre><code>  `set__HM 'key'; &lt;(s:HM2;s:HM3;s:HM4)`
</code></pre>

<p>Note the HashMap array is boxed so that the argument for <code>set</code> is of length two. Since the HashMap <code>HM</code> stores the reference to the child HashMaps as symbols, they must be desymbolized if retrieved. e.g.</p>

<pre><code>  `ChildHM =: getHashmapFromValue_HashMap_ get__HM 'mychildHashMapkey'`
</code></pre>

<p>Here, <b><code>getHashmapFromValue_HashMap_</code></b> ensures that the retrieved object is a reference to a hashmap, as is wanted.</p>

<p>When unpacking data, assuming the root object is a dictionary / hashmap:</p>

<pre><code>  `HM =: 5 s: unpackObj 'some serialized data'`
</code></pre>

<p><b><code>5 s:</code></b> must be called to desymbolize the reference to the HashMap. Furthermore, all child HashMaps of <code>HM</code> must also be desymbolized too.</p>

<p>`</p>
</article>
  </div>
        </div>
        
        <div id="qs-a2-MessagePack-swift" class="qs"><h4><a href="https://github.com/a2/MessagePack.swift" target="_blank">a2/MessagePack.swift <span class="qs-url">https://github.com/a2/MessagePack.swift</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepackswift" class="anchor" href="#messagepackswift" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack.swift</h5>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>MessagePack.swift is released under the <a href="https://github.com/a2/MessagePack.swift/blob/master/LICENSE">MIT license</a>, which is reproduced below in its entirety:</p>

<blockquote>
<p>Copyright (c) 2015 Alexsander Akers</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</blockquote>

<h6>
<a id="user-content-availability" class="anchor" href="#availability" aria-hidden="true"><span class="octicon octicon-link"></span></a>Availability</h6>

<p>MessagePack.swift is intended for use with Swift 2.0. Compatibility with past and future versions is not guaranteed.</p>
</article>
  </div>
        </div>
        
        <div id="qs-akiradeveloper-msgpack-nim" class="qs"><h4><a href="https://github.com/akiradeveloper/msgpack-nim" target="_blank">akiradeveloper/msgpack-nim <span class="qs-url">https://github.com/akiradeveloper/msgpack-nim</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><p>I will start this project once Nim compiler reaches 1.0</p>

<h5>
<a id="user-content-msgpack-nim" class="anchor" href="#msgpack-nim" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-nim</h5>

<p>A MessagePack binding for Nim</p>

<p><a href="https://travis-ci.org/akiradeveloper/msgpack-nim"><img src="https://camo.githubusercontent.com/fafee151bfb3e0cfecd74e540d07e84245b0feb3/68747470733a2f2f7472617669732d63692e6f72672f616b697261646576656c6f7065722f6d73677061636b2d6e696d2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/akiradeveloper/msgpack-nim.svg?branch=master" style="max-width:100%;"></a></p>

<p>API: <a href="https://rawgit.com/akiradeveloper/msgpack-nim/master/msgpack.html">https://rawgit.com/akiradeveloper/msgpack-nim/master/msgpack.html</a></p>

<p>msgpack-nim currently provides only the basic functionality.
Please see what's listed in Todo section. Compared to other language bindings, it's well-tested by
1000 auto-generated test cases by Haskell QuickCheck, which always runs
on every commit to Github repository. Please try <code>make quickcheck</code> on your local machine
to see what happens (It will take a bit while. Be patient). Have a nice packing!</p>

<p><a href="https://camo.githubusercontent.com/98a4aa48feec91b3cfa37ab7b62a90df53e2f1ff/68747470733a2f2f7261776769742e636f6d2f616b697261646576656c6f7065722f6d73677061636b2d6e696d2f6d61737465722f6f766572766965772e737667" target="_blank"><img src="https://camo.githubusercontent.com/98a4aa48feec91b3cfa37ab7b62a90df53e2f1ff/68747470733a2f2f7261776769742e636f6d2f616b697261646576656c6f7065722f6d73677061636b2d6e696d2f6d61737465722f6f766572766965772e737667" alt="Overview" data-canonical-src="https://rawgit.com/akiradeveloper/msgpack-nim/master/overview.svg" style="max-width:100%;"></a></p>

<h6>
<a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h6>

<div class="highlight highlight-source-shell"><pre>$ nimble update
$ nimble install msgpack</pre></div>

<h6>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h6>

<div class="highlight highlight-source-nim"><pre><span class="pl-k">import</span> msgpack
<span class="pl-k">import</span> streams

<span class="pl-c"># You can use any stream subclasses to serialize/deserialize</span>
<span class="pl-c"># messages. e.g. FileStream</span>
<span class="pl-k">let</span> st: Stream = <span class="pl-c1">newStringStream</span>()

<span class="pl-c1">assert</span>(st.getPosition == <span class="pl-c1">0</span>)

<span class="pl-c"># Type checking protects you from making trivial mistakes.</span>
<span class="pl-c"># Now we pack {"a":[5,-3], "b":[1,2,3]} but more complex</span>
<span class="pl-c"># combination of any Msg types is allowed.</span>
<span class="pl-c">#</span>
<span class="pl-c"># In xs we can mix specific conversion (PFixNum) and generic</span>
<span class="pl-c"># conversion (unwrap).</span>
<span class="pl-k">let</span> xs: Msg = <span class="pl-c1">wrap</span>(@[<span class="pl-c1">PFixNum</span>(<span class="pl-c1">5</span>), (<span class="pl-k">-</span><span class="pl-c1">3</span>)<span class="pl-k">.</span>wrap])
<span class="pl-k">let</span> ys: Msg = <span class="pl-c1">wrap</span>(@[(<span class="pl-s">"a"</span><span class="pl-k">.</span>wrap, xs.wrap), (<span class="pl-s">"b"</span><span class="pl-k">.</span>wrap, @[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>].wrap)])
st.<span class="pl-c1">pack</span>(ys.wrap) <span class="pl-c"># Serialize!</span>

<span class="pl-c"># We need to reset the cursor to the beginning of the target</span>
<span class="pl-c"># byte sequence.</span>
st.<span class="pl-c1">setPosition</span>(<span class="pl-c1">0</span>)

<span class="pl-k">let</span> msg = st.unpack <span class="pl-c"># Deserialize!</span>

<span class="pl-c"># output:</span>
<span class="pl-c"># a</span>
<span class="pl-c"># 5</span>
<span class="pl-c"># -3</span>
<span class="pl-c"># b</span>
<span class="pl-c"># 1</span>
<span class="pl-c"># 2</span>
<span class="pl-c"># 3</span>
<span class="pl-k">for</span> e <span class="pl-k">in</span> msg.unwrapMap:
  <span class="pl-c1">echo</span> e.key.unwrapStr
  <span class="pl-k">for</span> e <span class="pl-k">in</span> e.val.unwrapArray:
    <span class="pl-c1">echo</span> e.unwrapInt</pre></div>

<h6>
<a id="user-content-todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Todo</h6>

<ul>
<li>Implement unwrapInto to convert Msg object to Nim object handily<br>
</li>
<li>Evaluate performance and scalability<br>
</li>
<li>Talk with offical Ruby implementation<br>
</li>
<li>Don't repeat yourself: The code now has too much duplications. Using templates?<br>
</li>
</ul>

<h6>
<a id="user-content-author" class="anchor" href="#author" aria-hidden="true"><span class="octicon octicon-link"></span></a>Author</h6>

<p>Akira Hayakawa (<a href="mailto:ruby.wktk@gmail.com">ruby.wktk@gmail.com</a>)</p>
</article>
  </div>
        </div>
        
        <div id="qs-ludocode-mpack" class="qs"><h4><a href="https://github.com/ludocode/mpack" target="_blank">ludocode/mpack <span class="qs-url">https://github.com/ludocode/mpack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h6>
<a id="user-content-introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h6>

<p>MPack is a C implementation of an encoder and decoder for the <a href="http://msgpack.org/">MessagePack</a> serialization format. It is intended to be:</p>

<ul>
<li>Simple and easy to use</li>
<li>Secure against untrusted data</li>
<li>Lightweight, suitable for embedded</li>
<li><a href="http://ludocode.github.io/mpack/">Extensively documented</a></li>
<li>Extremely fast</li>
</ul>

<p>The core of MPack contains a buffered reader and writer with a custom callback to fill or flush the buffer. Helper functions can be enabled to read values of expected type, to work with files, to allocate strings automatically, to check UTF-8 encoding, and more. The MPack featureset can be configured at compile-time to set which features, components and debug checks are compiled, and what dependencies are available.</p>

<p>The MPack code is small enough to be embedded directly into your codebase. The easiest way to use it is to download the <a href="https://github.com/ludocode/mpack/releases">amalgamation package</a> and insert the source files directly into your project. Copy <code>mpack.h</code> and <code>mpack.c</code> into to your codebase, and copy <code>mpack-config.h.sample</code> as <code>mpack-config.h</code>. You can use the defaults or edit it if you'd like to customize the MPack featureset.</p>

<p>MPack is written in the portable intersection of C99 and C++. In other words, it's written in C99, but if you are stuck using a certain popular compiler from a certain unpopular vendor that refuses to support C99, you can compile it as C++ instead.</p>

<h6>
<a id="user-content-build-status" class="anchor" href="#build-status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build Status</h6>

<p>MPack is beta software under development.</p>

<table>
<thead>
<tr>
<th align="center"><a href="https://travis-ci.org/">Travis-CI</a></th>
<th align="center"><a href="https://coveralls.io/">Coveralls.io</a></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="https://travis-ci.org/ludocode/mpack/branches"><img src="https://camo.githubusercontent.com/dabfb27ce58997332acdab1b1e8aaf85632af861/68747470733a2f2f7472617669732d63692e6f72672f6c75646f636f64652f6d7061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/ludocode/mpack.svg?branch=master" style="max-width:100%;"></a></td>
<td align="center"><a href="https://coveralls.io/github/ludocode/mpack?branch=master"><img src="https://camo.githubusercontent.com/44c90ed886959cccd09afd3cfb1e095ae072c970/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6c75646f636f64652f6d7061636b2f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/ludocode/mpack/badge.svg?branch=master&amp;service=github" style="max-width:100%;"></a></td>
</tr>
</tbody>
</table>

<h6>
<a id="user-content-the-node-reader-api" class="anchor" href="#the-node-reader-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Node Reader API</h6>

<p>The Node API parses a chunk of MessagePack data into an immutable tree of dynamically-typed nodes. A series of helper functions can be used to extract data of specific types from each node.</p>

<div class="highlight highlight-source-c"><pre><span class="pl-c">// parse a file into a node tree</span>
<span class="pl-c1">mpack_tree_t</span> tree;
<span class="pl-en">mpack_tree_init_file</span>(&amp;tree, <span class="pl-s"><span class="pl-pds">"</span>homepage-example.mp<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>);
<span class="pl-c1">mpack_node_t</span> root = mpack_tree_root(&amp;tree);

<span class="pl-c">// extract the example data on the msgpack homepage</span>
<span class="pl-k">bool</span> compact = mpack_node_bool(mpack_node_map_cstr(root, <span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>));
<span class="pl-k">int</span> schema = mpack_node_i32(mpack_node_map_cstr(root, <span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>));

<span class="pl-c">// clean up and check for errors</span>
<span class="pl-k">if</span> (mpack_tree_destroy(tree) != mpack_ok) {
    <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>An error occurred decoding the data!<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>);
    <span class="pl-k">return</span>;
}</pre></div>

<p>Note that no additional error handling is needed in the above code. If the file is missing or corrupt, if map keys are missing or if nodes are not in the expected types, special "nil" nodes and false/zero values are returned and the tree is placed in an error state. An error check is only needed before using the data.</p>

<h6>
<a id="user-content-the-write-api" class="anchor" href="#the-write-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Write API</h6>

<p>The MPack Write API encodes structured data to MessagePack.</p>

<div class="highlight highlight-source-c"><pre><span class="pl-c">// encode to memory buffer</span>
<span class="pl-k">char</span>* data;
<span class="pl-c1">size_t</span> size;
<span class="pl-c1">mpack_writer_t</span> writer;
<span class="pl-en">mpack_writer_init_growable</span>(&amp;writer, &amp;data, &amp;size);

<span class="pl-c">// write the example on the msgpack homepage</span>
<span class="pl-en">mpack_start_map</span>(&amp;writer, <span class="pl-c1">2</span>);
<span class="pl-en">mpack_write_cstr</span>(&amp;writer, <span class="pl-s"><span class="pl-pds">"</span>compact<span class="pl-pds">"</span></span>);
<span class="pl-en">mpack_write_bool</span>(&amp;writer, <span class="pl-c1">true</span>);
<span class="pl-en">mpack_write_cstr</span>(&amp;writer, <span class="pl-s"><span class="pl-pds">"</span>schema<span class="pl-pds">"</span></span>);
<span class="pl-en">mpack_write_uint</span>(&amp;writer, <span class="pl-c1">0</span>);
<span class="pl-en">mpack_finish_map</span>(&amp;writer);

<span class="pl-c">// finish writing</span>
<span class="pl-k">if</span> (mpack_writer_destroy(&amp;writer) != mpack_ok) {
    <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>An error occurred encoding the data!<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>);
    <span class="pl-k">return</span>;
}

<span class="pl-c">// use the data</span>
<span class="pl-en">do_something_with_data</span>(data, size);
<span class="pl-en">free</span>(data);</pre></div>

<p>In the above example, we encode to a growable memory buffer. The writer can instead write to a pre-allocated or stack-allocated buffer, avoiding the need for memory allocation. The writer can also be provided with a flush function (such as a file or socket write function) to call when the buffer is full or when writing is done.</p>

<p>If any error occurs, the writer is placed in an error state. The writer will flag an error if too much data is written, if the wrong number of elements are written, if the data could not be flushed, etc. No additional error handling is needed in the above code; any subsequent writes are ignored when the writer is in an error state, so you don't need to check every write for errors.</p>

<p>Note in particular that in debug mode, the <code>mpack_finish_map()</code> call above ensures that two key/value pairs were actually written as claimed, something that other MessagePack C/C++ libraries may not do.</p>

<h6>
<a id="user-content-why-not-just-use-json" class="anchor" href="#why-not-just-use-json" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why Not Just Use JSON?</h6>

<p>Conceptually, MessagePack stores data similarly to JSON: they are both composed of simple values such as numbers and strings, stored hierarchically in maps and arrays. So why not just use JSON instead? The main reason is that JSON is designed to be human-readable, so it is not as efficient as a binary serialization format:</p>

<ul>
<li><p>Compound types such as strings, maps and arrays are delimited, so appropriate storage cannot be allocated upfront. The whole object must be parsed to determine its size.</p></li>
<li><p>Strings are not stored in their native encoding. Special characters such as quotes and backslashes must be escaped when written and converted back when read.</p></li>
<li><p>Numbers are particularly inefficient (especially when parsing back floats), making JSON inappropriate as a base format for structured data that contains lots of numbers.</p></li>
<li><p>Binary data is not supported by JSON at all. Small binary blobs such as icons and thumbnails need to be Base64 encoded or passed out-of-band.</p></li>
</ul>

<p>The above issues greatly increase the complexity of the decoder. Full-featured JSON decoders are quite large, and minimal decoders tend to leave out such features as string unescaping and float parsing, instead leaving these up to the user or platform. This can lead to hard-to-find platform-specific and locale-specific bugs. This also significantly decreases performance, making JSON unattractive for use in applications such as mobile games.</p>

<p>While the space inefficiencies of JSON can be partially mitigated through minification and compression, the performance inefficiencies cannot. More importantly, if you are minifying and compressing the data, then why use a human-readable format in the first place?</p>

<h6>
<a id="user-content-running-the-unit-tests" class="anchor" href="#running-the-unit-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running the Unit Tests</h6>

<p>The MPack build process does not build MPack into a library; it is used to build and run the unit tests. You do not need to build MPack or the unit testing suite to use MPack.</p>

<p>On Linux, the test suite uses SCons and requires Valgrind, and can be run in the repository or in the amalgamation package. Run <code>scons</code> to build and run the test suite in full debug configuration.</p>

<p>On Windows, there is a Visual Studio solution, and on OS X, there is an Xcode project for building and running the test suite.</p>

<p>You can also build and run the test suite in all supported configurations, which is what the continuous integration server will build and run. If you are on 64-bit, you will need support for cross-compiling to 32-bit, and running 32-bit binaries with 64-bit Valgrind. On Ubuntu, you'll need <code>libc6-dbg:i386</code>. On Arch you'll need <code>gcc-multilib</code> or <code>lib32-clang</code>, and <code>valgrind-multilib</code>. Use <code>scons all=1 -j16</code> (or some appropriate thread count) to build and run all tests.</p>
</article>
  </div>
        </div>
        
        <div id="qs-3Hren-msgpack-rust" class="qs"><h4><a href="https://github.com/3Hren/msgpack-rust" target="_blank">3Hren/msgpack-rust <span class="qs-url">https://github.com/3Hren/msgpack-rust</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-rmp---rust-messagepack" class="anchor" href="#rmp---rust-messagepack" aria-hidden="true"><span class="octicon octicon-link"></span></a>RMP - Rust MessagePack</h5>

<p>RMP is a pure Rust <a href="http://msgpack.org">MessagePack</a> implementation.</p>

<p><a href="https://travis-ci.org/3Hren/msgpack-rust"><img src="https://camo.githubusercontent.com/20ebe3c911448a9065b08456ca2756bac8286aa1/68747470733a2f2f7472617669732d63692e6f72672f334872656e2f6d73677061636b2d727573742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/3Hren/msgpack-rust.svg?branch=master" style="max-width:100%;"></a>
<a href="https://coveralls.io/github/3Hren/msgpack-rust?branch=master"><img src="https://camo.githubusercontent.com/ff5a42d50bd6a64d9dd01983996bef139104bf5e/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f334872656e2f6d73677061636b2d727573742f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/3Hren/msgpack-rust/badge.svg?branch=master&amp;service=github" style="max-width:100%;"></a></p>

<p>This repository consists of three separate crates: the RMP core and two implementations to ease serializing and
deserializing Rust structs.</p>

<table>
<thead>
<tr>
<th></th>
<th>Crates.io</th>
<th>API Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>rmp</strong></td>
<td><a href="https://crates.io/crates/rmp"><img src="https://camo.githubusercontent.com/8cd4852fe3605c05bbfc01d2d37be8977aab0d4f/687474703a2f2f6d6572697462616467652e6865726f6b756170702e636f6d2f726d70" alt="" data-canonical-src="http://meritbadge.herokuapp.com/rmp" style="max-width:100%;"></a></td>
<td><a href="http://3hren.github.io/msgpack-rust/rmp/rmp/index.html">RMP</a></td>
</tr>
<tr>
<td><strong>rmp-serialize</strong></td>
<td><a href="https://crates.io/crates/rmp-serialize"><img src="https://camo.githubusercontent.com/25e25b0b737dd4d649c6ab4d56171339a3b4703a/687474703a2f2f6d6572697462616467652e6865726f6b756170702e636f6d2f726d702d73657269616c697a65" alt="" data-canonical-src="http://meritbadge.herokuapp.com/rmp-serialize" style="max-width:100%;"></a></td>
<td><a href="http://3hren.github.io/msgpack-rust/rmp-serialize/rmp_serialize/index.html">RMP Serialize</a></td>
</tr>
<tr>
<td><strong>rmp-serde</strong></td>
<td><a href="https://crates.io/crates/rmp-serde"><img src="https://camo.githubusercontent.com/f078f56b2e0bdb20e7999f74513eaf949e2a3bb2/687474703a2f2f6d6572697462616467652e6865726f6b756170702e636f6d2f726d702d7365726465" alt="" data-canonical-src="http://meritbadge.herokuapp.com/rmp-serde" style="max-width:100%;"></a></td>
<td><a href="http://3hren.github.io/msgpack-rust/rmp-serde/rmp_serde/index.html">RMP Serde</a></td>
</tr>
</tbody>
</table>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<p>To use <code>rmp</code>, first add this to your <code>Cargo.toml</code>:</p>

<div class="highlight highlight-source-toml"><pre>[<span class="pl-en">dependencies</span>.<span class="pl-en">rmp</span>]
<span class="pl-smi">rmp</span> = <span class="pl-s"><span class="pl-pds">"</span>^0.7<span class="pl-pds">"</span></span></pre></div>

<p>Then, add this to your crate root:</p>

<div class="highlight highlight-source-rust"><pre><span class="pl-k">extern</span> <span class="pl-k">crate</span> rmp <span class="pl-k">as</span> msgpack<span class="pl-k">;</span> <span class="pl-c">// Or just `rmp`.</span></pre></div>

<h6>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h6>

<ul>
<li>
<p><strong>Convenient API</strong></p>

<p>RMP is designed to be lightweight and straightforward. There are low-level API, which gives you
full control on data encoding/decoding process and makes no heap allocations. On the other hand
there are high-level API, which provides you convenient interface using Rust standard library and
compiler reflection, allowing to encode/decode structures using <code>derive</code> attribute.</p>
</li>
<li>
<p><strong>Zero-copy value decoding</strong></p>

<p>RMP allows to decode bytes from a buffer in a zero-copy manner easily and blazingly fast, while Rust
static checks guarantees that the data will be valid until buffer lives.</p>
</li>
<li>
<p><strong>Clear error handling</strong></p>

<p>RMP's error system guarantees that you never receive an error enum with unreachable variant.</p>
</li>
<li>
<p><strong>Robust and tested</strong></p>

<p>This project is developed using TDD and CI, so any found bugs will be fixed without breaking
existing functionality.</p>
</li>
</ul>

<h6>
<a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h6>

<p>Let's try to encode a tuple of int and string.</p>

<div class="highlight highlight-source-rust"><pre><span class="pl-k">extern</span> <span class="pl-k">crate</span> rmp_serialize <span class="pl-k">as</span> msgpack<span class="pl-k">;</span>
<span class="pl-k">extern</span> <span class="pl-k">crate</span> rustc_serialize<span class="pl-k">;</span>

<span class="pl-k">use</span> rustc_serialize<span class="pl-k">::</span><span class="pl-k">Encodable</span><span class="pl-k">;</span>
<span class="pl-k">use</span> msgpack<span class="pl-k">::</span><span class="pl-k">Encoder</span><span class="pl-k">;</span>

<span class="pl-k">fn</span> <span class="pl-en">main</span>() {
    <span class="pl-k">let</span> val <span class="pl-k">=</span> (<span class="pl-c1">42u8</span><span class="pl-k">,</span> <span class="pl-s">"the Answer"</span>)<span class="pl-k">;</span>

    <span class="pl-c">// The encoder borrows the bytearray buffer.</span>
    <span class="pl-k">let</span> <span class="pl-k">mut</span> buf <span class="pl-k">=</span> [<span class="pl-c1">0u8</span><span class="pl-k">;</span> <span class="pl-c1">13</span>]<span class="pl-k">;</span>

    val<span class="pl-k">.</span><span class="pl-c1">encode</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> <span class="pl-k">Encoder</span><span class="pl-k">::</span><span class="pl-c1">new</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> <span class="pl-k">&amp;</span><span class="pl-k">mut</span> buf[<span class="pl-k">..</span>]))<span class="pl-k">;</span>

    assert_eq<span class="pl-k">!</span>([<span class="pl-c1">0x92</span><span class="pl-k">,</span> <span class="pl-c1">0x2a</span><span class="pl-k">,</span> <span class="pl-c1">0xaa</span><span class="pl-k">,</span> <span class="pl-c1">0x74</span><span class="pl-k">,</span> <span class="pl-c1">0x68</span><span class="pl-k">,</span> <span class="pl-c1">0x65</span><span class="pl-k">,</span> <span class="pl-c1">0x20</span><span class="pl-k">,</span> <span class="pl-c1">0x41</span><span class="pl-k">,</span> <span class="pl-c1">0x6e</span><span class="pl-k">,</span> <span class="pl-c1">0x73</span><span class="pl-k">,</span> <span class="pl-c1">0x77</span><span class="pl-k">,</span> <span class="pl-c1">0x65</span><span class="pl-k">,</span> <span class="pl-c1">0x72</span>]<span class="pl-k">,</span> buf)<span class="pl-k">;</span>
}</pre></div>

<p>Now we have an encoded buffer, which we can decode the same way:</p>

<div class="highlight highlight-source-rust"><pre><span class="pl-k">extern</span> <span class="pl-k">crate</span> rmp_serialize <span class="pl-k">as</span> msgpack<span class="pl-k">;</span>
<span class="pl-k">extern</span> <span class="pl-k">crate</span> rustc_serialize<span class="pl-k">;</span>

<span class="pl-k">use</span> rustc_serialize<span class="pl-k">::</span><span class="pl-k">Decodable</span><span class="pl-k">;</span>
<span class="pl-k">use</span> msgpack<span class="pl-k">::</span><span class="pl-k">Decoder</span><span class="pl-k">;</span>

<span class="pl-k">fn</span> <span class="pl-en">main</span>() {
    <span class="pl-k">let</span> buf <span class="pl-k">=</span> [<span class="pl-c1">0x92</span><span class="pl-k">,</span> <span class="pl-c1">0x2a</span><span class="pl-k">,</span> <span class="pl-c1">0xaa</span><span class="pl-k">,</span> <span class="pl-c1">0x74</span><span class="pl-k">,</span> <span class="pl-c1">0x68</span><span class="pl-k">,</span> <span class="pl-c1">0x65</span><span class="pl-k">,</span> <span class="pl-c1">0x20</span><span class="pl-k">,</span> <span class="pl-c1">0x41</span><span class="pl-k">,</span> <span class="pl-c1">0x6e</span><span class="pl-k">,</span> <span class="pl-c1">0x73</span><span class="pl-k">,</span> <span class="pl-c1">0x77</span><span class="pl-k">,</span> <span class="pl-c1">0x65</span><span class="pl-k">,</span> <span class="pl-c1">0x72</span>]<span class="pl-k">;</span>

    <span class="pl-k">let</span> <span class="pl-k">mut</span> decoder <span class="pl-k">=</span> <span class="pl-k">Decoder</span><span class="pl-k">::</span><span class="pl-c1">new</span>(<span class="pl-k">&amp;</span>buf[<span class="pl-k">..</span>])<span class="pl-k">;</span>

    <span class="pl-k">let</span> res<span class="pl-k">:</span> (<span class="pl-k">u8</span><span class="pl-k">,</span> <span class="pl-k">String</span>) <span class="pl-k">=</span> <span class="pl-k">Decodable</span><span class="pl-k">::</span><span class="pl-c1">decode</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> decoder)<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">;</span>

    assert_eq<span class="pl-k">!</span>((<span class="pl-c1">42u8</span><span class="pl-k">,</span> <span class="pl-s">"the Answer"</span><span class="pl-k">.</span><span class="pl-c1">to_string</span>())<span class="pl-k">,</span> res)<span class="pl-k">;</span>
}</pre></div>

<p>RMP also allows to automatically serialize/deserialize custom structures using rustc_serialize
reflection. To enable this feature, derive RustcEncodable and RustcDecodable attributes as
shown in the following example:</p>

<div class="highlight highlight-source-rust"><pre><span class="pl-k">extern</span> <span class="pl-k">crate</span> rmp_serialize <span class="pl-k">as</span> msgpack<span class="pl-k">;</span>
<span class="pl-k">extern</span> <span class="pl-k">crate</span> rustc_serialize<span class="pl-k">;</span>

<span class="pl-k">use</span> rustc_serialize<span class="pl-k">::</span>{<span class="pl-k">Encodable</span><span class="pl-k">,</span> <span class="pl-k">Decodable</span>}<span class="pl-k">;</span>
<span class="pl-k">use</span> msgpack<span class="pl-k">::</span>{<span class="pl-k">Encoder</span><span class="pl-k">,</span> <span class="pl-k">Decoder</span>}<span class="pl-k">;</span>

<span class="pl-c">#[derive(RustcEncodable, RustcDecodable, PartialEq, Debug)]</span>
<span class="pl-k">struct</span> <span class="pl-k">Custom</span> {
    id<span class="pl-k">:</span> <span class="pl-k">u32</span><span class="pl-k">,</span>
    key<span class="pl-k">:</span> <span class="pl-k">String</span><span class="pl-k">,</span>
}

<span class="pl-k">fn</span> <span class="pl-en">main</span>() {
    <span class="pl-k">let</span> val <span class="pl-k">=</span> <span class="pl-k">Custom</span> { id<span class="pl-k">:</span> <span class="pl-c1">42u32</span><span class="pl-k">,</span> key<span class="pl-k">:</span> <span class="pl-s">"the Answer"</span><span class="pl-k">.</span><span class="pl-c1">to_string</span>() }<span class="pl-k">;</span>

    <span class="pl-k">let</span> <span class="pl-k">mut</span> buf <span class="pl-k">=</span> [<span class="pl-c1">0u8</span><span class="pl-k">;</span> <span class="pl-c1">13</span>]<span class="pl-k">;</span>

    val<span class="pl-k">.</span><span class="pl-c1">encode</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> <span class="pl-k">Encoder</span><span class="pl-k">::</span><span class="pl-c1">new</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> <span class="pl-k">&amp;</span><span class="pl-k">mut</span> buf[<span class="pl-k">..</span>]))<span class="pl-k">;</span>

    assert_eq<span class="pl-k">!</span>([<span class="pl-c1">0x92</span><span class="pl-k">,</span> <span class="pl-c1">0x2a</span><span class="pl-k">,</span> <span class="pl-c1">0xaa</span><span class="pl-k">,</span> <span class="pl-c1">0x74</span><span class="pl-k">,</span> <span class="pl-c1">0x68</span><span class="pl-k">,</span> <span class="pl-c1">0x65</span><span class="pl-k">,</span> <span class="pl-c1">0x20</span><span class="pl-k">,</span> <span class="pl-c1">0x41</span><span class="pl-k">,</span> <span class="pl-c1">0x6e</span><span class="pl-k">,</span> <span class="pl-c1">0x73</span><span class="pl-k">,</span> <span class="pl-c1">0x77</span><span class="pl-k">,</span> <span class="pl-c1">0x65</span><span class="pl-k">,</span> <span class="pl-c1">0x72</span>]<span class="pl-k">,</span> buf)<span class="pl-k">;</span>

    <span class="pl-c">// Now try to unpack the buffer into the initial struct.</span>
    <span class="pl-k">let</span> <span class="pl-k">mut</span> decoder <span class="pl-k">=</span> <span class="pl-k">Decoder</span><span class="pl-k">::</span><span class="pl-c1">new</span>(<span class="pl-k">&amp;</span>buf[<span class="pl-k">..</span>])<span class="pl-k">;</span>
    <span class="pl-k">let</span> res<span class="pl-k">:</span> <span class="pl-k">Custom</span> <span class="pl-k">=</span> <span class="pl-k">Decodable</span><span class="pl-k">::</span><span class="pl-c1">decode</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> decoder)<span class="pl-k">.</span><span class="pl-c1">ok</span>()<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">;</span>

    assert_eq<span class="pl-k">!</span>(val<span class="pl-k">,</span> res)<span class="pl-k">;</span>
}</pre></div>

<h6>
<a id="user-content-versioning" class="anchor" href="#versioning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Versioning</h6>

<p>This project adheres to <a href="http://semver.org/">Semantic Versioning</a>. However until 1.0.0 comes there
will be the following rules:</p>

<ul>
<li>Any API/ABI breaking changes will be notified in the changelog explicitly and results in minor
version bumping.</li>
<li>API extending features results in minor version bumping.</li>
<li>Non-breaking bug fixes and performance improving results in patch version bumping.</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-jangko-msgpack4nim" class="qs"><h4><a href="https://github.com/jangko/msgpack4nim" target="_blank">jangko/msgpack4nim <span class="qs-url">https://github.com/jangko/msgpack4nim</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack4nim" class="anchor" href="#msgpack4nim" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack4nim</h5>

<p><a href="http://msgpack.org/">MessagePack</a> implementation written in pure nim</p>

<h7>
<a id="user-content-why-another-implementation" class="anchor" href="#why-another-implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a>why another implementation?</h7>

<p>I am fully aware of <a href="https://github.com/akiradeveloper/msgpack-nim">another</a> msgpack implementation written in nim. But I want something easier to use. Another motivation come from the nim language itself. The current version of nim compiler offer many improvements, including 'generics ' specialization. I found out nim compiler is smart enough to make serialization/deserialization to/from msgpack easy and convenient.</p>

<p><strong>requirement:</strong> nim ver 0.11.2 or later</p>

<h6>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h6>

<div class="highlight highlight-source-nim"><pre><span class="pl-k">import</span> msgpack, streams

<span class="pl-k">type</span>
  <span class="pl-c">#lets try with a rather complex object</span>
  CustomType = <span class="pl-k">object</span>
    count: <span class="pl-k">int</span>
    content: <span class="pl-k">seq</span>[<span class="pl-k">int</span>]
    name: <span class="pl-k">string</span>
    ratio: <span class="pl-k">float</span>
    attr: <span class="pl-k">array</span>[<span class="pl-c1">0</span>..<span class="pl-c1">5</span>, <span class="pl-k">int</span>]
    ok: <span class="pl-k">bool</span>

<span class="pl-k">proc</span> <span class="pl-en">initCustomType</span>()<span class="pl-k">:</span> CustomType <span class="pl-k">=</span>
  result.count = -<span class="pl-c1">1</span>
  result.content = @[<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]
  result.name = <span class="pl-s">"custom"</span>
  result.ratio = <span class="pl-c1">1.0</span>
  <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">0</span>..<span class="pl-c1">5</span>: result.attr[i] = i
  result.ok = <span class="pl-c1">false</span>

<span class="pl-k">var</span> x = <span class="pl-c1">initCustomType</span>()
<span class="pl-c">#you can use another stream compatible</span>
<span class="pl-c">#class here e.g. FileStream</span>
<span class="pl-k">var</span> s = <span class="pl-c1">newStringStream</span>()
s.<span class="pl-c1">pack</span>(x) <span class="pl-c">#here the magic happened</span>

s.<span class="pl-c1">setPosition</span>(<span class="pl-c1">0</span>)
<span class="pl-k">var</span> xx: CustomType
s.<span class="pl-c1">unpack</span>(xx) <span class="pl-c">#and here too</span>

assert xx == x
<span class="pl-c1">echo</span> <span class="pl-s">"OK "</span>, xx.name</pre></div>

<p>see? you only need to call 'pack' and 'unpack', and the compiler do the hard work for you. Very easy, convenient, and works well</p>

<p>if you think setting up a StringStream too much for you, you can simply call pack(yourobject) and it will return a string containing msgpack data.</p>

<div class="highlight highlight-source-nim"><pre>  <span class="pl-k">var</span> a = @[<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>,<span class="pl-c1">5</span>,<span class="pl-c1">6</span>,<span class="pl-c1">7</span>,<span class="pl-c1">8</span>,<span class="pl-c1">9</span>,<span class="pl-c1">0</span>]
  <span class="pl-k">var</span> buf = <span class="pl-c1">pack</span>(a)
  <span class="pl-k">var</span> aa: <span class="pl-k">seq</span>[<span class="pl-k">int</span>]
  <span class="pl-c1">unpack</span>(buf, aa)
  <span class="pl-c1">assert</span> a == aa</pre></div>

<p>in case the compiler cannot decide how to serialize or deserialize your very very complex object, you can help it in easy way
by defining your own handler pack_type/unpack_type</p>

<div class="highlight highlight-source-nim"><pre><span class="pl-k">type</span>
  <span class="pl-c">#not really complex, just for example</span>
  mycomplexobject = <span class="pl-k">object</span>
    a: someSimpleType
    b: someSimpleType

<span class="pl-c">#help the compiler to decide</span>
<span class="pl-k">proc</span> <span class="pl-en">pack_type</span><span class="pl-k">*</span>(s: Stream, x: mycomplexobject) <span class="pl-k">=</span>
  s.<span class="pl-c1">pack</span>(x.a) <span class="pl-c"># let the compiler decide</span>
  s.<span class="pl-c1">pack</span>(x.b) <span class="pl-c"># let the compiler decide</span>

<span class="pl-c">#help the compiler to decide</span>
<span class="pl-k">proc</span> <span class="pl-en">unpack_type</span><span class="pl-k">*</span>(s: Stream, x: <span class="pl-k">var</span> complexobject) <span class="pl-k">=</span>
  s.<span class="pl-c1">unpack</span>(x.a)
  s.<span class="pl-c1">unpack</span>(x.b)

<span class="pl-k">var</span> s: <span class="pl-c1">newStringStream</span>()
<span class="pl-k">var</span> x: mycomplexobject

s.<span class="pl-c1">pack</span>(x) <span class="pl-c">#pack as usual</span>

s.<span class="pl-c1">setPosition</span>(<span class="pl-c1">0</span>)
s.<span class="pl-c1">unpack</span>(x) <span class="pl-c">#unpack as usual</span></pre></div>

<h6>
<a id="user-content-data-conversion" class="anchor" href="#data-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data Conversion</h6>

<table>
<thead>
<tr>
<th><strong>nim</strong></th>
<th><strong>msgpack</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>int8/16/32/64</td>
<td>int8/16/32/64</td>
</tr>
<tr>
<td>uint8/16/32/64</td>
<td>uint8/16/32/64</td>
</tr>
<tr>
<td>true/false/nil</td>
<td>true/false/nil</td>
</tr>
<tr>
<td>procedural type</td>
<td>ignored</td>
</tr>
<tr>
<td>cstring</td>
<td>ignored</td>
</tr>
<tr>
<td>pointer</td>
<td>ignored</td>
</tr>
<tr>
<td>ptr</td>
<td><a href="#ref-types">see ref-types</a></td>
</tr>
<tr>
<td>ref</td>
<td><a href="#ref-types">see ref-types</a></td>
</tr>
<tr>
<td>circular ref</td>
<td><a href="#ref-types">see ref-types</a></td>
</tr>
<tr>
<td>distinct types</td>
<td>converted to base type</td>
</tr>
<tr>
<td>float32/64</td>
<td>float32/64</td>
</tr>
<tr>
<td>string</td>
<td>string8/16/32</td>
</tr>
<tr>
<td>array/seq</td>
<td>array</td>
</tr>
<tr>
<td>set</td>
<td>array</td>
</tr>
<tr>
<td>range/subrange</td>
<td>int8/16/32/64</td>
</tr>
<tr>
<td>enum</td>
<td>int8/16/32/64</td>
</tr>
<tr>
<td>IntSet,Doubly/SinglyLinkedList</td>
<td>array</td>
</tr>
<tr>
<td>Doubly/SinglyLinkedRing</td>
<td>array</td>
</tr>
<tr>
<td>Queue,HashSet,OrderedSet</td>
<td>array</td>
</tr>
<tr>
<td>Table,TableRef</td>
<td>map</td>
</tr>
<tr>
<td>OrderedTable,OrderedTableRef</td>
<td>map</td>
</tr>
<tr>
<td>StringTableRef</td>
<td>map</td>
</tr>
<tr>
<td>CritBitTree[T]</td>
<td>map</td>
</tr>
<tr>
<td>CritBitTree[void]</td>
<td>array</td>
</tr>
<tr>
<td>object/tuple</td>
<td>array/map</td>
</tr>
</tbody>
</table>

<h6>
<a id="user-content-object-and-tuple" class="anchor" href="#object-and-tuple" aria-hidden="true"><span class="octicon octicon-link"></span></a>object and tuple</h6>

<p>object and tuple by default converted to msgpack array, however
you can tell the compiler to convert it to map by supplying --define:msgpack_obj_to_map</p>

<div class="highlight highlight-source-shell"><pre>nim c --define:msgpack_obj_to_map yourfile.nim</pre></div>

<p>or --define:msgpack_obj_to_stream to convert object/tuple fields <em>value</em> into stream of msgpack objects</p>

<div class="highlight highlight-source-shell"><pre>nim c --define:msgpack_obj_to_stream yourfile.nim</pre></div>

<h8>
<a id="user-content-ref-types" class="anchor" href="#ref-types" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>ref-types:</strong>
</h8>

<p><em>ref something</em> :</p>

<ul>
<li>if ref value is nil, it will be packed into msgpack nil, and when unpacked, usually will do nothing except seq[T] will be @[]</li>
<li>if ref value not nil, it will be dereferenced e.g. pack(val[]) or unpack(val[])</li>
<li>ref subject to some restriction. see <strong>restriction</strong> below</li>
<li>ptr will be treated like ref during pack</li>
<li>unpacking ptr will invoke alloc, so you must dealloc it</li>
</ul>

<p><em>circular reference</em>:
altough detecting circular reference is not too difficult(using set of pointers), the current implementation does not provide circular reference detection. If you pack something contains circular reference, you know something bad will happened</p>

<p><strong>Restriction</strong>:
 For objects their type is <strong>not</strong> serialized. This means essentially that it does not work if the object has some other runtime type than its compiletime type:</p>

<div class="highlight highlight-source-nim"><pre><span class="pl-k">import</span> streams, msgpack

<span class="pl-k">type</span>
  TA = <span class="pl-k">object</span> <span class="pl-k">of</span> RootObj
  TB = <span class="pl-k">object</span> <span class="pl-k">of</span> TA
    f: <span class="pl-k">int</span>

<span class="pl-k">var</span>
  a: <span class="pl-k">ref</span> TA
  b: <span class="pl-k">ref</span> TB

<span class="pl-c1">new</span>(b)
a = b

<span class="pl-c1">echo</span> <span class="pl-c1">stringify</span>(<span class="pl-c1">pack</span>(a))
<span class="pl-c">#produces "[ ]" or "{ }"</span>
<span class="pl-c">#not "[ 0 ]" or '{ "f" : 0 }'</span></pre></div>

<h8>
<a id="user-content-limitation" class="anchor" href="#limitation" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>limitation:</strong>
</h8>

<p>these types will be ignored:</p>

<ul>
<li>procedural type</li>
<li>cstring(it is not safe to assume it always terminated by null)</li>
<li>pointer</li>
</ul>

<p>these types cannot be automatically pack/unpacked:</p>

<ul>
<li>
<em>void</em> (will cause compile time error)</li>
</ul>

<p>however, you can provide your own handler for cstring and pointer</p>

<p><strong>Gotchas:</strong>
because data conversion did not preserve original data types, the following code is perfectly valid and will raise no exception</p>

<div class="highlight highlight-source-nim"><pre><span class="pl-k">import</span> msgpack, streams, tables, sets, strtabs

<span class="pl-k">type</span>
  Horse = <span class="pl-k">object</span>
    legs: <span class="pl-k">int</span>
    foals: <span class="pl-k">seq</span>[<span class="pl-k">string</span>]
    attr: Table[<span class="pl-k">string</span>, <span class="pl-k">string</span>]

  Cat = <span class="pl-k">object</span>
    legs: <span class="pl-k">uint8</span>
    kittens: HashSet[<span class="pl-k">string</span>]
    traits: StringTableRef

<span class="pl-k">proc</span> <span class="pl-en">initHorse</span>()<span class="pl-k">:</span> Horse <span class="pl-k">=</span>
  result.legs = <span class="pl-c1">4</span>
  result.foals = @[<span class="pl-s">"jilly"</span>, <span class="pl-s">"colt"</span>]
  result.attr = <span class="pl-c1">initTable</span>[<span class="pl-k">string</span>, <span class="pl-k">string</span>]()
  result.attr[<span class="pl-s">"color"</span>] <span class="pl-k">=</span> <span class="pl-s">"black"</span>
  result.attr[<span class="pl-s">"speed"</span>] <span class="pl-k">=</span> <span class="pl-s">"120mph"</span>

<span class="pl-k">var</span> stallion = <span class="pl-c1">initHorse</span>()
<span class="pl-k">var</span> tom: Cat

<span class="pl-k">var</span> buf = <span class="pl-c1">pack</span>(stallion) <span class="pl-c">#pack a Horse here</span>
<span class="pl-c1">unpack</span>(buf, tom)
<span class="pl-c">#abracadabra, it will unpack into a Cat</span>

<span class="pl-c1">echo</span> <span class="pl-s">"legs: "</span>, <span class="pl-k">$</span>tom.legs
<span class="pl-c1">echo</span> <span class="pl-s">"kittens: "</span>, <span class="pl-k">$</span>tom.kittens
<span class="pl-c1">echo</span> <span class="pl-s">"traits: "</span>, <span class="pl-k">$</span>tom.traits</pre></div>

<p>another gotcha:</p>

<div class="highlight highlight-source-nim"><pre>  <span class="pl-k">type</span>
    KAB = <span class="pl-k">object</span> <span class="pl-k">of</span> RootObj
      aaa: <span class="pl-k">int</span>
      bbb: <span class="pl-k">int</span>

    KCD = <span class="pl-k">object</span> <span class="pl-k">of</span> KAB
      ccc: <span class="pl-k">int</span>
      ddd: <span class="pl-k">int</span>

    KEF = <span class="pl-k">object</span> <span class="pl-k">of</span> KCD
      eee: <span class="pl-k">int</span>
      fff: <span class="pl-k">int</span>

  <span class="pl-k">var</span> kk = <span class="pl-c1">KEF</span>()
  <span class="pl-c1">echo</span> <span class="pl-c1">stringify</span>(<span class="pl-c1">pack</span>(kk))
  <span class="pl-c"># will produce "{ "eee" : 0, "fff" : 0, "ccc" : 0, "ddd" : 0, "aaa" : 0, "bbb" : 0 }"</span>
  <span class="pl-c"># not "{ "aaa" : 0, "bbb" : 0, "ccc" : 0, "ddd" : 0, "eee" : 0, "fff" : 0 }"</span></pre></div>

<h6>
<a id="user-content-bin-and-ext-format" class="anchor" href="#bin-and-ext-format" aria-hidden="true"><span class="octicon octicon-link"></span></a>bin and ext format</h6>

<p>this implementation provide function to encode/decode msgpack bin/ext format header, but for the body, you must write it yourself to the StringStream</p>

<ul>
<li>proc pack_bin*(s: Stream, len: int)</li>
<li>proc pack_ext*(s: Stream, len: int, exttype: int8)</li>
<li>proc unpack_bin*(s: Stream): int</li>
<li>proc unpack_ext*(s: Stream): tuple[exttype:uint8, len: int]</li>
</ul>

<div class="highlight highlight-source-nim"><pre><span class="pl-k">import</span> streams, msgpack

<span class="pl-k">const</span> exttype0 = <span class="pl-c1">0</span>

<span class="pl-k">var</span> s = <span class="pl-c1">newStringStream</span>()
<span class="pl-k">var</span> body = <span class="pl-s">"this is the body"</span>

s.<span class="pl-c1">pack_ext</span>(body.<span class="pl-c1">len</span>, exttype0)
s.<span class="pl-c1">write</span>(body)

<span class="pl-c">#the same goes to bin format</span>
s.<span class="pl-c1">pack_bin</span>(body.<span class="pl-c1">len</span>)
s.<span class="pl-c1">write</span>(body)

s.<span class="pl-c1">setPosition</span>(<span class="pl-c1">0</span>)
<span class="pl-c">#unpack_ext return tuple[exttype:uint8, len: int]</span>
<span class="pl-k">let</span> (extype, extlen) = s.<span class="pl-c1">unpack_ext</span>()
<span class="pl-k">var</span> extbody = s.<span class="pl-c1">readStr</span>(extlen)

assert extbody == body

<span class="pl-k">let</span> binlen = s.<span class="pl-c1">unpack_bin</span>()
<span class="pl-k">var</span> binbody = s.<span class="pl-c1">readStr</span>(binlen)

assert binbody == body</pre></div>

<h6>
<a id="user-content-stringify" class="anchor" href="#stringify" aria-hidden="true"><span class="octicon octicon-link"></span></a>stringify</h6>

<p>you can convert msgpack data to readable string using stringify function</p>

<div class="highlight highlight-source-nim"><pre>  <span class="pl-k">type</span>
    Horse = <span class="pl-k">object</span>
      legs: <span class="pl-k">int</span>
      speed: <span class="pl-k">int</span>
      color: <span class="pl-k">string</span>
      name: <span class="pl-k">string</span>

  <span class="pl-k">var</span> cc = <span class="pl-c1">Horse</span>(legs:<span class="pl-c1">4</span>, speed:<span class="pl-c1">150</span>, color:<span class="pl-s">"black"</span>, name:<span class="pl-s">"stallion"</span>)
  <span class="pl-k">var</span> zz = <span class="pl-c1">pack</span>(cc)
  <span class="pl-c1">echo</span> <span class="pl-c1">stringify</span>(zz)</pre></div>

<p>the result will be:</p>

<div class="highlight highlight-source-json"><pre>default:
[ <span class="pl-c1">4</span>, <span class="pl-c1">150</span>, <span class="pl-s"><span class="pl-pds">"</span>black<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>stallion<span class="pl-pds">"</span></span> ]

msgpack_obj_to_map defined:
{ <span class="pl-s"><span class="pl-pds">"</span>legs<span class="pl-pds">"</span></span> : <span class="pl-c1">4</span>, <span class="pl-s"><span class="pl-pds">"</span>speed<span class="pl-pds">"</span></span> : <span class="pl-c1">150</span>, <span class="pl-s"><span class="pl-pds">"</span>color<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>black<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>stallion<span class="pl-pds">"</span></span> }

msgpack_obj_to_stream defined:
<span class="pl-c1">4</span> <span class="pl-c1">150</span> <span class="pl-s"><span class="pl-pds">"</span>black<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>stallion<span class="pl-pds">"</span></span></pre></div>

<h6>
<a id="user-content-toany" class="anchor" href="#toany" aria-hidden="true"><span class="octicon octicon-link"></span></a>toAny</h6>

<p><strong>toAny</strong> takes a string of msgpack data or a stream, then it will produce <strong>msgAny</strong> which you can interrogate of it's  type and value during runtime by accessing it's member <strong>msgType</strong></p>

<p><strong>toAny</strong> recognize all valid msgpack message and translate it into a group of types:</p>

<pre><code>msgMap, msgArray, msgString, msgBool,
msgBin, msgExt, msgFloat32, msgFloat64,
msgInt, msgUint, msgNull
</code></pre>

<p>for example, <strong>msg</strong> is a <em>msgpack</em> data with content [1, "hello", {"a": "b"}], you can interrogate it like this:</p>

<div class="highlight highlight-source-nim"><pre><span class="pl-k">var</span> a = msg.<span class="pl-c1">toAny</span>()
<span class="pl-c1">assert</span> a.msgType == msgArray
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">0</span>].msgType == msgInt
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">0</span>].intVal == <span class="pl-c1">1</span>
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">1</span>].msgType == msgString
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">1</span>].stringVal == <span class="pl-s">"hello"</span>
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">2</span>].msgType == msgMap
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">2</span>].mapVal[<span class="pl-c1">0</span>].key.msgType == msgString
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">2</span>].mapVal[<span class="pl-c1">0</span>].key.stringVal == <span class="pl-s">"a"</span>
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">2</span>].mapVal[<span class="pl-c1">0</span>].val.msgType == msgString
<span class="pl-c1">assert</span> a.arrayVal[<span class="pl-c1">2</span>].mapVal[<span class="pl-c1">0</span>].val.stringVal == <span class="pl-s">"b"</span></pre></div>

<p>enjoy it, happy nim-ing</p>
</article>
  </div>
        </div>
        
        <div id="qs-benoist-msgpack-crystal" class="qs"><h4><a href="https://github.com/benoist/msgpack-crystal" target="_blank">benoist/msgpack-crystal <span class="qs-url">https://github.com/benoist/msgpack-crystal</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-messagepack" class="anchor" href="#messagepack" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack</h5>

<p><a href="https://travis-ci.org/benoist/msgpack-crystal"><img src="https://camo.githubusercontent.com/cacf7aeb9bd1a8987b2708bdd8ba106c047a2fb9/68747470733a2f2f7472617669732d63692e6f72672f62656e6f6973742f6d73677061636b2d6372797374616c2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/benoist/msgpack-crystal.svg" style="max-width:100%;"></a></p>

<p>In implementation of the MessagePack spec for crystal.</p>

<p>It supports Packing and Unpacking from a string or an IO</p>

<h6>
<a id="user-content-copyright" class="anchor" href="#copyright" aria-hidden="true"><span class="octicon octicon-link"></span></a>Copyright</h6>

<p>Copyright 2015 Benoist Claassen</p>

<p><em>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License You may obtain a copy of the License at</em></p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p><em>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</em></p>
</article>
  </div>
        </div>
        
        <div id="qs-kawanet-msgpack-lite" class="qs"><h4><a href="https://www.npmjs.com/package/msgpack-lite" target="_blank">kawanet/msgpack-lite <span class="qs-url">https://www.npmjs.com/package/msgpack-lite</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpack-lite--" class="anchor" href="#msgpack-lite--" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack-lite <a href="http://badge.fury.io/js/msgpack-lite"><img src="https://camo.githubusercontent.com/2d47899edd34f109837021072113765774890b3d/68747470733a2f2f62616467652e667572792e696f2f6a732f6d73677061636b2d6c6974652e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/msgpack-lite.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/kawanet/msgpack-lite"><img src="https://camo.githubusercontent.com/5ca034a89cf672211032248ca1c874bbf63796a8/68747470733a2f2f7472617669732d63692e6f72672f6b6177616e65742f6d73677061636b2d6c6974652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kawanet/msgpack-lite.svg?branch=master" style="max-width:100%;"></a>
</h5>

<p>Fast Pure JavaScript MessagePack Encoder and Decoder</p>

<p><a href="https://saucelabs.com/u/msgpack-lite"><img src="https://camo.githubusercontent.com/93259aae9a453bead1c7e0c8045ce334f4c8072e/68747470733a2f2f73617563656c6162732e636f6d2f62726f777365722d6d61747269782f6d73677061636b2d6c6974652e737667" alt="Sauce Test Status" data-canonical-src="https://saucelabs.com/browser-matrix/msgpack-lite.svg" style="max-width:100%;"></a></p>

<p>Online demo: <a href="http://kawanet.github.io/msgpack-lite/">http://kawanet.github.io/msgpack-lite/</a></p>

<h7>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h7>

<ul>
<li>Pure JavaScript only (No node-gyp nor gcc required)</li>
<li>Faster than any other pure JavaScript libraries on node.js v4</li>
<li>Even faster than C++ based <a href="https://www.npmjs.com/package/msgpack">msgpack</a> library (<strong>90% faster</strong> on encoding)</li>
<li>Streaming encoding and decoding interface is also available. It's more faster.</li>
<li>
<a href="https://saucelabs.com/u/msgpack-lite">Browsers</a> ready (Chrome, Firefox, Safari and even works on IE8)</li>
<li>
<a href="https://travis-ci.org/kawanet/msgpack-lite">Tested</a> on Node.js v0.10, v0.12 and v4.2 as well as browsers</li>
</ul>

<h7>
<a id="user-content-encoding-and-decoding-messagepack" class="anchor" href="#encoding-and-decoding-messagepack" aria-hidden="true"><span class="octicon octicon-link"></span></a>Encoding and Decoding MessagePack</h7>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> msgpack <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>msgpack-lite<span class="pl-pds">"</span></span>);

<span class="pl-c">// encode from JS Object to MessagePack (Buffer)</span>
<span class="pl-k">var</span> buffer <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-en">encode</span>({<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>});

<span class="pl-c">// decode from MessagePack (Buffer) to JS Object</span>
<span class="pl-k">var</span> data <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-en">decode</span>(buffer); <span class="pl-c">// =&gt; {"foo": "bar"}</span>

<span class="pl-c">// if encode/decode receives an invalid argument an error is thrown</span></pre></div>

<h7>
<a id="user-content-writing-to-messagepack-stream" class="anchor" href="#writing-to-messagepack-stream" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing to MessagePack Stream</h7>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> fs <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>fs<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> msgpack <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>msgpack-lite<span class="pl-pds">"</span></span>);

<span class="pl-k">var</span> writeStream <span class="pl-k">=</span> <span class="pl-smi">fs</span>.<span class="pl-en">createWriteStream</span>(<span class="pl-s"><span class="pl-pds">"</span>test.msp<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> encodeStream <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-en">createEncodeStream</span>();
<span class="pl-smi">encodeStream</span>.<span class="pl-en">pipe</span>(writeStream);

<span class="pl-c">// send multiple objects to stream</span>
<span class="pl-smi">encodeStream</span>.<span class="pl-c1">write</span>({foo<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>});
<span class="pl-smi">encodeStream</span>.<span class="pl-c1">write</span>({baz<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>qux<span class="pl-pds">"</span></span>});</pre></div>

<h7>
<a id="user-content-reading-from-messagepack-stream" class="anchor" href="#reading-from-messagepack-stream" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reading from MessagePack Stream</h7>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> fs <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>fs<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> msgpack <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>msgpack-lite<span class="pl-pds">"</span></span>);

<span class="pl-k">var</span> readStream <span class="pl-k">=</span> <span class="pl-smi">fs</span>.<span class="pl-en">createReadStream</span>(<span class="pl-s"><span class="pl-pds">"</span>test.msp<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> decodeStream <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-en">createDecodeStream</span>();

<span class="pl-c">// show multiple objects decoded from stream</span>
<span class="pl-smi">readStream</span>.<span class="pl-en">pipe</span>(decodeStream).<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>, <span class="pl-en">console</span>.<span class="pl-smi">warn</span>);</pre></div>

<h7>
<a id="user-content-command-line-interface" class="anchor" href="#command-line-interface" aria-hidden="true"><span class="octicon octicon-link"></span></a>Command Line Interface</h7>

<p>A CLI tool bin/msgpack converts data stream from JSON to MessagePack and vice versa.</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{"foo": "bar"}<span class="pl-pds">'</span></span> <span class="pl-k">|</span> ./bin/msgpack -Jm <span class="pl-k">|</span> od -tx1
0000000    81  a3  66  6f  6f  a3  62  61  72

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{"foo": "bar"}<span class="pl-pds">'</span></span> <span class="pl-k">|</span> ./bin/msgpack -Jm <span class="pl-k">|</span> ./bin/msgpack -Mj
{<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>}</pre></div>

<h7>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h7>

<div class="highlight highlight-source-shell"><pre>$ npm install --save msgpack-lite</pre></div>

<h7>
<a id="user-content-tests" class="anchor" href="#tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tests</h7>

<p>Run tests on node.js:</p>

<div class="highlight highlight-source-shell"><pre>$ make <span class="pl-c1">test</span></pre></div>

<p>Run tests on browsers:</p>

<div class="highlight highlight-source-shell"><pre>$ make test-browser-local
open the following url <span class="pl-k">in</span> a browser:
http://localhost:4000/__zuul</pre></div>

<h7>
<a id="user-content-browser-build" class="anchor" href="#browser-build" aria-hidden="true"><span class="octicon octicon-link"></span></a>Browser Build</h7>

<p>Browser version <a href="https://rawgithub.com/kawanet/msgpack-lite/master/dist/msgpack.min.js">msgpack.min.js</a> is also available. 37KB minified, 11KB gziped.</p>

<div class="highlight highlight-text-html-basic"><pre><span class="pl-c">&lt;!--[if lte IE 9]&gt;</span>
<span class="pl-c">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.10/es5-shim.min.js"&gt;&lt;/script&gt;</span>
<span class="pl-c">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"&gt;&lt;/script&gt;</span>
<span class="pl-c">&lt;![endif]--&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>https://rawgithub.com/kawanet/msgpack-lite/master/dist/msgpack.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
<span class="pl-s1">&lt;<span class="pl-ent">script</span>&gt;</span>
<span class="pl-s1"><span class="pl-c">// encode from JS Object to MessagePack (Uint8Array)</span></span>
<span class="pl-s1"><span class="pl-k">var</span> buffer <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-en">encode</span>({foo<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// decode from MessagePack (Uint8Array) to JS Object</span></span>
<span class="pl-s1"><span class="pl-k">var</span> array <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Uint8Array</span>([<span class="pl-c1">0x81</span>, <span class="pl-c1">0xA3</span>, <span class="pl-c1">0x66</span>, <span class="pl-c1">0x6F</span>, <span class="pl-c1">0x6F</span>, <span class="pl-c1">0xA3</span>, <span class="pl-c1">0x62</span>, <span class="pl-c1">0x61</span>, <span class="pl-c1">0x72</span>]);</span>
<span class="pl-s1"><span class="pl-k">var</span> data <span class="pl-k">=</span> <span class="pl-smi">msgpack</span>.<span class="pl-en">decode</span>(array);</span>
<span class="pl-s1">&lt;/<span class="pl-ent">script</span>&gt;</span></pre></div>

<h7>
<a id="user-content-interoperability" class="anchor" href="#interoperability" aria-hidden="true"><span class="octicon octicon-link"></span></a>Interoperability</h7>

<p>It is tested to have basic compatibility with other Node.js MessagePack modules below:</p>

<ul>
<li>
<a href="https://www.npmjs.com/package/msgpack">https://www.npmjs.com/package/msgpack</a> (1.0.2)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-js">https://www.npmjs.com/package/msgpack-js</a> (0.3.0)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-js-v5">https://www.npmjs.com/package/msgpack-js-v5</a> (0.3.0-v5)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-unpack">https://www.npmjs.com/package/msgpack-unpack</a> (2.1.1)</li>
<li>
<a href="https://github.com/msgpack/msgpack-javascript">https://github.com/msgpack/msgpack-javascript</a> (msgpack.codec)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack5">https://www.npmjs.com/package/msgpack5</a> (3.3.0)</li>
<li>
<a href="https://www.npmjs.com/package/notepack">https://www.npmjs.com/package/notepack</a> (0.0.2)</li>
</ul>

<h7>
<a id="user-content-benchmarks" class="anchor" href="#benchmarks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Benchmarks</h7>

<p>A benchmark tool <code>lib/benchmark.js</code> is available to compare encoding/decoding speed
(operation per second) with other MessagePack modules.
It counts operations of <a href="https://github.com/kawanet/msgpack-lite/blob/master/test/example.json">1KB JSON document</a> in 10 seconds.</p>

<table>
<thead>
<tr>
<th>operation</th>
<th align="right">op</th>
<th align="right">ms</th>
<th align="right">op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>buf = Buffer(JSON.stringify(obj));</td>
<td align="right">1055200</td>
<td align="right">10000</td>
<td align="right">105520</td>
</tr>
<tr>
<td>obj = JSON.parse(buf);</td>
<td align="right">863800</td>
<td align="right">10000</td>
<td align="right">86380</td>
</tr>
<tr>
<td>buf = require("msgpack-lite").encode(obj);</td>
<td align="right">969100</td>
<td align="right">10000</td>
<td align="right">96910</td>
</tr>
<tr>
<td>obj = require("msgpack-lite").decode(buf);</td>
<td align="right">600300</td>
<td align="right">10000</td>
<td align="right">60030</td>
</tr>
<tr>
<td>buf = require("msgpack").pack(obj);</td>
<td align="right">503500</td>
<td align="right">10001</td>
<td align="right">50344</td>
</tr>
<tr>
<td>obj = require("msgpack").unpack(buf);</td>
<td align="right">560200</td>
<td align="right">10001</td>
<td align="right">56014</td>
</tr>
<tr>
<td>buf = Buffer(require("msgpack.codec").msgpack.pack(obj));</td>
<td align="right">653500</td>
<td align="right">10000</td>
<td align="right">65349</td>
</tr>
<tr>
<td>obj = require("msgpack.codec").msgpack.unpack(buf);</td>
<td align="right">367500</td>
<td align="right">10001</td>
<td align="right">36746</td>
</tr>
<tr>
<td>buf = require("msgpack-js-v5").encode(obj);</td>
<td align="right">189500</td>
<td align="right">10002</td>
<td align="right">18946</td>
</tr>
<tr>
<td>obj = require("msgpack-js-v5").decode(buf);</td>
<td align="right">408900</td>
<td align="right">10000</td>
<td align="right">40890</td>
</tr>
<tr>
<td>buf = require("msgpack-js").encode(obj);</td>
<td align="right">189200</td>
<td align="right">10000</td>
<td align="right">18920</td>
</tr>
<tr>
<td>obj = require("msgpack-js").decode(buf);</td>
<td align="right">375600</td>
<td align="right">10002</td>
<td align="right">37552</td>
</tr>
<tr>
<td>buf = require("msgpack5")().encode(obj);</td>
<td align="right">110500</td>
<td align="right">10009</td>
<td align="right">11040</td>
</tr>
<tr>
<td>obj = require("msgpack5")().decode(buf);</td>
<td align="right">165500</td>
<td align="right">10000</td>
<td align="right">16550</td>
</tr>
<tr>
<td>buf = require("notepack")().encode(obj);</td>
<td align="right">847800</td>
<td align="right">10000</td>
<td align="right">84780</td>
</tr>
<tr>
<td>obj = require("notepack")().decode(buf);</td>
<td align="right">599800</td>
<td align="right">10000</td>
<td align="right">59980</td>
</tr>
<tr>
<td>obj = require("msgpack-unpack").decode(buf);</td>
<td align="right">48100</td>
<td align="right">10002</td>
<td align="right">4809</td>
</tr>
</tbody>
</table>

<p>Streaming benchmark tool <code>lib/benchmark-stream.js</code> is also available.
It counts milliseconds for 1,000,000 operations of 30 bytes fluentd msgpack fragment.
This shows streaming encoding and decoding are super faster.</p>

<table>
<thead>
<tr>
<th>operation (1000000 x 2)</th>
<th align="right">op</th>
<th align="right">ms</th>
<th align="right">op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>stream.write(msgpack.encode(obj));</td>
<td align="right">1000000</td>
<td align="right">3027</td>
<td align="right">330360</td>
</tr>
<tr>
<td>stream.write(notepack.encode(obj));</td>
<td align="right">1000000</td>
<td align="right">2012</td>
<td align="right">497017</td>
</tr>
<tr>
<td>msgpack.Encoder().on("data",ondata).encode(obj);</td>
<td align="right">1000000</td>
<td align="right">2956</td>
<td align="right">338294</td>
</tr>
<tr>
<td>msgpack.createEncodeStream().write(obj);</td>
<td align="right">1000000</td>
<td align="right">1888</td>
<td align="right">529661</td>
</tr>
<tr>
<td>stream.write(msgpack.decode(buf));</td>
<td align="right">1000000</td>
<td align="right">2020</td>
<td align="right">495049</td>
</tr>
<tr>
<td>stream.write(notepack.decode(buf));</td>
<td align="right">1000000</td>
<td align="right">1794</td>
<td align="right">557413</td>
</tr>
<tr>
<td>msgpack.Decoder().on("data",ondata).decode(buf);</td>
<td align="right">1000000</td>
<td align="right">2744</td>
<td align="right">364431</td>
</tr>
<tr>
<td>msgpack.createDecodeStream().write(buf);</td>
<td align="right">1000000</td>
<td align="right">1341</td>
<td align="right">745712</td>
</tr>
</tbody>
</table>

<p>Test environment: msgpack-lite 0.1.14, Node v4.2.3, Intel(R) Xeon(R) CPU E5-2666 v3 @ 2.90GHz</p>

<h7>
<a id="user-content-messagepack-mapping-table" class="anchor" href="#messagepack-mapping-table" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessagePack Mapping Table</h7>

<p>The following table shows how JavaScript objects (value) will be mapped to 
<a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack formats</a>
and vice versa.</p>

<table>
<thead>
<tr>
<th>Source Value</th>
<th>MessagePack Format</th>
<th>Value Decoded</th>
</tr>
</thead>
<tbody>
<tr>
<td>null, undefined</td>
<td>nil format family</td>
<td>null</td>
</tr>
<tr>
<td>Boolean (true, false)</td>
<td>bool format family</td>
<td>Boolean (true, false)</td>
</tr>
<tr>
<td>Number (32bit int)</td>
<td>int format family</td>
<td>Number (int or double)</td>
</tr>
<tr>
<td>Number (64bit double)</td>
<td>float format family</td>
<td>Number (double)</td>
</tr>
<tr>
<td>String</td>
<td>str format family</td>
<td>String</td>
</tr>
<tr>
<td>Buffer</td>
<td>bin format family</td>
<td>Buffer</td>
</tr>
<tr>
<td>Array</td>
<td>array format family</td>
<td>Array</td>
</tr>
<tr>
<td>Object (plain object)</td>
<td>map format family</td>
<td>Object</td>
</tr>
<tr>
<td>Object (see below)</td>
<td>ext format family</td>
<td>Object (see below)</td>
</tr>
</tbody>
</table>

<p>Note that both <code>null</code> and <code>undefined</code> are mapped to nil <code>0xC1</code> type.
This means <code>undefined</code> value will be <em>upgraded</em> to <code>null</code> in other words.</p>

<h7>
<a id="user-content-extension-types" class="anchor" href="#extension-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extension Types</h7>

<p>The MessagePack specification allows 128 application-specific extension types. 
The library uses the following types to make round-trip conversion possible
for JavaScript native objects.</p>

<table>
<thead>
<tr>
<th>Type</th>
<th>Object</th>
<th>Type</th>
<th>Object</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td></td>
<td>0x10</td>
<td></td>
</tr>
<tr>
<td>0x01</td>
<td>EvalError</td>
<td>0x11</td>
<td>Int8Array</td>
</tr>
<tr>
<td>0x02</td>
<td>RangeError</td>
<td>0x12</td>
<td>Uint8Array</td>
</tr>
<tr>
<td>0x03</td>
<td>ReferenceError</td>
<td>0x13</td>
<td>Int16Array</td>
</tr>
<tr>
<td>0x04</td>
<td>SyntaxError</td>
<td>0x14</td>
<td>Uint16Array</td>
</tr>
<tr>
<td>0x05</td>
<td>TypeError</td>
<td>0x15</td>
<td>Int32Array</td>
</tr>
<tr>
<td>0x06</td>
<td>URIError</td>
<td>0x16</td>
<td>Uint32Array</td>
</tr>
<tr>
<td>0x07</td>
<td></td>
<td>0x17</td>
<td>Float32Array</td>
</tr>
<tr>
<td>0x08</td>
<td></td>
<td>0x18</td>
<td>Float64Array</td>
</tr>
<tr>
<td>0x09</td>
<td></td>
<td>0x19</td>
<td>Uint8ClampedArray</td>
</tr>
<tr>
<td>0x0A</td>
<td>RegExp</td>
<td>0x1A</td>
<td>ArrayBuffer</td>
</tr>
<tr>
<td>0x0B</td>
<td>Boolean</td>
<td>0x1B</td>
<td></td>
</tr>
<tr>
<td>0x0C</td>
<td>String</td>
<td>0x1C</td>
<td></td>
</tr>
<tr>
<td>0x0D</td>
<td>Date</td>
<td>0x1D</td>
<td>DataView</td>
</tr>
<tr>
<td>0x0E</td>
<td>Error</td>
<td>0x1E</td>
<td></td>
</tr>
<tr>
<td>0x0F</td>
<td>Number</td>
<td>0x1F</td>
<td></td>
</tr>
</tbody>
</table>

<p>Other extension types are mapped to internal ExtBuffer object.</p>

<h7>
<a id="user-content-repository" class="anchor" href="#repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Repository</h7>

<ul>
<li><a href="https://github.com/kawanet/msgpack-lite">https://github.com/kawanet/msgpack-lite</a></li>
</ul>

<h7>
<a id="user-content-see-also" class="anchor" href="#see-also" aria-hidden="true"><span class="octicon octicon-link"></span></a>See Also</h7>

<ul>
<li><a href="http://msgpack.org/">http://msgpack.org/</a></li>
</ul>

<h7>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h7>

<p>The MIT License (MIT)</p>

<p>Copyright (c) 2015 Yusuke Kawasaki</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</article>
  </div>
        </div>
        
        <div id="qs-ludocode-msgpack-tools" class="qs"><h4><a href="https://github.com/ludocode/msgpack-tools" target="_blank">ludocode/msgpack-tools <span class="qs-url">https://github.com/ludocode/msgpack-tools</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h6>
<a id="user-content-introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h6>

<p><strong>msgpack-tools</strong> contains simple command-line utilities for converting from <a href="http://msgpack.org/">MessagePack</a> to <a href="http://json.org/">JSON</a> and vice-versa. They support options for lax parsing, lossy conversions, pretty-printing, and base64 encoding.</p>

<ul>
<li>
<code>msgpack2json</code> -- Convert MessagePack to JSON</li>
<li>
<code>json2msgpack</code> -- Convert JSON to MessagePack</li>
</ul>

<p>They can be used for dumping MessagePack from a file or web API to a human-readable format, or for converting hand-written or generated JSON to MessagePack. The lax parsing mode supports comments and trailing commas in JSON, making it possible to hand-write your app or game data in JSON and convert it at build-time to MessagePack.</p>

<h6>
<a id="user-content-build-status" class="anchor" href="#build-status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build Status</h6>

<table>
<thead>
<tr>
<th align="center"><a href="https://travis-ci.org/">Travis-CI</a></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="https://travis-ci.org/ludocode/msgpack-tools/branches"><img src="https://camo.githubusercontent.com/1a5411af15e873681bd3bd16d64b1a173dbde05d/68747470733a2f2f7472617669732d63692e6f72672f6c75646f636f64652f6d73677061636b2d746f6f6c732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/ludocode/msgpack-tools.svg?branch=master" style="max-width:100%;"></a></td>
</tr>
</tbody>
</table>

<h6>
<a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h6>

<p>To view a MessagePack file in a human-readable format for debugging purposes:</p>

<pre><code>msgpack2json -di file.mp
</code></pre>

<p>To convert a hand-written JSON file to a MessagePack file, ignoring comments and trailing commas, and allowing embedded base64 with a <code>base64:</code> prefix:</p>

<pre><code>json2msgpack -bli file.json -o file.mp
</code></pre>

<p>To fetch MessagePack from a web API and view it in a human-readable format:</p>

<pre><code>curl 'http://example/api/url' | msgpack2json -d
</code></pre>

<p>To view the MessagePack-equivalent encoding of a JSON string:</p>

<pre><code>$ echo '{"compact": true, "schema": 0}' | json2msgpack | hexdump -C
00000000  82 a7 63 6f 6d 70 61 63  74 c3 a6 73 63 68 65 6d  |..compact..schem|
00000010  61 00                                             |a.|
00000012
</code></pre>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>msgpack-tools currently must be built from source. The latest version of the msgpack-tools source archive can be downloaded from the releases page. This includes the library dependencies and has pre-generated man pages:</p>

<p><a href="https://github.com/ludocode/msgpack-tools/releases">https://github.com/ludocode/msgpack-tools/releases</a></p>

<p>msgpack-tools uses CMake. A <code>configure</code> wrapper is provided that calls CMake, so on Linux and Mac OS X, you can simply run the usual:</p>

<pre><code>./configure &amp;&amp; make &amp;&amp; sudo make install
</code></pre>

<p>If you are building from the repository, you will need to fetch the dependencies and generate the man pages. These are done with the scripts under <code>tools/fetch.sh</code> and <code>tools/man.sh</code>. <a href="https://github.com/sunaku/md2man">md2man</a> is required to generate the man pages.</p>

<h6>
<a id="user-content-differences-between-messagepack-and-json" class="anchor" href="#differences-between-messagepack-and-json" aria-hidden="true"><span class="octicon octicon-link"></span></a>Differences between MessagePack and JSON</h6>

<p>MessagePack is intended to be very close to JSON in supported features, so they can usually be transparently converted from one to the other. There are some differences, however, which can complicate conversions.</p>

<p>These are the differences in what objects are representable in each format:</p>

<ul>
<li><p>JSON keys must be strings. MessagePack keys can be any type, including maps and arrays.</p></li>
<li><p>JSON supports "bignums", i.e. integers of any size. MessagePack integers must fit within a 64-bit signed or unsigned integer.</p></li>
<li><p>JSON real numbers are specified in decimal scientific notation and can have arbitrary precision. MessagePack real numbers are in IEEE 754 standard 32-bit or 64-bit binary.</p></li>
<li><p>MessagePack supports binary and extension type objects. JSON does not support binary data. Binary data is often encoded into a base64 string to be embedded into a JSON document.</p></li>
<li><p>The top-level object in a JSON document must be either an array or object (map). The top-level object in MessagePack can be any type.</p></li>
<li><p>A JSON document must be entirely in one encoding. MessagePack does not specify encoding, and different strings in the same document can technically be in different encodings (though this is a really bad idea.)</p></li>
</ul>

<p>By default, <code>msgpack2json</code> and <code>json2msgpack</code> convert in strict mode. If an object in the source format is not representable in the destination format, the converter aborts with an error. A lax mode is available which performs a "lossy" conversion, and base64 conversion modes are available to support binary data in JSON.</p>
</article>
  </div>
        </div>
        
        <div id="qs-rybakit-msgpack-php" class="qs"><h4><a href="https://github.com/rybakit/msgpack.php" target="_blank">rybakit/msgpack.php <span class="qs-url">https://github.com/rybakit/msgpack.php</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-msgpackphp" class="anchor" href="#msgpackphp" aria-hidden="true"><span class="octicon octicon-link"></span></a>msgpack.php</h5>

<p>A pure PHP implementation of the MessagePack serialization format.</p>

<p><a href="https://travis-ci.org/rybakit/msgpack.php"><img src="https://camo.githubusercontent.com/dd2168702092c4746665311df450ca722a6d5650/68747470733a2f2f7472617669732d63692e6f72672f727962616b69742f6d73677061636b2e7068702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/rybakit/msgpack.php.svg?branch=master" style="max-width:100%;"></a>
<a href="https://scrutinizer-ci.com/g/rybakit/msgpack.php/?branch=master"><img src="https://camo.githubusercontent.com/656ed2d7e6bf6da1925568974f4050124f44da0d/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f727962616b69742f6d73677061636b2e7068702f6261646765732f7175616c6974792d73636f72652e706e673f623d6d6173746572" alt="Scrutinizer Code Quality" data-canonical-src="https://scrutinizer-ci.com/g/rybakit/msgpack.php/badges/quality-score.png?b=master" style="max-width:100%;"></a>
<a href="https://scrutinizer-ci.com/g/rybakit/msgpack.php/?branch=master"><img src="https://camo.githubusercontent.com/01ce830e0a711566f0f2c7381de4bee2393868cf/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f727962616b69742f6d73677061636b2e7068702f6261646765732f636f7665726167652e706e673f623d6d6173746572" alt="Code Coverage" data-canonical-src="https://scrutinizer-ci.com/g/rybakit/msgpack.php/badges/coverage.png?b=master" style="max-width:100%;"></a></p>

<h6>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h6>

<ul>
<li>Fully compliant with the latest <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a>,
including <strong>bin</strong>, <strong>str</strong> and <strong>ext</strong> types</li>
<li>Supports <a href="#unpacking">streaming unpacking</a>
</li>
<li>Supports <a href="#unsigned-64-bit-integers">unsigned 64-bit integers handling</a>
</li>
<li>Supports <a href="#custom-types">object serialization</a>
</li>
<li>Works with PHP 5.4-7.0 and HHVM</li>
<li><a href="https://travis-ci.org/rybakit/msgpack.php">Fully tested</a></li>
<li><a href="#performance">Relatively fast</a></li>
</ul>

<h6>
<a id="user-content-table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of contents</h6>

<ul>
<li><a href="#installation">Installation</a></li>
<li>
<a href="#usage">Usage</a>

<ul>
<li><a href="#packing">Packing</a></li>
<li>
<a href="#unpacking">Unpacking</a>

<ul>
<li><a href="#unsigned-64-bit-integers">Unsigned 64-bit Integers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#custom-types">Custom Types</a></li>
<li><a href="#exceptions">Exceptions</a></li>
<li>
<a href="#tests">Tests</a>

<ul>
<li><a href="#performance">Performance</a></li>
</ul>
</li>
<li><a href="#license">License</a></li>
</ul>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>The recommended way to install the library is through <a href="http://getcomposer.org">Composer</a>:</p>

<div class="highlight highlight-source-shell"><pre>$ composer require rybakit/msgpack</pre></div>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<h7>
<a id="user-content-packing" class="anchor" href="#packing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Packing</h7>

<p>To pack values use the <code>Packer</code> class:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\Packer</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$packer</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Packer</span>();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">...</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$packed</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>pack(<span class="pl-smi">$value</span>);</span></pre></div>

<p>In the example above, the method <code>pack</code> automatically pack a value depending on its type.
But not all PHP types can be uniquely translated to MessagePack types. For example,
MessagePack format defines <code>map</code> and <code>array</code> types, which are represented by a single <code>array</code>
type in PHP. By default, the packer will pack a PHP array as a MessagePack array if it
has sequential numeric keys, starting from <code>0</code> and as a MessagePack map otherwise:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$mpArr1</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>pack([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]);                   <span class="pl-c">// MP array [1, 2]</span></span>
<span class="pl-s1"><span class="pl-smi">$mpArr2</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>pack([<span class="pl-c1">0</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>, <span class="pl-c1">1</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">2</span>]);         <span class="pl-c">// MP array [1, 2]</span></span>
<span class="pl-s1"><span class="pl-smi">$mpMap1</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>pack([<span class="pl-c1">0</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>, <span class="pl-c1">3</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">3</span>]);         <span class="pl-c">// MP map {0: 1, 3: 3}</span></span>
<span class="pl-s1"><span class="pl-smi">$mpMap2</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>pack([<span class="pl-c1">1</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>, <span class="pl-c1">2</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">2</span>]);         <span class="pl-c">// MP map {1: 1, 2: 2}</span></span>
<span class="pl-s1"><span class="pl-smi">$mpMap3</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>pack([<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">2</span>]); <span class="pl-c">// MP map {foo: 1, bar: 2}</span></span></pre></div>

<p>However, sometimes you need to pack a sequential array as a MessagePack map.
To do this, use the <code>packMap</code> method:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$mpMap</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packMap([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]); <span class="pl-c">// {0: 1, 1: 2}</span></span></pre></div>

<p>Here is a list of all low-level packer methods:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packNil();                   <span class="pl-c">// MP nil</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packBool(<span class="pl-c1">true</span>);              <span class="pl-c">// MP bool</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packArray([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]);           <span class="pl-c">// MP array</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packMap([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]);             <span class="pl-c">// MP pap</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packExt(<span class="pl-k">new</span> <span class="pl-c1">Ext</span>(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">\xaa</span><span class="pl-pds">"</span></span>)); <span class="pl-c">// MP ext</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packDouble(<span class="pl-c1">4.2</span>);             <span class="pl-c">// MP float</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packInt(<span class="pl-c1">42</span>);                 <span class="pl-c">// MP int</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packStr(<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>);              <span class="pl-c">// MP str</span></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>packBin(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">\x80</span><span class="pl-pds">"</span></span>);             <span class="pl-c">// MP bin</span></span></pre></div>

<blockquote>
<p>Check <a href="#custom-types">"Custom Types"</a> section below on how to pack arbitrary PHP objects.</p>
</blockquote>

<h7>
<a id="user-content-unpacking" class="anchor" href="#unpacking" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unpacking</h7>

<p>To unpack data use the <code>BufferUnpacker</code> class:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\BufferUnpacker</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$unpacker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">BufferUnpacker</span>();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">...</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>reset(<span class="pl-smi">$data</span>);</span>
<span class="pl-s1"><span class="pl-smi">$unpacked</span> <span class="pl-k">=</span> <span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>unpack();</span></pre></div>

<p>If the packed data is received in chunks (e.g. when reading from a stream), use the <code>tryUnpack</code>
method, which will try unpack data and return an array of unpacked data instead of throwing a <code>InsufficientDataException</code>:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>append(<span class="pl-smi">$chunk1</span>);</span>
<span class="pl-s1"><span class="pl-smi">$unpackedBlocks</span> <span class="pl-k">=</span> <span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>tryUnpack();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>append(<span class="pl-smi">$chunk2</span>);</span>
<span class="pl-s1"><span class="pl-smi">$unpackedBlocks</span> <span class="pl-k">=</span> <span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>tryUnpack();</span></pre></div>

<p>To save some keystrokes, the library ships with a syntax sugar class <code>Unpacker</code>, which
is no more than a tiny wrapper around <code>BufferUnpacker</code> with a single method <code>unpack()</code>:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\Unpacker</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">...</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$unpacked</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Unpacker</span>())<span class="pl-k">-&gt;</span>unpack(<span class="pl-smi">$data</span>);</span></pre></div>

<h8>
<a id="user-content-unsigned-64-bit-integers" class="anchor" href="#unsigned-64-bit-integers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unsigned 64-bit Integers</h8>

<p>The binary MessagePack format has unsigned 64-bit as its largest integer data type,
but PHP does not support such integers. By default, while unpacking <code>uint64</code> value
the library will throw a <code>IntegerOverflowException</code>.</p>

<p>You can change this default behavior to unpack <code>uint64</code> integer to a string:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>setIntOverflowMode(<span class="pl-c1">BufferUnpacker</span><span class="pl-k">::</span><span class="pl-c1">INT_AS_STRING</span>);</span></pre></div>

<p>Or to a <code>Gmp</code> number (make sure that <a href="http://php.net/manual/en/book.gmp.php">gmp</a> extension is enabled):</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>setIntOverflowMode(<span class="pl-c1">BufferUnpacker</span><span class="pl-k">::</span><span class="pl-c1">INT_AS_GMP</span>);</span></pre></div>

<h7>
<a id="user-content-extensions" class="anchor" href="#extensions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extensions</h7>

<p>To define application-specific types use the <code>Ext</code> class:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\Ext</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\Packer</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\Unpacker</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$packerd</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Packer</span>())<span class="pl-k">-&gt;</span>pack(<span class="pl-k">new</span> <span class="pl-c1">Ext</span>(<span class="pl-c1">42</span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">\xaa</span><span class="pl-pds">"</span></span>));</span>
<span class="pl-s1"><span class="pl-smi">$ext</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Unpacker</span>())<span class="pl-k">-&gt;</span>unpack(<span class="pl-smi">$packed</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$extType</span> <span class="pl-k">=</span> <span class="pl-smi">$ext</span><span class="pl-k">-&gt;</span>getType(); <span class="pl-c">// 42</span></span>
<span class="pl-s1"><span class="pl-smi">$extData</span> <span class="pl-k">=</span> <span class="pl-smi">$ext</span><span class="pl-k">-&gt;</span>getData(); <span class="pl-c">// "\xaa"</span></span></pre></div>

<h7>
<a id="user-content-custom-types" class="anchor" href="#custom-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom Types</h7>

<p>In addition to <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#type-system">the basic types</a>,
the library provides the functionality to serialize and deserialize arbitrary types.
To do this, you need to create a transformer, that converts your type to a type, which can be handled by MessagePack.</p>

<p>For example, the code below shows how to add <code>DateTime</code> object support:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">DateTimeTransformer</span> <span class="pl-k">implements</span> <span class="pl-e">TypeTransformer</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-k">private</span> <span class="pl-smi">$id</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-c1">__construct</span>(<span class="pl-smi">$id</span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">id</span> <span class="pl-k">=</span> <span class="pl-smi">$id</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">getId</span>()</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">id</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">supports</span>(<span class="pl-smi">$value</span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-smi">$value</span> <span class="pl-k">instanceof</span> <span class="pl-c1">\DateTime</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">transform</span>(<span class="pl-smi">$value</span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-smi">$value</span><span class="pl-k">-&gt;</span>getTimestamp();</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">reverseTransform</span>(<span class="pl-smi">$timestamp</span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-c1">\DateTime</span>(<span class="pl-s"><span class="pl-pds">'</span>@<span class="pl-pds">'</span></span><span class="pl-k">.</span><span class="pl-smi">$timestamp</span>);</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\BufferUnpacker</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\Packer</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">MessagePack\TypeTransformer\Collection</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$packer</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Packer</span>();</span>
<span class="pl-s1"><span class="pl-smi">$unpacker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">BufferUnpacker</span>();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$coll</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Collection</span>([<span class="pl-k">new</span> <span class="pl-c1">DateTimeTransformer</span>(<span class="pl-c1">5</span>)]);</span>
<span class="pl-s1"><span class="pl-c">// $coll-&gt;add(new AnotherTypeTransformer(42));</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>setTransformers(<span class="pl-smi">$coll</span>);</span>
<span class="pl-s1"><span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>setTransformers(<span class="pl-smi">$coll</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$packed</span> <span class="pl-k">=</span> <span class="pl-smi">$packer</span><span class="pl-k">-&gt;</span>pack([<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-k">new</span> <span class="pl-c1">\DateTime</span>(), <span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>baz<span class="pl-pds">'</span></span>]);</span>
<span class="pl-s1"><span class="pl-smi">$raw</span> <span class="pl-k">=</span> <span class="pl-smi">$unpacker</span><span class="pl-k">-&gt;</span>reset(<span class="pl-smi">$packed</span>)<span class="pl-k">-&gt;</span>unpack());</span></pre></div>

<h6>
<a id="user-content-exceptions" class="anchor" href="#exceptions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Exceptions</h6>

<p>If an error occurs during packing/unpacking, a <code>PackingFailedException</code> or <code>UnpackingFailedException</code>
will be thrown, respectively.</p>

<p>In addition, there are two more exceptions that can be thrown during unpacking:</p>

<ul>
<li><code>InsufficientDataException</code></li>
<li><code>IntegerOverflowException</code></li>
</ul>

<h6>
<a id="user-content-tests" class="anchor" href="#tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tests</h6>

<p>Run tests as follows:</p>

<div class="highlight highlight-source-shell"><pre>$ phpunit</pre></div>

<p>Also, if you already have Docker installed, you can run the tests in a docker container.
First, create a container:</p>

<div class="highlight highlight-source-shell"><pre>$ ./dockerfile.sh <span class="pl-k">|</span> docker build -t msgpack -</pre></div>

<p>The command above will create a container named <code>msgpack</code> with PHP 5.6 runtime.
You may change the default runtime by defining the <code>PHP_RUNTIME</code> environment variable:</p>

<div class="highlight highlight-source-shell"><pre>$ PHP_RUNTIME=<span class="pl-s"><span class="pl-pds">'</span>php:7.0-cli<span class="pl-pds">'</span></span> ./dockerfile.sh <span class="pl-k">|</span> docker build -t msgpack -</pre></div>

<blockquote>
<p>See a list of various runtimes <a href="/rybakit/msgpack.php/blob/master/.travis.yml#L9-L13">here</a>.</p>
</blockquote>

<p>Then run the unit tests:</p>

<div class="highlight highlight-source-shell"><pre>$ docker run --rm --name msgpack -v <span class="pl-s"><span class="pl-pds">$(</span><span class="pl-c1">pwd</span><span class="pl-pds">)</span></span>:/msgpack -w /msgpack msgpack</pre></div>

<h8>
<a id="user-content-performance" class="anchor" href="#performance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Performance</h8>

<p>To check the performance run:</p>

<div class="highlight highlight-source-shell"><pre>$ php tests/bench.php</pre></div>

<p>This command will output something like:</p>

<div class="highlight highlight-source-shell"><pre>$ php tests/bench.php

Filter: MessagePack<span class="pl-cce">\T</span>ests<span class="pl-cce">\P</span>erf<span class="pl-cce">\F</span>ilter<span class="pl-cce">\N</span>ameFilter
Cycles: 3
Iterations: 100000

====================================================================
Test/Target           MessagePack<span class="pl-cce">\P</span>acker  MessagePack<span class="pl-cce">\B</span>ufferUnpacker
--------------------------------------------------------------------
nil ............................. 0.0146 .................... 0.0336
<span class="pl-c1">false</span> ........................... 0.0150 .................... 0.0360
<span class="pl-c1">true</span> ............................ 0.0168 .................... 0.0316
7-bit uint <span class="pl-c">#1 ................... 0.0187 .................... 0.0239</span>
7-bit uint <span class="pl-c">#2 ................... 0.0200 .................... 0.0247</span>
7-bit uint <span class="pl-c">#3 ................... 0.0202 .................... 0.0243</span>
5-bit sint <span class="pl-c">#1 ................... 0.0216 .................... 0.0344</span>
5-bit sint <span class="pl-c">#2 ................... 0.0190 .................... 0.0316</span>
5-bit sint <span class="pl-c">#3 ................... 0.0189 .................... 0.0343</span>
8-bit uint <span class="pl-c">#1 ................... 0.0298 .................... 0.0725</span>
8-bit uint <span class="pl-c">#2 ................... 0.0296 .................... 0.0714</span>
8-bit uint <span class="pl-c">#3 ................... 0.0290 .................... 0.0719</span>
16-bit uint <span class="pl-c">#1 .................. 0.0297 .................... 0.0794</span>
16-bit uint <span class="pl-c">#2 .................. 0.0297 .................... 0.0772</span>
16-bit uint <span class="pl-c">#3 .................. 0.0307 .................... 0.0774</span>
32-bit uint <span class="pl-c">#1 .................. 0.0310 .................... 0.0775</span>
32-bit uint <span class="pl-c">#2 .................. 0.0300 .................... 0.0811</span>
32-bit uint <span class="pl-c">#3 .................. 0.0321 .................... 0.0787</span>
64-bit uint <span class="pl-c">#1 .................. 0.0401 .................... 0.0956</span>
64-bit uint <span class="pl-c">#2 .................. 0.0405 .................... 0.0928</span>
8-bit int <span class="pl-c">#1 .................... 0.0310 .................... 0.0755</span>
8-bit int <span class="pl-c">#2 .................... 0.0274 .................... 0.0727</span>
8-bit int <span class="pl-c">#3 .................... 0.0278 .................... 0.0768</span>
16-bit int <span class="pl-c">#1 ................... 0.0290 .................... 0.0848</span>
16-bit int <span class="pl-c">#2 ................... 0.0286 .................... 0.0872</span>
16-bit int <span class="pl-c">#3 ................... 0.0288 .................... 0.0895</span>
32-bit int <span class="pl-c">#1 ................... 0.0292 .................... 0.0935</span>
32-bit int <span class="pl-c">#2 ................... 0.0304 .................... 0.0891</span>
32-bit int <span class="pl-c">#3 ................... 0.0293 .................... 0.0882</span>
64-bit int <span class="pl-c">#1 ................... 0.0451 .................... 0.0958</span>
64-bit int <span class="pl-c">#2 ................... 0.0407 .................... 0.0983</span>
64-bit int <span class="pl-c">#3 ................... 0.0426 .................... 0.0941</span>
64-bit float <span class="pl-c">#1 ................. 0.0358 .................... 0.0832</span>
64-bit float <span class="pl-c">#2 ................. 0.0365 .................... 0.0831</span>
64-bit float <span class="pl-c">#3 ................. 0.0360 .................... 0.0804</span>
fix string <span class="pl-c">#1 ................... 0.0396 .................... 0.0310</span>
fix string <span class="pl-c">#2 ................... 0.0368 .................... 0.0485</span>
fix string <span class="pl-c">#3 ................... 0.0369 .................... 0.0507</span>
fix string <span class="pl-c">#4 ................... 0.0410 .................... 0.0500</span>
8-bit string <span class="pl-c">#1 ................. 0.0529 .................... 0.1013</span>
8-bit string <span class="pl-c">#2 ................. 0.0568 .................... 0.1037</span>
8-bit string <span class="pl-c">#3 ................. 0.0700 .................... 0.1013</span>
16-bit string <span class="pl-c">#1 ................ 0.0705 .................... 0.1049</span>
16-bit string <span class="pl-c">#2 ................ 5.5168 .................... 0.3627</span>
32-bit string ................... 5.5578 .................... 0.3806
wide char string <span class="pl-c">#1 ............. 0.0449 .................... 0.0487</span>
wide char string <span class="pl-c">#2 ............. 0.0528 .................... 0.1021</span>
8-bit binary <span class="pl-c">#1 ................. 0.0421 .................... 0.0915</span>
8-bit binary <span class="pl-c">#2 ................. 0.0414 .................... 0.0955</span>
8-bit binary <span class="pl-c">#3 ................. 0.0444 .................... 0.0913</span>
16-bit binary ................... 0.0415 .................... 0.0993
32-bit binary ................... 0.3858 .................... 0.3640
fixext 1 ........................ 0.0446 .................... 0.1176
fixext 2 ........................ 0.0430 .................... 0.1192
fixext 4 ........................ 0.0432 .................... 0.1194
fixext 8 ........................ 0.0491 .................... 0.1131
fixext 16 ....................... 0.0446 .................... 0.1198
8-bit ext ....................... 0.0541 .................... 0.1543
16-bit ext ...................... 0.0529 .................... 0.1713
32-bit ext ...................... 0.4053 .................... 0.4323
fix array <span class="pl-c">#1 .................... 0.0342 .................... 0.0346</span>
fix array <span class="pl-c">#2 .................... 0.1301 .................... 0.1330</span>
16-bit array <span class="pl-c">#1 ................. 0.4228 .................... 0.4189</span>
16-bit array <span class="pl-c">#2 ...................... S ......................... S</span>
32-bit array ......................... S ......................... S
complex array ................... 0.5417 .................... 0.6958
fix map <span class="pl-c">#1 ...................... 0.2586 .................... 0.3144</span>
fix map <span class="pl-c">#2 ...................... 0.0979 .................... 0.1049</span>
fix map <span class="pl-c">#3 ...................... 0.1182 .................... 0.2156</span>
16-bit map <span class="pl-c">#1 ................... 0.7512 .................... 0.7400</span>
16-bit map <span class="pl-c">#2 ........................ S ......................... S</span>
32-bit map ........................... S ......................... S
complex map ..................... 0.7420 .................... 0.7913
====================================================================
Total                            16.9806                      9.4647
Skipped                                4                           4
Failed                                 0                           0
Ignored                                0                           0</pre></div>

<p>You may change default benchmark settings by defining the following environment variables:</p>

<ul>
<li>
<code>MP_BENCH_TARGETS</code> (pure_p, pure_u, pecl_p, pecl_u)</li>
<li>
<code>MP_BENCH_SIZE</code>/<code>MP_BENCH_TIME</code>
</li>
<li><code>MP_BENCH_CYCLES</code></li>
<li><code>MP_BENCH_TESTS</code></li>
</ul>

<p>For example:</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-k">export</span> MP_BENCH_TARGET=pure_p
$ <span class="pl-k">export</span> MP_BENCH_SIZE=1000000
$ <span class="pl-k">export</span> MP_BENCH_CYCLES=2
$ <span class="pl-k">export</span> MP_BENCH_TESTS=<span class="pl-s"><span class="pl-pds">'</span>complex array, complex map<span class="pl-pds">'</span></span>
$ php tests/bench.php</pre></div>

<p>Another example, benchmarking both the library and <a href="https://pecl.php.net/package/msgpack">msgpack pecl extension</a>:</p>

<div class="highlight highlight-source-shell"><pre>$ MP_BENCH_TARGETS=pure_p,pure_u,pecl_p,pecl_u php tests/bench.php

Filter: MessagePack<span class="pl-cce">\T</span>ests<span class="pl-cce">\P</span>erf<span class="pl-cce">\F</span>ilter<span class="pl-cce">\N</span>ameFilter
Cycles: 3
Iterations: 100000

==================================================================================================
Test/Target           MessagePack<span class="pl-cce">\P</span>acker  MessagePack<span class="pl-cce">\B</span>ufferUnpacker  msgpack_pack  msgpack_unpack
--------------------------------------------------------------------------------------------------
nil ............................. 0.0150 .................... 0.0324 ...... 0.0083 ........ 0.0075
<span class="pl-c1">false</span> ........................... 0.0158 .................... 0.0358 ...... 0.0093 ........ 0.0068
<span class="pl-c1">true</span> ............................ 0.0173 .................... 0.0352 ...... 0.0091 ........ 0.0067
7-bit uint <span class="pl-c">#1 ................... 0.0178 .................... 0.0254 ...... 0.0107 ........ 0.0063</span>
7-bit uint <span class="pl-c">#2 ................... 0.0187 .................... 0.0242 ...... 0.0091 ........ 0.0081</span>
7-bit uint <span class="pl-c">#3 ................... 0.0198 .................... 0.0245 ...... 0.0089 ........ 0.0066</span>
5-bit sint <span class="pl-c">#1 ................... 0.0195 .................... 0.0314 ...... 0.0090 ........ 0.0066</span>
5-bit sint <span class="pl-c">#2 ................... 0.0185 .................... 0.0328 ...... 0.0088 ........ 0.0070</span>
5-bit sint <span class="pl-c">#3 ................... 0.0192 .................... 0.0318 ...... 0.0086 ........ 0.0064</span>
8-bit uint <span class="pl-c">#1 ................... 0.0285 .................... 0.0734 ...... 0.0087 ........ 0.0078</span>
8-bit uint <span class="pl-c">#2 ................... 0.0286 .................... 0.0735 ...... 0.0086 ........ 0.0084</span>
8-bit uint <span class="pl-c">#3 ................... 0.0291 .................... 0.0723 ...... 0.0073 ........ 0.0067</span>
16-bit uint <span class="pl-c">#1 .................. 0.0302 .................... 0.0781 ...... 0.0098 ........ 0.0076</span>
16-bit uint <span class="pl-c">#2 .................. 0.0303 .................... 0.0813 ...... 0.0089 ........ 0.0080</span>
16-bit uint <span class="pl-c">#3 .................. 0.0299 .................... 0.0797 ...... 0.0090 ........ 0.0064</span>
32-bit uint <span class="pl-c">#1 .................. 0.0296 .................... 0.0817 ...... 0.0096 ........ 0.0070</span>
32-bit uint <span class="pl-c">#2 .................. 0.0301 .................... 0.0797 ...... 0.0089 ........ 0.0068</span>
32-bit uint <span class="pl-c">#3 .................. 0.0316 .................... 0.0818 ...... 0.0097 ........ 0.0070</span>
64-bit uint <span class="pl-c">#1 .................. 0.0436 .................... 0.0970 ...... 0.0089 ........ 0.0069</span>
64-bit uint <span class="pl-c">#2 .................. 0.0431 .................... 0.0930 ...... 0.0097 ........ 0.0075</span>
8-bit int <span class="pl-c">#1 .................... 0.0329 .................... 0.0752 ...... 0.0096 ........ 0.0071</span>
8-bit int <span class="pl-c">#2 .................... 0.0309 .................... 0.0733 ...... 0.0094 ........ 0.0069</span>
8-bit int <span class="pl-c">#3 .................... 0.0284 .................... 0.0740 ...... 0.0087 ........ 0.0076</span>
16-bit int <span class="pl-c">#1 ................... 0.0314 .................... 0.0909 ...... 0.0093 ........ 0.0077</span>
16-bit int <span class="pl-c">#2 ................... 0.0318 .................... 0.0925 ...... 0.0080 ........ 0.0068</span>
16-bit int <span class="pl-c">#3 ................... 0.0305 .................... 0.0872 ...... 0.0099 ........ 0.0069</span>
32-bit int <span class="pl-c">#1 ................... 0.0323 .................... 0.0864 ...... 0.0109 ........ 0.0069</span>
32-bit int <span class="pl-c">#2 ................... 0.0304 .................... 0.0874 ...... 0.0097 ........ 0.0083</span>
32-bit int <span class="pl-c">#3 ................... 0.0322 .................... 0.0900 ...... 0.0089 ........ 0.0075</span>
64-bit int <span class="pl-c">#1 ................... 0.0452 .................... 0.0953 ...... 0.0102 ........ 0.0069</span>
64-bit int <span class="pl-c">#2 ................... 0.0439 .................... 0.0990 ...... 0.0098 ........ 0.0071</span>
64-bit int <span class="pl-c">#3 ................... 0.0455 .................... 0.1066 ...... 0.0095 ........ 0.0083</span>
64-bit float <span class="pl-c">#1 ................. 0.0381 .................... 0.0914 ...... 0.0108 ........ 0.0088</span>
64-bit float <span class="pl-c">#2 ................. 0.0410 .................... 0.0905 ...... 0.0087 ........ 0.0078</span>
64-bit float <span class="pl-c">#3 ................. 0.0401 .................... 0.0884 ...... 0.0092 ........ 0.0081</span>
fix string <span class="pl-c">#1 ................... 0.0384 .................... 0.0378 ...... 0.0106 ........ 0.0076</span>
fix string <span class="pl-c">#2 ................... 0.0394 .................... 0.0565 ...... 0.0104 ........ 0.0104</span>
fix string <span class="pl-c">#3 ................... 0.0362 .................... 0.0492 ...... 0.0107 ........ 0.0090</span>
fix string <span class="pl-c">#4 ................... 0.0431 .................... 0.0511 ...... 0.0092 ........ 0.0096</span>
8-bit string <span class="pl-c">#1 ................. 0.0532 .................... 0.1021 ...... 0.0103 ........ 0.0092</span>
8-bit string <span class="pl-c">#2 ................. 0.0603 .................... 0.1008 ...... 0.0098 ........ 0.0082</span>
8-bit string <span class="pl-c">#3 ................. 0.0725 .................... 0.0972 ...... 0.0146 ........ 0.0113</span>
16-bit string <span class="pl-c">#1 ................ 0.0677 .................... 0.1063 ...... 0.0136 ........ 0.0102</span>
16-bit string <span class="pl-c">#2 ................ 5.5084 .................... 0.3627 ...... 0.3453 ........ 0.2780</span>
32-bit string ................... 5.6834 .................... 0.3985 ...... 0.3581 ........ 0.2897
wide char string <span class="pl-c">#1 ............. 0.0388 .................... 0.0494 ...... 0.0091 ........ 0.0090</span>
wide char string <span class="pl-c">#2 ............. 0.0531 .................... 0.1037 ...... 0.0121 ........ 0.0089</span>
8-bit binary <span class="pl-c">#1 ...................... I ......................... I ........... F ............. I</span>
8-bit binary <span class="pl-c">#2 ...................... I ......................... I ........... F ............. I</span>
8-bit binary <span class="pl-c">#3 ...................... I ......................... I ........... F ............. I</span>
16-bit binary ........................ I ......................... I ........... F ............. I
32-bit binary ........................ I ......................... I ........... F ............. I
fixext 1 ............................. I ......................... I ........... F ............. F
fixext 2 ............................. I ......................... I ........... F ............. F
fixext 4 ............................. I ......................... I ........... F ............. F
fixext 8 ............................. I ......................... I ........... F ............. F
fixext 16 ............................ I ......................... I ........... F ............. F
8-bit ext ............................ I ......................... I ........... F ............. F
16-bit ext ........................... I ......................... I ........... F ............. F
32-bit ext ........................... I ......................... I ........... F ............. F
fix array <span class="pl-c">#1 .................... 0.0360 .................... 0.0375 ...... 0.0201 ........ 0.0084</span>
fix array <span class="pl-c">#2 .................... 0.1346 .................... 0.1383 ...... 0.0241 ........ 0.0232</span>
16-bit array <span class="pl-c">#1 ................. 0.4201 .................... 0.4261 ...... 0.0481 ........ 0.0504</span>
16-bit array <span class="pl-c">#2 ...................... S ......................... S ........... S ............. S</span>
32-bit array ......................... S ......................... S ........... S ............. S
complex array ........................ I ......................... I ........... F ............. F
fix map <span class="pl-c">#1 ........................... I ......................... I ........... F ............. I</span>
fix map <span class="pl-c">#2 ...................... 0.0983 .................... 0.1033 ...... 0.0197 ........ 0.0205</span>
fix map <span class="pl-c">#3 ........................... I ......................... I ........... F ............. I</span>
16-bit map <span class="pl-c">#1 ................... 0.7686 .................... 0.7651 ...... 0.0472 ........ 0.0707</span>
16-bit map <span class="pl-c">#2 ........................ S ......................... S ........... S ............. S</span>
32-bit map ........................... S ......................... S ........... S ............. S
complex map ..................... 0.7609 .................... 0.8064 ...... 0.0741 ........ 0.0830
==================================================================================================
Total                            14.9638                      6.2847        1.3706          1.1717
Skipped                                4                           4             4               4
Failed                                 0                           0            16               9
Ignored                               16                          16             0               7</pre></div>

<blockquote>
<p>Note, that this is not a fair comparison as the msgpack extension (5.2+, 2.0) doesn't
support <strong>ext</strong>, <strong>bin</strong> and utf-8 <strong>str</strong> types.</p>
</blockquote>

<h6>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h6>

<p>The library is released under the MIT License. See the bundled <a href="/rybakit/msgpack.php/blob/master/LICENSE">LICENSE</a> file for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-michael-yuji-YSMessagePack" class="qs"><h4><a href="https://github.com/michael-yuji/YSMessagePack" target="_blank">michael-yuji/YSMessagePack <span class="qs-url">https://github.com/michael-yuji/YSMessagePack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-ysmessagepack--for-swift-21" class="anchor" href="#ysmessagepack--for-swift-21" aria-hidden="true"><span class="octicon octicon-link"></span></a>YSMessagePack- for swift 2.1</h5>

<p>YSMessagePack is a messagePack packer/unpacker written in swift 2.1. It is designed to be light and easy to use. YSMessagePack include following features:</p>

<ul>
<li>Pack and unpack multiple message-packed data regardless of types with only one line of code</li>
<li>Specify how many items to unpack</li>
<li>Packing options</li>
<li>Get remaining bytes that were not message-packed</li>
<li>Helper methods to cast NSData to desired types</li>
</ul>

<h6>
<a id="user-content-version" class="anchor" href="#version" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version</h6>

<p>beta - 0.1</p>

<h6>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h6>

<p>Simply add files under the directory below to your project                                                                                                                                                                                                                                                                  </p>

<pre lang="url"><code>MessagePack/src
</code></pre>

<h5>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h5>

<h7>
<a id="user-content-pack" class="anchor" href="#pack" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pack:</h7>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> exampleInt: <span class="pl-c1">Int</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>
<span class="pl-k">let</span> exampleStr: <span class="pl-c1">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
<span class="pl-k">let</span> exampleArray: [<span class="pl-c1">Int</span>] <span class="pl-k">=</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">6</span>]

<span class="pl-c">//use the method `packItems' to pack </span>
<span class="pl-c">//this will be the packed data</span>
<span class="pl-k">let</span> msgPackedBytes: NSData <span class="pl-k">=</span> packItems([exampleInt, exampleStr, exampleArray]) </pre></div>

<p><strong>Or you can pack them individually and add them to a byte array manually (Which is also less expensive)</strong></p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> exampleInt: <span class="pl-c1">Int</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>
<span class="pl-k">let</span> exampleStr: <span class="pl-c1">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
<span class="pl-k">let</span> exampleArray: [<span class="pl-c1">Int</span>] <span class="pl-k">=</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">6</span>]

<span class="pl-c">//Now pack them idividually</span>
<span class="pl-k">let</span> packedInt <span class="pl-k">=</span> exampleInt<span class="pl-k">.</span>pack()

<span class="pl-c">//if you didn't specifiy encoding, the default encoding will be ASCII</span>
<span class="pl-k">let</span> packedStr <span class="pl-k">=</span> exampleStr<span class="pl-k">.</span>pack(withEncoding: NSASCIIStringEncoding) 

<span class="pl-k">let</span> packedArray <span class="pl-k">=</span> exampleArray<span class="pl-k">.</span>pack()
<span class="pl-k">let</span> msgPackedBytes: NSData <span class="pl-k">=</span> packedInt<span class="pl-k">.</span>byte_array <span class="pl-k">+</span> packedStr<span class="pl-k">.</span>byte_array <span class="pl-k">+</span> packedArray<span class="pl-k">.</span>byte_array</pre></div>

<h6>
<a id="user-content-unpack" class="anchor" href="#unpack" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unpack</h6>

<p>Unpack a messagePacked byte array is also very easy:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">do</span> {
    <span class="pl-c">//The unpack method will return an array of NSData which each element is an unpacked object</span>
    <span class="pl-k">let</span> unpackedItems <span class="pl-k">=</span> <span class="pl-k">try</span> msgPackedBytes<span class="pl-k">.</span>unpack()
    <span class="pl-c">//instead of casting the NSData to the type you want, you can call these `.castTo..` methods to do the job for you</span>
    <span class="pl-k">let</span> int: <span class="pl-c1">Int</span> <span class="pl-k">=</span> unpackedItems[<span class="pl-c1">0</span>]<span class="pl-k">.</span>castToInt()

    <span class="pl-c">//Same as packing, you can also specify the encoding you want to use, default is ASCII</span>
    <span class="pl-k">let</span> str: <span class="pl-c1">String</span> <span class="pl-k">=</span> unpackedItems[<span class="pl-c1">1</span>]<span class="pl-k">.</span>castToString() 
    <span class="pl-k">let</span> array: NSArray <span class="pl-k">=</span> unpackedItems[<span class="pl-c1">2</span>]<span class="pl-k">.</span>castToArray() 
} <span class="pl-k">catch</span> <span class="pl-k">let</span> error <span class="pl-k">as</span> NSError{
    NSLog(<span class="pl-s"><span class="pl-pds">"</span>Error occurs during unpacking: %@<span class="pl-pds">"</span></span>, error)
}</pre></div>

<p><strong>If you don't want to unpack every single thing included in the message-pack byte array, you can also specify an amount to unpack, if you want to keep the remaining bytes, you can put <code>true</code> in the <code>returnRemainingBytes</code> argument, the remaining bytes will stored in the end of the <code>NSData</code> array.</strong></p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">do</span> {
    <span class="pl-c">//Unpack only 2 objects, and we are not interested in remaining bytes</span>
    <span class="pl-k">let</span> unpackedItems <span class="pl-k">=</span> <span class="pl-k">try</span> msgPackedBytes<span class="pl-k">.</span>unpack(specific_amount: <span class="pl-c1">2</span>, returnRemainingBytes: <span class="pl-c1">false</span>)
    <span class="pl-c1">print</span>(unpackedItems<span class="pl-k">.</span><span class="pl-c1">count</span>) <span class="pl-c">//will print 2</span>
} <span class="pl-k">catch</span> <span class="pl-k">let</span> error <span class="pl-k">as</span> NSError{
    NSLog(<span class="pl-s"><span class="pl-pds">"</span>Error occurs during unpacking: %@<span class="pl-pds">"</span></span>, error)
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-caesay-MPack" class="qs"><h4><a href="https://github.com/caesay/MPack" target="_blank">caesay/MPack <span class="qs-url">https://github.com/caesay/MPack</span></a></h4>
<div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h5>
<a id="user-content-mpack---" class="anchor" href="#mpack---" aria-hidden="true"><span class="octicon octicon-link"></span></a>MPack   </h5>

<p>This library is a lightweight implementation of the <a href="http://msgpack.org/">MessagePack</a> binary serialization format. MessagePack is a 1-to-1 binary representation of JSON, and the official specification can be found here: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack...</a>.</p>

<p><a href="https://camo.githubusercontent.com/5def7f13542893174ba10d90e2b87a2047e19b65/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f38346a76306c6c6c6e697173696370623f7376673d74727565" target="_blank"><img src="https://camo.githubusercontent.com/5def7f13542893174ba10d90e2b87a2047e19b65/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f38346a76306c6c6c6e697173696370623f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/84jv0lllniqsicpb?svg=true" style="max-width:100%;"></a>](<a href="https://ci.appveyor.com/project/caesay/mpack">https://ci.appveyor.com/project/caesay/mpack</a>)</p>

<h6>
<a id="user-content-notes" class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes</h6>

<p>This library is contained in one file, with the designed purpose of being a drop-in file to your solution instead of being an added dependancy.</p>

<p>Its easiest to understand how this library works if you think in terms of json. The type <code>MPackMap</code> represents a dictionary, and the type <code>MPackArray</code> represents an array. Everything else can be created with the <code>MPack</code> type static methods (such as <code>MPack.FromString(string)</code>).</p>

<h6>
<a id="user-content-nuget" class="anchor" href="#nuget" aria-hidden="true"><span class="octicon octicon-link"></span></a>NuGet</h6>

<p>MPack is now available as a NuGet package!</p>

<pre><code>PM&gt; Install-Package MPack
</code></pre>

<h6>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h6>

<p>Create a object model that can be represented as MsgPack. Here we are creating a dictionary, but really it can be anything:</p>

<div class="highlight highlight-source-cs"><pre>MPackMap dictionary = <span class="pl-k">new</span> MPackMap
{
    {
        <span class="pl-s"><span class="pl-pds">"</span>array1<span class="pl-pds">"</span></span>, MPack.FromArray(<span class="pl-k">new</span>[]
        {
            MPack.FromString(<span class="pl-s"><span class="pl-pds">"</span>array1_value1<span class="pl-pds">"</span></span>),
            MPack.FromString(<span class="pl-s"><span class="pl-pds">"</span>array1_value2<span class="pl-pds">"</span></span>),
            MPack.FromString(<span class="pl-s"><span class="pl-pds">"</span>array1_value3<span class="pl-pds">"</span></span>),
        })
    },
    {<span class="pl-s"><span class="pl-pds">"</span>bool1<span class="pl-pds">"</span></span>, MPack.FromBool(<span class="pl-c1">true</span>)},
    {<span class="pl-s"><span class="pl-pds">"</span>double1<span class="pl-pds">"</span></span>, MPack.FromDouble(<span class="pl-c1">50.5</span>)},
    {<span class="pl-s"><span class="pl-pds">"</span>double2<span class="pl-pds">"</span></span>, MPack.FromDouble(<span class="pl-c1">15.2</span>)},
    {<span class="pl-s"><span class="pl-pds">"</span>int1<span class="pl-pds">"</span></span>, MPack.FromInteger(<span class="pl-c1">50505</span>)},
    {<span class="pl-s"><span class="pl-pds">"</span>int2<span class="pl-pds">"</span></span>, MPack.FromInteger(<span class="pl-c1">50</span>)}
};</pre></div>

<p>Serialize the data to a byte array or to a stream to be saved, transmitted, etc:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">byte</span>[] encodedBytes = dictionary.EncodeToBytes();
<span class="pl-c">// -- or --</span>
dictionary.EncodeToStream(stream);</pre></div>

<p>Parse the binary data back into a MPack object model:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">var</span> reconstructed = MPack.ParseFromBytes(encodedBytes) <span class="pl-k">as</span> MPackMap;
<span class="pl-c">// -- or --</span>
<span class="pl-k">var</span> reconstructed = MPack.ParseFromStream(stream) <span class="pl-k">as</span> MPackMap;</pre></div>

<p>Turn MPack objects back into types that we understand with the generic <code>To&lt;&gt;()</code> method. Since we know the types of everything here we can just call <code>To&lt;bool&gt;()</code> to reconstruct our bool, but if you don't know you can access the instance enum <code>MPack.ValueType</code> to know what kind of value it is:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">bool</span> bool1 = reconstructed[<span class="pl-s"><span class="pl-pds">"</span>bool1<span class="pl-pds">"</span></span>].To&lt;<span class="pl-k">bool</span>&gt;();
<span class="pl-k">var</span> array1 = reconstructed[<span class="pl-s"><span class="pl-pds">"</span>array1<span class="pl-pds">"</span></span>] <span class="pl-k">as</span> MPackArray;
<span class="pl-k">var</span> array1_value1 = array1[<span class="pl-c1">0</span>];
<span class="pl-k">double</span> double1 = reconstructed[<span class="pl-s"><span class="pl-pds">"</span>double1<span class="pl-pds">"</span></span>].To&lt;<span class="pl-k">double</span>&gt;();
<span class="pl-c">//etc...</span></pre></div>

<h6>
<a id="user-content-credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h6>

<p>The following people/projects have made this possible:</p>

<ol>
<li>Me, obviously :) (caelantsayler]at[gmail]dot[com)</li>
<li>ymofen (ymofen]at[diocp]dot[org) for his work on <a href="https://github.com/ymofen/SimpleMsgPack.Net">https://github.com/ymofen/SimpleMsgPack.Net</a>
</li>
<li>All of the people that make MessagePack happen <a href="https://github.com/msgpack">https://github.com/msgpack</a>
</li>
</ol>
</article>
  </div>
        </div>
        
      </div>
    </section>

    <section id="related">
      <h3>関連プロジェクト</h3>

      <div class="paragraphs">
        <h4><a href="https://github.com/dotcloud/zerorpc-python">ZeroRPC</a> by DotCloud</h4>
        <p>zerorpc is a flexible RPC implementation based on zeromq and messagepack. Service APIs exposed with zerorpc are called "zeroservices".</p>

        <h4><a href="https://github.com/pfi/pficommon">pficommon</a> by Preferred Infrastructure, Inc.</h4>
        <p>General purpose C++ library for Preferred Infrastructure, Inc. It includes MessagePack-RPC implementation for C++</p>
      </div>
    </section>

    <div id="json-to-msgpack">
      <h3>JSON <span class="bytes" id="json-bytes"></span></h3>
      <textarea type="text" id="json-text">{"compact":true,"schema":0}</textarea>
      <h3>MessagePack (hex) <span class="bytes" id="msgpack-bytes"></span> <span class="bytes" id="msgpack-percent"></span></h3>
      <textarea readonly id="msgpack-text"></textarea>
    </div>
  </main>

  <footer>
    <div>
      <div id="thanks">
        <p>MessagePack &trade; Copyright &copy; 2008-2013 Sadayuki Furuhashi</p>
      </div>
    </div>
  </footer>
</body>
